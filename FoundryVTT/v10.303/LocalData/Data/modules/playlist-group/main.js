(()=>{"use strict";var __webpack_modules__={555:()=>{eval("\n;// CONCATENATED MODULE: ./src/constant.ts\nconst user = () => game.user;\nconst i18n = () => game.i18n;\nconst i18nLocalize = (id) => i18n().localize(id);\nconst playlists = () => game.playlists;\nconst initTemplates = (paths) => loadTemplates(paths);\nconst isGM = () => { var _a, _b; return (_b = (_a = user()) === null || _a === void 0 ? void 0 : _a.isGM) !== null && _b !== void 0 ? _b : false; };\n\n;// CONCATENATED MODULE: ./src/abstract-chooser.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass AbstractChooser extends FormApplication {\n    constructor(object, options = {}) {\n        super(object, options);\n        this.model = this.getInitModel();\n        this.model.data = this.object;\n        this.model.id = new Date().getTime();\n        this.model.buttonsTemplate = () => `modules/playlist-group/templates/chooser-action.html`;\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            height: 'auto',\n            resizable: true,\n            closeOnSubmit: true,\n        });\n    }\n    close(options) {\n        const _super = Object.create(null, {\n            close: { get: () => super.close }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield _super.close.call(this, options !== null && options !== void 0 ? options : { submit: false, force: true });\n        });\n    }\n    _onSubmit(event, options) {\n        const _super = Object.create(null, {\n            _onSubmit: { get: () => super._onSubmit }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            event.preventDefault();\n            if (this.isValid(this.model.data)) {\n                yield _super._onSubmit.call(this, event, options);\n                this.yes(this.model.data);\n            }\n            return Promise.resolve({});\n        });\n    }\n    _getSubmitData(_updateData) {\n        return this.model.data;\n    }\n    getData() {\n        return this.model;\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n        this.handleClick(html, `#${this.model.id}-no`, (_event) => __awaiter(this, void 0, void 0, function* () {\n            yield this.close();\n            this.no();\n        }));\n    }\n    handleClick(html, selector, handler) {\n        html.find(selector).on('click', handler);\n    }\n    handleChange(html, selector, handler) {\n        html.find(selector).on('change', handler);\n    }\n    handleInput(html, selector, handler) {\n        html.find(selector).on('input', handler);\n    }\n    _updateObject(_event, _formData) {\n        return Promise.resolve();\n    }\n    no() { }\n    getInitModel() {\n        return {\n            data: {},\n            actions: [\n                {\n                    name: 'yes',\n                    label: 'PLAYLISTGROUP.common.button.OK',\n                    icon: 'fa-check',\n                    type: 'submit',\n                    callback: this.yes,\n                },\n                {\n                    name: 'no',\n                    label: 'PLAYLISTGROUP.common.button.Cancel',\n                    icon: 'fa-times',\n                    type: 'button',\n                    callback: this.no,\n                },\n            ],\n        };\n    }\n}\n\n;// CONCATENATED MODULE: ./src/select-model.ts\nclass SelectModel {\n    constructor(key, value, selected) {\n        this.key = key;\n        this.value = value;\n        this.selected = selected;\n    }\n}\n\n;// CONCATENATED MODULE: ./src/playlist-group-chooser.ts\nvar playlist_group_chooser_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\nclass Model {\n    constructor(name, playlistIds) {\n        this.name = name;\n        this.playlistIds = playlistIds;\n    }\n}\nclass PlaylistGroupChooser extends AbstractChooser {\n    constructor(object, callback, options) {\n        super(object, options);\n        const pls = playlists().contents.filter((pl) => { var _a; return !((_a = pl.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup); });\n        this.selectedPlaylist = pls.length > 0 ? pls[0]._id : '';\n        this.model.playlists = pls.map((pl) => new SelectModel(pl._id, pl.name, this.selectedPlaylist === pl._id));\n        this.updateSelectedPlaylists();\n        this.callback = callback;\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            id: 'playlist-group-chooser',\n            title: i18n().localize('PLAYLISTGROUP.playlists.group.edit'),\n            template: `modules/playlist-group/templates/playlist-group-chooser.html`,\n            width: 400,\n        });\n    }\n    static selectPlaylists(initName, initPlaylistIds, callback) {\n        return playlist_group_chooser_awaiter(this, void 0, void 0, function* () {\n            new PlaylistGroupChooser(new Model(initName, initPlaylistIds), callback).render(true);\n        });\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n        this.handleChange(html, '#nameInput', (event) => {\n            this.updateName(event.currentTarget.value);\n        });\n        this.handleChange(html, '#selectPlaylists', (event) => {\n            this.selectedPlaylist = event.currentTarget.value;\n            this.model.playlists.forEach((pl) => {\n                pl.selected = pl.key === this.selectedPlaylist;\n            });\n        });\n        this.handleClick(html, '#addPlaylistButton', () => {\n            if (!this.model.data.playlistIds.includes(this.selectedPlaylist)) {\n                this.model.data.playlistIds.push(this.selectedPlaylist);\n                this.updateSelectedPlaylists();\n                this.render();\n            }\n        });\n        this.handleClick(html, '.remove-playlist-button', (event) => {\n            const key = event.currentTarget.value;\n            if (this.model.data.playlistIds.includes(key)) {\n                this.model.data.playlistIds = this.model.data.playlistIds.filter((pli) => pli !== key);\n                this.updateSelectedPlaylists();\n                this.render();\n            }\n        });\n    }\n    isValid(data) {\n        var _a;\n        return ((_a = data === null || data === void 0 ? void 0 : data.name) === null || _a === void 0 ? void 0 : _a.length) > 0;\n    }\n    yes(data) {\n        this.callback(data === null || data === void 0 ? void 0 : data.name, data === null || data === void 0 ? void 0 : data.playlistIds);\n    }\n    updateName(name) {\n        this.model.data.name = name;\n    }\n    updateSelectedPlaylists() {\n        this.model.selectedPlaylists = this.model.playlists.filter((pl) => this.model.data.playlistIds.includes(pl.key));\n    }\n}\n\n;// CONCATENATED MODULE: ./src/random-util.ts\nclass RandomUtil {\n    static getRandomId() {\n        return randomID(16);\n    }\n}\n\n;// CONCATENATED MODULE: ./src/playlist-group.ts\nvar playlist_group_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\nclass PlaylistGroup {\n    static createPlaylistGroup() {\n        return playlist_group_awaiter(this, void 0, void 0, function* () {\n            yield PlaylistGroupChooser.selectPlaylists('', [], (name, ids) => playlist_group_awaiter(this, void 0, void 0, function* () {\n                var _a;\n                const playlistGroup = yield Playlist.create({\n                    name: name,\n                    flags: {\n                        playlistGroup: true,\n                        playlists: ids,\n                    },\n                });\n                yield this.updatePlaylistGroupSounds(playlistGroup !== null && playlistGroup !== void 0 ? playlistGroup : {});\n                (_a = playlistGroup === null || playlistGroup === void 0 ? void 0 : playlistGroup.sheet) === null || _a === void 0 ? void 0 : _a.render(true);\n            }));\n        });\n    }\n    static updatePlaylistGroupFromSound(sound) {\n        return playlist_group_awaiter(this, void 0, void 0, function* () {\n            const playlist = sound.parent;\n            if (playlist != null) {\n                const playlistGroups = playlists().contents.filter((pl) => {\n                    var _a, _b, _c;\n                    return ((_a = pl === null || pl === void 0 ? void 0 : pl.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) &&\n                        ((_c = (_b = pl === null || pl === void 0 ? void 0 : pl.flags) === null || _b === void 0 ? void 0 : _b.playlists) === null || _c === void 0 ? void 0 : _c.includes(playlist._id));\n                });\n                for (const plg of playlistGroups) {\n                    yield this.updatePlaylistGroupSounds(plg);\n                }\n            }\n        });\n    }\n    static updatePlaylistGroupSounds(playlistGroup) {\n        var _a, _b, _c, _d, _e;\n        return playlist_group_awaiter(this, void 0, void 0, function* () {\n            const playListIds = (_c = (_b = (_a = playlistGroup) === null || _a === void 0 ? void 0 : _a.flags) === null || _b === void 0 ? void 0 : _b.playlists) !== null && _c !== void 0 ? _c : [];\n            yield playlistGroup.deleteEmbeddedDocuments(PlaylistSound.documentName, (_e = (_d = playlistGroup === null || playlistGroup === void 0 ? void 0 : playlistGroup.sounds) === null || _d === void 0 ? void 0 : _d.contents) === null || _e === void 0 ? void 0 : _e.map((s) => { var _a, _b; return (_b = (_a = s) === null || _a === void 0 ? void 0 : _a._id) !== null && _b !== void 0 ? _b : ''; }));\n            const sounds = [];\n            for (const pli of playListIds) {\n                const playlist = playlists().contents.find((pl) => pl._id === pli);\n                if (playlist != null) {\n                    for (const sound of playlist.sounds.contents) {\n                        const clonedSoundData = duplicate(sound);\n                        clonedSoundData._id = RandomUtil.getRandomId();\n                        sounds.push(clonedSoundData);\n                    }\n                }\n            }\n            if (sounds.length > 0) {\n                yield playlistGroup.createEmbeddedDocuments(PlaylistSound.metadata.name, this.toRecords(sounds));\n            }\n        });\n    }\n    static toRecords(arrays) {\n        return arrays.map((d) => (d.toObject != null ? d.toObject() : d));\n    }\n}\n\n;// CONCATENATED MODULE: ./src/main.ts\nvar main_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\nHooks.once('init', () => {\n    initTemplates([\n        'modules/playlist-group/templates/playlist-group-chooser.html',\n        'modules/playlist-group/templates/chooser-action.html',\n    ]);\n});\nHooks.once('ready', () => main_awaiter(void 0, void 0, void 0, function* () {\n    var _a;\n    for (const playlist of playlists().contents) {\n        if ((_a = playlist === null || playlist === void 0 ? void 0 : playlist.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) {\n            yield PlaylistGroup.updatePlaylistGroupSounds(playlist);\n        }\n    }\n}));\nHooks.on('getPlaylistDirectoryEntryContext', (_, options) => {\n    options.push({\n        name: i18nLocalize('PLAYLISTGROUP.playlists.group.edit'),\n        condition: isGM(),\n        icon: '<i class=\"fas fa-edit fa-fw\"></i>',\n        callback: (target) => main_awaiter(void 0, void 0, void 0, function* () {\n            var _a, _b, _c, _d, _e, _f;\n            const id = target.attr('data-document-id');\n            if (id != null) {\n                const playlist = playlists().contents.find((pl) => pl._id === id);\n                if ((_b = (_a = playlist) === null || _a === void 0 ? void 0 : _a.flags) === null || _b === void 0 ? void 0 : _b.playlistGroup) {\n                    yield PlaylistGroupChooser.selectPlaylists((_c = playlist.name) !== null && _c !== void 0 ? _c : '', (_f = (_e = (_d = playlist) === null || _d === void 0 ? void 0 : _d.flags) === null || _e === void 0 ? void 0 : _e.playlists) !== null && _f !== void 0 ? _f : [], (name, ids) => main_awaiter(void 0, void 0, void 0, function* () {\n                        yield playlist.update({\n                            name: name,\n                            flags: {\n                                playlists: ids,\n                            },\n                        });\n                        yield PlaylistGroup.updatePlaylistGroupSounds(playlist);\n                    }));\n                }\n            }\n        }),\n    });\n});\nHooks.on('renderPlaylistConfig', (_, html) => {\n    var _a;\n    const id = html[0].id.replace('playlist-config-', '');\n    if (id != null) {\n        const playlist = playlists().contents.find((pl) => pl._id === id);\n        if ((_a = playlist === null || playlist === void 0 ? void 0 : playlist.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) {\n            html[0].classList.add('playlist-group-config');\n            html.find('.form-group').last().addClass('playlist-group-hide');\n        }\n    }\n});\nHooks.on('createPlaylistSound', (sound) => main_awaiter(void 0, void 0, void 0, function* () {\n    yield PlaylistGroup.updatePlaylistGroupFromSound(sound);\n}));\nHooks.on('deletePlaylistSound', (sound) => main_awaiter(void 0, void 0, void 0, function* () {\n    yield PlaylistGroup.updatePlaylistGroupFromSound(sound);\n}));\nHooks.on('renderPlaylistDirectory', (_, html) => main_awaiter(void 0, void 0, void 0, function* () {\n    if (user().can('ACTOR_CREATE')) {\n        addPlaylistGroupActionButton(html, 'PLAYLISTGROUP.common.add.button', (_) => main_awaiter(void 0, void 0, void 0, function* () {\n            yield PlaylistGroup.createPlaylistGroup();\n        }));\n    }\n    html.find('.playlist-header').each((_, elm) => {\n        var _a, _b, _c;\n        const id = elm.dataset.documentId;\n        if (id != null) {\n            const playlist = playlists().contents.find((pl) => pl._id === id);\n            if ((_a = playlist === null || playlist === void 0 ? void 0 : playlist.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) {\n                html\n                    .find(elm)\n                    .children()\n                    .first()\n                    .before('<i class=\"fas fa-file-audio playlist-group-icon\"></i>');\n                (_c = (_b = elm === null || elm === void 0 ? void 0 : elm.parentElement) === null || _b === void 0 ? void 0 : _b.classList) === null || _c === void 0 ? void 0 : _c.add('playlist-group');\n                html.find(elm).find('a[data-action=\"sound-create\"]').remove();\n            }\n            else {\n                elm.classList.add('playlist-legacy');\n            }\n        }\n    });\n}));\nfunction addPlaylistGroupActionButton(html, label, onClick) {\n    const button = document.createElement('button');\n    button.style.width = '95%';\n    button.innerHTML = i18nLocalize(label);\n    button.addEventListener('click', (event) => {\n        onClick(event);\n    });\n    html.find('.header-actions').after(button);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTU1LmpzIiwibWFwcGluZ3MiOiI7O0FBQU8sTUFBTSxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQU8sSUFBSyxDQUFDLElBQUksQ0FBQztBQUNwQyxNQUFNLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBTyxJQUFLLENBQUMsSUFBSSxDQUFDO0FBQ3BDLE1BQU0sWUFBWSxHQUFHLENBQUMsRUFBVSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDekQsTUFBTSxTQUFTLEdBQUcsR0FBRyxFQUFFLENBQU8sSUFBSyxDQUFDLFNBQVMsQ0FBQztBQUM5QyxNQUFNLGFBQWEsR0FBRyxDQUFDLEtBQWUsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hFLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRSxlQUFDLHVCQUFJLEVBQUUsMENBQUUsSUFBSSxtQ0FBSSxLQUFLLElBQUM7Ozs7Ozs7Ozs7OztBQ1l6QyxNQUFlLGVBQWtDLFNBQVEsZUFHL0Q7SUFHQyxZQUNFLE1BQVksRUFDWixVQUEyQyxFQUFFO1FBRTdDLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFOZixVQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBT3BDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxHQUFHLEVBQUUsQ0FDaEMsc0RBQXNELENBQUM7SUFDM0QsQ0FBQztJQUVNLE1BQU0sS0FBSyxjQUFjO1FBQzlCLE9BQU8sV0FBVyxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQTBCO1lBQy9ELE1BQU0sRUFBRSxNQUFNO1lBQ2QsU0FBUyxFQUFFLElBQUk7WUFDZixhQUFhLEVBQUUsSUFBSTtTQUNwQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRVksS0FBSyxDQUFDLE9BQWdCOzs7OztZQUNqQyxPQUFPLE1BQU0sT0FBTSxLQUFLLFlBQUMsT0FBTyxhQUFQLE9BQU8sY0FBUCxPQUFPLEdBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLENBQUM7S0FBQTtJQUVlLFNBQVMsQ0FDdkIsS0FBWSxFQUNaLE9BQXlDOzs7OztZQUV6QyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDdkIsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ2pDLE1BQU0sT0FBTSxTQUFTLFlBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDM0I7WUFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDN0IsQ0FBQztLQUFBO0lBRVMsY0FBYyxDQUFDLFdBQW9CO1FBQzNDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDekIsQ0FBQztJQUVNLE9BQU87UUFDWixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVNLGlCQUFpQixDQUFDLElBQVk7UUFDbkMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFPLE1BQU0sRUFBRSxFQUFFO1lBQzlELE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ25CLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNaLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQztJQUVTLFdBQVcsQ0FDbkIsSUFBWSxFQUNaLFFBQWdCLEVBQ2hCLE9BQTJDO1FBRTNDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRVMsWUFBWSxDQUNwQixJQUFZLEVBQ1osUUFBZ0IsRUFDaEIsT0FBNEM7UUFFNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFUyxXQUFXLENBQ25CLElBQVksRUFDWixRQUFnQixFQUNoQixPQUEwQztRQUUxQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVTLGFBQWEsQ0FDckIsTUFBYSxFQUNiLFNBQTZCO1FBRTdCLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFUyxFQUFFLEtBQUksQ0FBQztJQU1ULFlBQVk7UUFDbEIsT0FBNEI7WUFDMUIsSUFBSSxFQUFRLEVBQUU7WUFDZCxPQUFPLEVBQUU7Z0JBQ1A7b0JBQ0UsSUFBSSxFQUFFLEtBQUs7b0JBQ1gsS0FBSyxFQUFFLGdDQUFnQztvQkFDdkMsSUFBSSxFQUFFLFVBQVU7b0JBQ2hCLElBQUksRUFBRSxRQUFRO29CQUNkLFFBQVEsRUFBRSxJQUFJLENBQUMsR0FBRztpQkFDbkI7Z0JBQ0Q7b0JBQ0UsSUFBSSxFQUFFLElBQUk7b0JBQ1YsS0FBSyxFQUFFLG9DQUFvQztvQkFDM0MsSUFBSSxFQUFFLFVBQVU7b0JBQ2hCLElBQUksRUFBRSxRQUFRO29CQUNkLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRTtpQkFDbEI7YUFDRjtTQUNGLENBQUM7SUFDSixDQUFDO0NBQ0Y7OztBQ3BJTSxNQUFNLFdBQVc7SUFLdEIsWUFBWSxHQUFXLEVBQUUsS0FBYSxFQUFFLFFBQWlCO1FBQ3ZELElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztDQUNGOzs7Ozs7Ozs7Ozs7QUNWb0Q7QUFDUjtBQUNBO0FBRTdDLE1BQU0sS0FBSztJQUlULFlBQVksSUFBWSxFQUFFLFdBQXFCO1FBQzdDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0lBQ2pDLENBQUM7Q0FDRjtBQUVNLE1BQU0sb0JBQXFCLFNBQVEsZUFNekM7SUFJQyxZQUNFLE1BQWEsRUFDYixRQUEyRCxFQUMzRCxPQUF5QztRQUV6QyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLE1BQU0sR0FBRyxHQUFHLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxXQUFDLFFBQUMsU0FBRSxDQUFDLEtBQUssMENBQUUsYUFBYSxLQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDekQsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FDNUIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksV0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUMzRSxDQUFDO1FBQ0YsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUVNLE1BQU0sS0FBSyxjQUFjO1FBQzlCLE9BQU8sV0FBVyxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUU7WUFDdkMsRUFBRSxFQUFFLHdCQUF3QjtZQUM1QixLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLG9DQUFvQyxDQUFDO1lBQzVELFFBQVEsRUFBRSw4REFBOEQ7WUFDeEUsS0FBSyxFQUFFLEdBQUc7U0FDWCxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU0sTUFBTSxDQUFPLGVBQWUsQ0FDakMsUUFBZ0IsRUFDaEIsZUFBeUIsRUFDekIsUUFBMkQ7O1lBRTNELElBQUksb0JBQW9CLENBQ3RCLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUMsRUFDcEMsUUFBUSxDQUNULENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pCLENBQUM7S0FBQTtJQUVNLGlCQUFpQixDQUFDLElBQVk7UUFDbkMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQzlDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLGtCQUFrQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDcEQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO1lBQ2xELElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFO2dCQUNsQyxFQUFFLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLGdCQUFnQixDQUFDO1lBQ2pELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7WUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7Z0JBQ2hFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7Z0JBQ3hELElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO2dCQUMvQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDZjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUMxRCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQztZQUN0QyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzdDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUM5RCxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FDckIsQ0FBQztnQkFDRixJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztnQkFDL0IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ2Y7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFUyxPQUFPLENBQUMsSUFBVzs7UUFDM0IsT0FBTyxXQUFJLGFBQUosSUFBSSx1QkFBSixJQUFJLENBQUUsSUFBSSwwQ0FBRSxNQUFNLElBQUcsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFUyxHQUFHLENBQUMsSUFBVztRQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksYUFBSixJQUFJLHVCQUFKLElBQUksQ0FBRSxJQUFJLEVBQUUsSUFBSSxhQUFKLElBQUksdUJBQUosSUFBSSxDQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFTyxVQUFVLENBQUMsSUFBWTtRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQzlCLENBQUM7SUFFTyx1QkFBdUI7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUNoRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FDN0MsQ0FBQztJQUNKLENBQUM7Q0FDRjs7O0FDN0dNLE1BQU0sVUFBVTtJQUNkLE1BQU0sQ0FBQyxXQUFXO1FBQ3ZCLE9BQU8sUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7Q0FDRjs7Ozs7Ozs7Ozs7O0FDSitEO0FBQ3pCO0FBRUk7QUFHcEMsTUFBTSxhQUFhO0lBQ2pCLE1BQU0sQ0FBTyxtQkFBbUI7O1lBQ3JDLE1BQU0sb0NBQW9DLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFPLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDOztnQkFDdEUsTUFBTSxhQUFhLEdBRUgsTUFBTSxRQUFRLENBQUMsTUFBTSxDQUFDO29CQUNwQyxJQUFJLEVBQUUsSUFBSTtvQkFDVixLQUFLLEVBQUU7d0JBQ0wsYUFBYSxFQUFFLElBQUk7d0JBQ25CLFNBQVMsRUFBRSxHQUFHO3FCQUNmO2lCQUNGLENBQUMsQ0FBQztnQkFDSCxNQUFNLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxhQUFhLGFBQWIsYUFBYSxjQUFiLGFBQWEsR0FBYyxFQUFFLENBQUMsQ0FBQztnQkFFcEUsbUJBQWEsYUFBYixhQUFhLHVCQUFiLGFBQWEsQ0FBRSxLQUFLLDBDQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNyQyxDQUFDLEVBQUMsQ0FBQztRQUNMLENBQUM7S0FBQTtJQUVNLE1BQU0sQ0FBTyw0QkFBNEIsQ0FBQyxLQUFvQjs7WUFDbkUsTUFBTSxRQUFRLEdBQW9CLEtBQUssQ0FBQyxNQUFNLENBQUM7WUFDL0MsSUFBSSxRQUFRLElBQUksSUFBSSxFQUFFO2dCQUNwQixNQUFNLGNBQWMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUNoRCxDQUFDLEVBQUUsRUFBRSxFQUFFOztvQkFDTCxnQkFBRSxhQUFGLEVBQUUsdUJBQUYsRUFBRSxDQUFFLEtBQUssMENBQUUsYUFBYTt5QkFDeEIsY0FBRSxhQUFGLEVBQUUsdUJBQUYsRUFBRSxDQUFFLEtBQUssMENBQUUsU0FBUywwQ0FBRSxRQUFRLENBQU8sUUFBUyxDQUFDLEdBQUcsQ0FBQztpQkFBQSxDQUN0RCxDQUFDO2dCQUNGLEtBQUssTUFBTSxHQUFHLElBQUksY0FBYyxFQUFFO29CQUNoQyxNQUFNLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztpQkFDM0M7YUFDRjtRQUNILENBQUM7S0FBQTtJQUVNLE1BQU0sQ0FBTyx5QkFBeUIsQ0FDM0MsYUFBa0Q7OztZQUVsRCxNQUFNLFdBQVcsR0FBYSxrQkFBTSxhQUFjLDBDQUFFLEtBQUssMENBQUUsU0FBUyxtQ0FBSSxFQUFFLENBQUM7WUFDM0UsTUFBTSxhQUFhLENBQUMsdUJBQXVCLENBQ3pDLGFBQWEsQ0FBQyxZQUFZLEVBQzFCLHlCQUFhLGFBQWIsYUFBYSx1QkFBYixhQUFhLENBQUUsTUFBTSwwQ0FBRSxRQUFRLDBDQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLGVBQUMsbUJBQU0sQ0FBRSwwQ0FBRSxHQUFHLG1DQUFJLEVBQUUsSUFBQyxDQUNqRSxDQUFDO1lBQ0YsTUFBTSxNQUFNLEdBQW9CLEVBQUUsQ0FBQztZQUNuQyxLQUFLLE1BQU0sR0FBRyxJQUFJLFdBQVcsRUFBRTtnQkFDN0IsTUFBTSxRQUFRLEdBQWEsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDbEQsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUN2QixDQUFDO2dCQUNGLElBQUksUUFBUSxJQUFJLElBQUksRUFBRTtvQkFDcEIsS0FBSyxNQUFNLEtBQUssSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTt3QkFDNUMsTUFBTSxlQUFlLEdBQTRCLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDbEUsZUFBZSxDQUFDLEdBQUcsR0FBRyxzQkFBc0IsRUFBRSxDQUFDO3dCQUMvQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO3FCQUM5QjtpQkFDRjthQUNGO1lBQ0QsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDckIsTUFBTSxhQUFhLENBQUMsdUJBQXVCLENBQ3pDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUMzQixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUN2QixDQUFDO2FBQ0g7O0tBQ0Y7SUFFTSxNQUFNLENBQUMsU0FBUyxDQUNyQixNQUFvQztRQUVwQyxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwRSxDQUFDO0NBQ0Y7Ozs7Ozs7Ozs7OztBQ3hFK0U7QUFDL0I7QUFDZTtBQUVoRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7SUFDdEIsYUFBYSxDQUFDO1FBQ1osOERBQThEO1FBQzlELHNEQUFzRDtLQUN2RCxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQVMsRUFBRSxDQUFDOztJQUM5QixLQUFLLE1BQU0sUUFBUSxJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsRUFBRTtRQUMzQyxJQUFJLGNBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxLQUFLLDBDQUFFLGFBQWEsRUFBRTtZQUNsQyxNQUFNLHVDQUF1QyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3pEO0tBQ0Y7QUFDSCxDQUFDLEVBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxFQUFFLENBQUMsa0NBQWtDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLEVBQUU7SUFDMUQsT0FBTyxDQUFDLElBQUksQ0FBQztRQUNYLElBQUksRUFBRSxZQUFZLENBQUMsb0NBQW9DLENBQUM7UUFDeEQsU0FBUyxFQUFFLElBQUksRUFBRTtRQUNqQixJQUFJLEVBQUUsbUNBQW1DO1FBQ3pDLFFBQVEsRUFBRSxDQUFPLE1BQU0sRUFBRSxFQUFFLENBQUM7O1lBQzFCLE1BQU0sRUFBRSxHQUFXLE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUNuRCxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUU7Z0JBQ2QsTUFBTSxRQUFRLEdBQWEsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDbEQsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUN0QixDQUFDO2dCQUNGLElBQUksWUFBTSxRQUFTLDBDQUFFLEtBQUssMENBQUUsYUFBYSxFQUFFO29CQUN6QyxNQUFNLG9DQUFvQyxDQUN4QyxjQUFRLENBQUMsSUFBSSxtQ0FBSSxFQUFFLEVBQ25CLGtCQUFNLFFBQVMsMENBQUUsS0FBSywwQ0FBRSxTQUFTLG1DQUFJLEVBQUUsRUFDdkMsQ0FBTyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQzt3QkFDbkIsTUFBTSxRQUFRLENBQUMsTUFBTSxDQUFDOzRCQUNwQixJQUFJLEVBQUUsSUFBSTs0QkFDVixLQUFLLEVBQUU7Z0NBQ0wsU0FBUyxFQUFFLEdBQUc7NkJBQ2Y7eUJBQ0YsQ0FBQyxDQUFDO3dCQUNILE1BQU0sdUNBQXVDLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQzFELENBQUMsRUFDRixDQUFDO2lCQUNIO2FBQ0Y7UUFDSCxDQUFDO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSCxLQUFLLENBQUMsRUFBRSxDQUFDLHNCQUFzQixFQUFFLENBQUMsQ0FBQyxFQUFFLElBQVksRUFBRSxFQUFFOztJQUNuRCxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN0RCxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUU7UUFDZCxNQUFNLFFBQVEsR0FBRyxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQ2xFLElBQUksY0FBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEtBQUssMENBQUUsYUFBYSxFQUFFO1lBQ2xDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7WUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsQ0FBQztTQUNqRTtLQUNGO0FBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSCxLQUFLLENBQUMsRUFBRSxDQUFDLHFCQUFxQixFQUFFLENBQU8sS0FBb0IsRUFBRSxFQUFFLENBQUM7SUFDOUQsTUFBTSwwQ0FBMEMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMxRCxDQUFDLEVBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxFQUFFLENBQUMscUJBQXFCLEVBQUUsQ0FBTyxLQUFvQixFQUFFLEVBQUUsQ0FBQztJQUM5RCxNQUFNLDBDQUEwQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzFELENBQUMsRUFBQyxDQUFDO0FBRUgsS0FBSyxDQUFDLEVBQUUsQ0FDTix5QkFBeUIsRUFDekIsQ0FBTyxDQUFvQixFQUFFLElBQVksRUFBRSxFQUFFLENBQUM7SUFDNUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEVBQUU7UUFDOUIsNEJBQTRCLENBQzFCLElBQUksRUFDSixpQ0FBaUMsRUFDakMsQ0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ1gsTUFBTSxpQ0FBaUMsRUFBRSxDQUFDO1FBQzVDLENBQUMsRUFDRixDQUFDO0tBQ0g7SUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFOztRQUM1QyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUNsQyxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUU7WUFDZCxNQUFNLFFBQVEsR0FBRyxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ2xFLElBQUksY0FBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLEtBQUssMENBQUUsYUFBYSxFQUFFO2dCQUNsQyxJQUFJO3FCQUNELElBQUksQ0FBQyxHQUFHLENBQUM7cUJBQ1QsUUFBUSxFQUFFO3FCQUNWLEtBQUssRUFBRTtxQkFDUCxNQUFNLENBQUMsdURBQXVELENBQUMsQ0FBQztnQkFDbkUsZUFBRyxhQUFILEdBQUcsdUJBQUgsR0FBRyxDQUFFLGFBQWEsMENBQUUsU0FBUywwQ0FBRSxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFDckQsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQzthQUMvRDtpQkFBTTtnQkFDTCxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2FBQ3RDO1NBQ0Y7SUFDSCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsRUFDRixDQUFDO0FBRUYsU0FBUyw0QkFBNEIsQ0FDbkMsSUFBWSxFQUNaLEtBQWEsRUFDYixPQUFvQztJQUVwQyxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hELE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUMzQixNQUFNLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN2QyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDekMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3Njci9idWlsZHMvZ3JlZW5za2luLWZvdW5kcnl2dHQvcGxheWxpc3QtZ3JvdXAvc3JjL2NvbnN0YW50LnRzPzM4OWMiLCJ3ZWJwYWNrOi8vL3Njci9idWlsZHMvZ3JlZW5za2luLWZvdW5kcnl2dHQvcGxheWxpc3QtZ3JvdXAvc3JjL2Fic3RyYWN0LWNob29zZXIudHM/MzA4MCIsIndlYnBhY2s6Ly8vc2NyL2J1aWxkcy9ncmVlbnNraW4tZm91bmRyeXZ0dC9wbGF5bGlzdC1ncm91cC9zcmMvc2VsZWN0LW1vZGVsLnRzPzYwZTciLCJ3ZWJwYWNrOi8vL3Njci9idWlsZHMvZ3JlZW5za2luLWZvdW5kcnl2dHQvcGxheWxpc3QtZ3JvdXAvc3JjL3BsYXlsaXN0LWdyb3VwLWNob29zZXIudHM/NTJlMyIsIndlYnBhY2s6Ly8vc2NyL2J1aWxkcy9ncmVlbnNraW4tZm91bmRyeXZ0dC9wbGF5bGlzdC1ncm91cC9zcmMvcmFuZG9tLXV0aWwudHM/YjZiMCIsIndlYnBhY2s6Ly8vc2NyL2J1aWxkcy9ncmVlbnNraW4tZm91bmRyeXZ0dC9wbGF5bGlzdC1ncm91cC9zcmMvcGxheWxpc3QtZ3JvdXAudHM/ODQ2ZSIsIndlYnBhY2s6Ly8vc2NyL2J1aWxkcy9ncmVlbnNraW4tZm91bmRyeXZ0dC9wbGF5bGlzdC1ncm91cC9zcmMvbWFpbi50cz81MjBmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB1c2VyID0gKCkgPT4gKDxhbnk+Z2FtZSkudXNlcjtcbmV4cG9ydCBjb25zdCBpMThuID0gKCkgPT4gKDxhbnk+Z2FtZSkuaTE4bjtcbmV4cG9ydCBjb25zdCBpMThuTG9jYWxpemUgPSAoaWQ6IHN0cmluZykgPT4gaTE4bigpLmxvY2FsaXplKGlkKTtcbmV4cG9ydCBjb25zdCBwbGF5bGlzdHMgPSAoKSA9PiAoPGFueT5nYW1lKS5wbGF5bGlzdHM7XG5leHBvcnQgY29uc3QgaW5pdFRlbXBsYXRlcyA9IChwYXRoczogc3RyaW5nW10pID0+IGxvYWRUZW1wbGF0ZXMocGF0aHMpO1xuZXhwb3J0IGNvbnN0IGlzR00gPSAoKSA9PiB1c2VyKCk/LmlzR00gPz8gZmFsc2U7XG4iLCJkZWNsYXJlIHR5cGUgTW9kZWw8REFUQT4gPSB7XG4gIGlkOiBudW1iZXI7XG4gIGJ1dHRvbnNUZW1wbGF0ZTogKCkgPT4gc3RyaW5nO1xuICB3b3JsZEljb25UZW1wbGF0ZTogKCkgPT4gc3RyaW5nO1xuICB3b3JsZExhYmVsVGVtcGxhdGU6ICgpID0+IHN0cmluZztcbiAgYWN0aW9uczogQWN0aW9uczxEQVRBPjtcbiAgZGF0YTogREFUQTtcbn07XG5cbmRlY2xhcmUgdHlwZSBBY3Rpb25zPERBVEE+ID0ge1xuICBuYW1lOiAneWVzJyB8ICdubycgfCAncHJldmlvdXMnO1xuICBsYWJlbDogc3RyaW5nO1xuICBpY29uOiBzdHJpbmc7XG4gIHR5cGU6ICdzdWJtaXQnIHwgJ2J1dHRvbic7XG4gIGNhbGxiYWNrOiAoZGF0YT86IERBVEEpID0+IHZvaWQ7XG59W107XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdENob29zZXI8REFUQSwgTU9ERUwgPSB7fT4gZXh0ZW5kcyBGb3JtQXBwbGljYXRpb248XG4gIEZvcm1BcHBsaWNhdGlvbk9wdGlvbnMsXG4gIEZvcm1BcHBsaWNhdGlvbi5EYXRhPERBVEEsIEZvcm1BcHBsaWNhdGlvbk9wdGlvbnM+XG4+IHtcbiAgcHJvdGVjdGVkIG1vZGVsID0gdGhpcy5nZXRJbml0TW9kZWwoKTtcblxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoXG4gICAgb2JqZWN0OiBEQVRBLFxuICAgIG9wdGlvbnM6IFBhcnRpYWw8Rm9ybUFwcGxpY2F0aW9uT3B0aW9ucz4gPSB7fVxuICApIHtcbiAgICBzdXBlcihvYmplY3QsIG9wdGlvbnMpO1xuICAgIHRoaXMubW9kZWwuZGF0YSA9IHRoaXMub2JqZWN0O1xuICAgIHRoaXMubW9kZWwuaWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB0aGlzLm1vZGVsLmJ1dHRvbnNUZW1wbGF0ZSA9ICgpID0+XG4gICAgICBgbW9kdWxlcy9wbGF5bGlzdC1ncm91cC90ZW1wbGF0ZXMvY2hvb3Nlci1hY3Rpb24uaHRtbGA7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpOiBGb3JtQXBwbGljYXRpb25PcHRpb25zIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIDxGb3JtQXBwbGljYXRpb25PcHRpb25zPntcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgY2xvc2VPblN1Ym1pdDogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjbG9zZShvcHRpb25zPzogb2JqZWN0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIGF3YWl0IHN1cGVyLmNsb3NlKG9wdGlvbnMgPz8geyBzdWJtaXQ6IGZhbHNlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfb25TdWJtaXQoXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIG9wdGlvbnM/OiBGb3JtQXBwbGljYXRpb24uT25TdWJtaXRPcHRpb25zXG4gICk6IFByb21pc2U8UGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICh0aGlzLmlzVmFsaWQodGhpcy5tb2RlbC5kYXRhKSkge1xuICAgICAgYXdhaXQgc3VwZXIuX29uU3VibWl0KGV2ZW50LCBvcHRpb25zKTtcbiAgICAgIHRoaXMueWVzKHRoaXMubW9kZWwuZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9nZXRTdWJtaXREYXRhKF91cGRhdGVEYXRhPzogb2JqZWN0KTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5kYXRhO1xuICB9XG5cbiAgcHVibGljIGdldERhdGEoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5tb2RlbDtcbiAgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZUxpc3RlbmVycyhodG1sOiBKUXVlcnkpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKTtcbiAgICB0aGlzLmhhbmRsZUNsaWNrKGh0bWwsIGAjJHt0aGlzLm1vZGVsLmlkfS1ub2AsIGFzeW5jIChfZXZlbnQpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMubm8oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYW5kbGVDbGljayhcbiAgICBodG1sOiBKUXVlcnksXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcbiAgICBoYW5kbGVyOiAoZXZlbnQ6IEpRdWVyeS5DbGlja0V2ZW50KSA9PiB2b2lkXG4gICkge1xuICAgIGh0bWwuZmluZChzZWxlY3Rvcikub24oJ2NsaWNrJywgaGFuZGxlcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgaGFuZGxlQ2hhbmdlKFxuICAgIGh0bWw6IEpRdWVyeSxcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxuICAgIGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkNoYW5nZUV2ZW50KSA9PiB2b2lkXG4gICkge1xuICAgIGh0bWwuZmluZChzZWxlY3Rvcikub24oJ2NoYW5nZScsIGhhbmRsZXIpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGhhbmRsZUlucHV0KFxuICAgIGh0bWw6IEpRdWVyeSxcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxuICAgIGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50QmFzZSkgPT4gdm9pZFxuICApIHtcbiAgICBodG1sLmZpbmQoc2VsZWN0b3IpLm9uKCdpbnB1dCcsIGhhbmRsZXIpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF91cGRhdGVPYmplY3QoXG4gICAgX2V2ZW50OiBFdmVudCxcbiAgICBfZm9ybURhdGE6IG9iamVjdCB8IHVuZGVmaW5lZFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbm8oKSB7fVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBpc1ZhbGlkKGRhdGE6IERBVEEpOiBib29sZWFuO1xuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCB5ZXMoZGF0YTogREFUQSk7XG5cbiAgcHJpdmF0ZSBnZXRJbml0TW9kZWwoKTogTW9kZWw8REFUQT4gJiBNT0RFTCB7XG4gICAgcmV0dXJuIDxNb2RlbDxEQVRBPiAmIE1PREVMPntcbiAgICAgIGRhdGE6IDxEQVRBPnt9LFxuICAgICAgYWN0aW9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3llcycsXG4gICAgICAgICAgbGFiZWw6ICdQTEFZTElTVEdST1VQLmNvbW1vbi5idXR0b24uT0snLFxuICAgICAgICAgIGljb246ICdmYS1jaGVjaycsXG4gICAgICAgICAgdHlwZTogJ3N1Ym1pdCcsXG4gICAgICAgICAgY2FsbGJhY2s6IHRoaXMueWVzLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ25vJyxcbiAgICAgICAgICBsYWJlbDogJ1BMQVlMSVNUR1JPVVAuY29tbW9uLmJ1dHRvbi5DYW5jZWwnLFxuICAgICAgICAgIGljb246ICdmYS10aW1lcycsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgY2FsbGJhY2s6IHRoaXMubm8sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWxlY3RNb2RlbCB7XG4gIHB1YmxpYyBrZXk6IHN0cmluZztcbiAgcHVibGljIHZhbHVlOiBzdHJpbmc7XG4gIHB1YmxpYyBzZWxlY3RlZDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBYnN0cmFjdENob29zZXIgfSBmcm9tICcuL2Fic3RyYWN0LWNob29zZXInO1xuaW1wb3J0IHsgaTE4biwgcGxheWxpc3RzIH0gZnJvbSAnLi9jb25zdGFudCc7XG5pbXBvcnQgeyBTZWxlY3RNb2RlbCB9IGZyb20gJy4vc2VsZWN0LW1vZGVsJztcblxuY2xhc3MgTW9kZWwge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgcGxheWxpc3RJZHM6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgcGxheWxpc3RJZHM6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnBsYXlsaXN0SWRzID0gcGxheWxpc3RJZHM7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBsYXlsaXN0R3JvdXBDaG9vc2VyIGV4dGVuZHMgQWJzdHJhY3RDaG9vc2VyPFxuICBNb2RlbCxcbiAge1xuICAgIHBsYXlsaXN0czogU2VsZWN0TW9kZWxbXTtcbiAgICBzZWxlY3RlZFBsYXlsaXN0czogU2VsZWN0TW9kZWxbXTtcbiAgfVxuPiB7XG4gIHByaXZhdGUgY2FsbGJhY2s6IChuYW1lOiBzdHJpbmcsIGluaXRQbGF5bGlzdElkczogc3RyaW5nW10pID0+IHZvaWQ7XG4gIHByaXZhdGUgc2VsZWN0ZWRQbGF5bGlzdDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG9iamVjdDogTW9kZWwsXG4gICAgY2FsbGJhY2s6IChuYW1lOiBzdHJpbmcsIGluaXRQbGF5bGlzdElkczogc3RyaW5nW10pID0+IHZvaWQsXG4gICAgb3B0aW9ucz86IFBhcnRpYWw8Rm9ybUFwcGxpY2F0aW9uT3B0aW9ucz5cbiAgKSB7XG4gICAgc3VwZXIob2JqZWN0LCBvcHRpb25zKTtcbiAgICBjb25zdCBwbHMgPSBwbGF5bGlzdHMoKS5jb250ZW50cy5maWx0ZXIoKHBsKSA9PiAhcGwuZmxhZ3M/LnBsYXlsaXN0R3JvdXApO1xuICAgIHRoaXMuc2VsZWN0ZWRQbGF5bGlzdCA9IHBscy5sZW5ndGggPiAwID8gcGxzWzBdLl9pZCA6ICcnO1xuICAgIHRoaXMubW9kZWwucGxheWxpc3RzID0gcGxzLm1hcChcbiAgICAgIChwbCkgPT4gbmV3IFNlbGVjdE1vZGVsKHBsLl9pZCwgcGwubmFtZSwgdGhpcy5zZWxlY3RlZFBsYXlsaXN0ID09PSBwbC5faWQpXG4gICAgKTtcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkUGxheWxpc3RzKCk7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMoKTogRm9ybUFwcGxpY2F0aW9uT3B0aW9ucyB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ3BsYXlsaXN0LWdyb3VwLWNob29zZXInLFxuICAgICAgdGl0bGU6IGkxOG4oKS5sb2NhbGl6ZSgnUExBWUxJU1RHUk9VUC5wbGF5bGlzdHMuZ3JvdXAuZWRpdCcpLFxuICAgICAgdGVtcGxhdGU6IGBtb2R1bGVzL3BsYXlsaXN0LWdyb3VwL3RlbXBsYXRlcy9wbGF5bGlzdC1ncm91cC1jaG9vc2VyLmh0bWxgLFxuICAgICAgd2lkdGg6IDQwMCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2VsZWN0UGxheWxpc3RzKFxuICAgIGluaXROYW1lOiBzdHJpbmcsXG4gICAgaW5pdFBsYXlsaXN0SWRzOiBzdHJpbmdbXSxcbiAgICBjYWxsYmFjazogKG5hbWU6IHN0cmluZywgaW5pdFBsYXlsaXN0SWRzOiBzdHJpbmdbXSkgPT4gdm9pZFxuICApIHtcbiAgICBuZXcgUGxheWxpc3RHcm91cENob29zZXIoXG4gICAgICBuZXcgTW9kZWwoaW5pdE5hbWUsIGluaXRQbGF5bGlzdElkcyksXG4gICAgICBjYWxsYmFja1xuICAgICkucmVuZGVyKHRydWUpO1xuICB9XG5cbiAgcHVibGljIGFjdGl2YXRlTGlzdGVuZXJzKGh0bWw6IEpRdWVyeSkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpO1xuICAgIHRoaXMuaGFuZGxlQ2hhbmdlKGh0bWwsICcjbmFtZUlucHV0JywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZU5hbWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmhhbmRsZUNoYW5nZShodG1sLCAnI3NlbGVjdFBsYXlsaXN0cycsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RlZFBsYXlsaXN0ID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgIHRoaXMubW9kZWwucGxheWxpc3RzLmZvckVhY2goKHBsKSA9PiB7XG4gICAgICAgIHBsLnNlbGVjdGVkID0gcGwua2V5ID09PSB0aGlzLnNlbGVjdGVkUGxheWxpc3Q7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuaGFuZGxlQ2xpY2soaHRtbCwgJyNhZGRQbGF5bGlzdEJ1dHRvbicsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5tb2RlbC5kYXRhLnBsYXlsaXN0SWRzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRQbGF5bGlzdCkpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnBsYXlsaXN0SWRzLnB1c2godGhpcy5zZWxlY3RlZFBsYXlsaXN0KTtcbiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZFBsYXlsaXN0cygpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5oYW5kbGVDbGljayhodG1sLCAnLnJlbW92ZS1wbGF5bGlzdC1idXR0b24nLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWU7XG4gICAgICBpZiAodGhpcy5tb2RlbC5kYXRhLnBsYXlsaXN0SWRzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5kYXRhLnBsYXlsaXN0SWRzID0gdGhpcy5tb2RlbC5kYXRhLnBsYXlsaXN0SWRzLmZpbHRlcihcbiAgICAgICAgICAocGxpKSA9PiBwbGkgIT09IGtleVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkUGxheWxpc3RzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgaXNWYWxpZChkYXRhOiBNb2RlbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBkYXRhPy5uYW1lPy5sZW5ndGggPiAwO1xuICB9XG5cbiAgcHJvdGVjdGVkIHllcyhkYXRhOiBNb2RlbCkge1xuICAgIHRoaXMuY2FsbGJhY2soZGF0YT8ubmFtZSwgZGF0YT8ucGxheWxpc3RJZHMpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVOYW1lKG5hbWU6IHN0cmluZykge1xuICAgIHRoaXMubW9kZWwuZGF0YS5uYW1lID0gbmFtZTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU2VsZWN0ZWRQbGF5bGlzdHMoKSB7XG4gICAgdGhpcy5tb2RlbC5zZWxlY3RlZFBsYXlsaXN0cyA9IHRoaXMubW9kZWwucGxheWxpc3RzLmZpbHRlcigocGwpID0+XG4gICAgICB0aGlzLm1vZGVsLmRhdGEucGxheWxpc3RJZHMuaW5jbHVkZXMocGwua2V5KVxuICAgICk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBSYW5kb21VdGlsIHtcbiAgcHVibGljIHN0YXRpYyBnZXRSYW5kb21JZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiByYW5kb21JRCgxNik7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsYXlsaXN0R3JvdXBDaG9vc2VyIH0gZnJvbSAnLi9wbGF5bGlzdC1ncm91cC1jaG9vc2VyJztcbmltcG9ydCB7IHBsYXlsaXN0cyB9IGZyb20gJy4vY29uc3RhbnQnO1xuaW1wb3J0IHsgUGxheWxpc3RTb3VuZERhdGEgfSBmcm9tICdAbGVhZ3VlLW9mLWZvdW5kcnktZGV2ZWxvcGVycy9mb3VuZHJ5LXZ0dC10eXBlcy9zcmMvZm91bmRyeS9jb21tb24vZGF0YS9kYXRhLm1qcyc7XG5pbXBvcnQgeyBSYW5kb21VdGlsIH0gZnJvbSAnLi9yYW5kb20tdXRpbCc7XG5pbXBvcnQgeyBEb2N1bWVudERhdGEgfSBmcm9tICdAbGVhZ3VlLW9mLWZvdW5kcnktZGV2ZWxvcGVycy9mb3VuZHJ5LXZ0dC10eXBlcy9zcmMvZm91bmRyeS9jb21tb24vYWJzdHJhY3QvbW9kdWxlLm1qcyc7XG5cbmV4cG9ydCBjbGFzcyBQbGF5bGlzdEdyb3VwIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGVQbGF5bGlzdEdyb3VwKCkge1xuICAgIGF3YWl0IFBsYXlsaXN0R3JvdXBDaG9vc2VyLnNlbGVjdFBsYXlsaXN0cygnJywgW10sIGFzeW5jIChuYW1lLCBpZHMpID0+IHtcbiAgICAgIGNvbnN0IHBsYXlsaXN0R3JvdXA6XG4gICAgICAgIHwgU3RvcmVkRG9jdW1lbnQ8UGxheWxpc3Q+XG4gICAgICAgIHwgdW5kZWZpbmVkID0gYXdhaXQgUGxheWxpc3QuY3JlYXRlKHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICBwbGF5bGlzdEdyb3VwOiB0cnVlLFxuICAgICAgICAgIHBsYXlsaXN0czogaWRzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBsYXlsaXN0R3JvdXBTb3VuZHMocGxheWxpc3RHcm91cCA/PyA8UGxheWxpc3Q+e30pO1xuXG4gICAgICBwbGF5bGlzdEdyb3VwPy5zaGVldD8ucmVuZGVyKHRydWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVQbGF5bGlzdEdyb3VwRnJvbVNvdW5kKHNvdW5kOiBQbGF5bGlzdFNvdW5kKSB7XG4gICAgY29uc3QgcGxheWxpc3Q6IFBsYXlsaXN0IHwgbnVsbCA9IHNvdW5kLnBhcmVudDtcbiAgICBpZiAocGxheWxpc3QgIT0gbnVsbCkge1xuICAgICAgY29uc3QgcGxheWxpc3RHcm91cHMgPSBwbGF5bGlzdHMoKS5jb250ZW50cy5maWx0ZXIoXG4gICAgICAgIChwbCkgPT5cbiAgICAgICAgICBwbD8uZmxhZ3M/LnBsYXlsaXN0R3JvdXAgJiZcbiAgICAgICAgICBwbD8uZmxhZ3M/LnBsYXlsaXN0cz8uaW5jbHVkZXMoKDxhbnk+cGxheWxpc3QpLl9pZClcbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IHBsZyBvZiBwbGF5bGlzdEdyb3Vwcykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBsYXlsaXN0R3JvdXBTb3VuZHMocGxnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHVwZGF0ZVBsYXlsaXN0R3JvdXBTb3VuZHMoXG4gICAgcGxheWxpc3RHcm91cDogUGxheWxpc3QgfCBTdG9yZWREb2N1bWVudDxQbGF5bGlzdD5cbiAgKSB7XG4gICAgY29uc3QgcGxheUxpc3RJZHM6IHN0cmluZ1tdID0gKDxhbnk+cGxheWxpc3RHcm91cCk/LmZsYWdzPy5wbGF5bGlzdHMgPz8gW107XG4gICAgYXdhaXQgcGxheWxpc3RHcm91cC5kZWxldGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgIFBsYXlsaXN0U291bmQuZG9jdW1lbnROYW1lLFxuICAgICAgcGxheWxpc3RHcm91cD8uc291bmRzPy5jb250ZW50cz8ubWFwKChzKSA9PiAoPGFueT5zKT8uX2lkID8/ICcnKVxuICAgICk7XG4gICAgY29uc3Qgc291bmRzOiBQbGF5bGlzdFNvdW5kW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHBsaSBvZiBwbGF5TGlzdElkcykge1xuICAgICAgY29uc3QgcGxheWxpc3Q6IFBsYXlsaXN0ID0gcGxheWxpc3RzKCkuY29udGVudHMuZmluZChcbiAgICAgICAgKHBsKSA9PiBwbC5faWQgPT09IHBsaVxuICAgICAgKTtcbiAgICAgIGlmIChwbGF5bGlzdCAhPSBudWxsKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc291bmQgb2YgcGxheWxpc3Quc291bmRzLmNvbnRlbnRzKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkU291bmREYXRhOiBQbGF5bGlzdFNvdW5kRGF0YSAmIGFueSA9IGR1cGxpY2F0ZShzb3VuZCk7XG4gICAgICAgICAgY2xvbmVkU291bmREYXRhLl9pZCA9IFJhbmRvbVV0aWwuZ2V0UmFuZG9tSWQoKTtcbiAgICAgICAgICBzb3VuZHMucHVzaChjbG9uZWRTb3VuZERhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzb3VuZHMubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgcGxheWxpc3RHcm91cC5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgUGxheWxpc3RTb3VuZC5tZXRhZGF0YS5uYW1lLFxuICAgICAgICB0aGlzLnRvUmVjb3Jkcyhzb3VuZHMpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgdG9SZWNvcmRzPEUsIEYgZXh0ZW5kcyBvYmplY3Q+KFxuICAgIGFycmF5czogKERvY3VtZW50RGF0YTxFLCBGPiAmIGFueSlbXVxuICApOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPltdIHtcbiAgICByZXR1cm4gYXJyYXlzLm1hcCgoZCkgPT4gKGQudG9PYmplY3QgIT0gbnVsbCA/IGQudG9PYmplY3QoKSA6IGQpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgaTE4bkxvY2FsaXplLCBpbml0VGVtcGxhdGVzLCBpc0dNLCBwbGF5bGlzdHMsIHVzZXIgfSBmcm9tICcuL2NvbnN0YW50JztcbmltcG9ydCB7IFBsYXlsaXN0R3JvdXAgfSBmcm9tICcuL3BsYXlsaXN0LWdyb3VwJztcbmltcG9ydCB7IFBsYXlsaXN0R3JvdXBDaG9vc2VyIH0gZnJvbSAnLi9wbGF5bGlzdC1ncm91cC1jaG9vc2VyJztcblxuSG9va3Mub25jZSgnaW5pdCcsICgpID0+IHtcbiAgaW5pdFRlbXBsYXRlcyhbXG4gICAgJ21vZHVsZXMvcGxheWxpc3QtZ3JvdXAvdGVtcGxhdGVzL3BsYXlsaXN0LWdyb3VwLWNob29zZXIuaHRtbCcsXG4gICAgJ21vZHVsZXMvcGxheWxpc3QtZ3JvdXAvdGVtcGxhdGVzL2Nob29zZXItYWN0aW9uLmh0bWwnLFxuICBdKTtcbn0pO1xuXG5Ib29rcy5vbmNlKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgZm9yIChjb25zdCBwbGF5bGlzdCBvZiBwbGF5bGlzdHMoKS5jb250ZW50cykge1xuICAgIGlmIChwbGF5bGlzdD8uZmxhZ3M/LnBsYXlsaXN0R3JvdXApIHtcbiAgICAgIGF3YWl0IFBsYXlsaXN0R3JvdXAudXBkYXRlUGxheWxpc3RHcm91cFNvdW5kcyhwbGF5bGlzdCk7XG4gICAgfVxuICB9XG59KTtcblxuSG9va3Mub24oJ2dldFBsYXlsaXN0RGlyZWN0b3J5RW50cnlDb250ZXh0JywgKF8sIG9wdGlvbnMpID0+IHtcbiAgb3B0aW9ucy5wdXNoKHtcbiAgICBuYW1lOiBpMThuTG9jYWxpemUoJ1BMQVlMSVNUR1JPVVAucGxheWxpc3RzLmdyb3VwLmVkaXQnKSxcbiAgICBjb25kaXRpb246IGlzR00oKSxcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtZWRpdCBmYS1md1wiPjwvaT4nLFxuICAgIGNhbGxiYWNrOiBhc3luYyAodGFyZ2V0KSA9PiB7XG4gICAgICBjb25zdCBpZDogc3RyaW5nID0gdGFyZ2V0LmF0dHIoJ2RhdGEtZG9jdW1lbnQtaWQnKTtcbiAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHBsYXlsaXN0OiBQbGF5bGlzdCA9IHBsYXlsaXN0cygpLmNvbnRlbnRzLmZpbmQoXG4gICAgICAgICAgKHBsKSA9PiBwbC5faWQgPT09IGlkXG4gICAgICAgICk7XG4gICAgICAgIGlmICgoPGFueT5wbGF5bGlzdCk/LmZsYWdzPy5wbGF5bGlzdEdyb3VwKSB7XG4gICAgICAgICAgYXdhaXQgUGxheWxpc3RHcm91cENob29zZXIuc2VsZWN0UGxheWxpc3RzKFxuICAgICAgICAgICAgcGxheWxpc3QubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICg8YW55PnBsYXlsaXN0KT8uZmxhZ3M/LnBsYXlsaXN0cyA/PyBbXSxcbiAgICAgICAgICAgIGFzeW5jIChuYW1lLCBpZHMpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgcGxheWxpc3QudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgICAgICAgICBwbGF5bGlzdHM6IGlkcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYXdhaXQgUGxheWxpc3RHcm91cC51cGRhdGVQbGF5bGlzdEdyb3VwU291bmRzKHBsYXlsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG59KTtcblxuSG9va3Mub24oJ3JlbmRlclBsYXlsaXN0Q29uZmlnJywgKF8sIGh0bWw6IEpRdWVyeSkgPT4ge1xuICBjb25zdCBpZCA9IGh0bWxbMF0uaWQucmVwbGFjZSgncGxheWxpc3QtY29uZmlnLScsICcnKTtcbiAgaWYgKGlkICE9IG51bGwpIHtcbiAgICBjb25zdCBwbGF5bGlzdCA9IHBsYXlsaXN0cygpLmNvbnRlbnRzLmZpbmQoKHBsKSA9PiBwbC5faWQgPT09IGlkKTtcbiAgICBpZiAocGxheWxpc3Q/LmZsYWdzPy5wbGF5bGlzdEdyb3VwKSB7XG4gICAgICBodG1sWzBdLmNsYXNzTGlzdC5hZGQoJ3BsYXlsaXN0LWdyb3VwLWNvbmZpZycpO1xuICAgICAgaHRtbC5maW5kKCcuZm9ybS1ncm91cCcpLmxhc3QoKS5hZGRDbGFzcygncGxheWxpc3QtZ3JvdXAtaGlkZScpO1xuICAgIH1cbiAgfVxufSk7XG5cbkhvb2tzLm9uKCdjcmVhdGVQbGF5bGlzdFNvdW5kJywgYXN5bmMgKHNvdW5kOiBQbGF5bGlzdFNvdW5kKSA9PiB7XG4gIGF3YWl0IFBsYXlsaXN0R3JvdXAudXBkYXRlUGxheWxpc3RHcm91cEZyb21Tb3VuZChzb3VuZCk7XG59KTtcblxuSG9va3Mub24oJ2RlbGV0ZVBsYXlsaXN0U291bmQnLCBhc3luYyAoc291bmQ6IFBsYXlsaXN0U291bmQpID0+IHtcbiAgYXdhaXQgUGxheWxpc3RHcm91cC51cGRhdGVQbGF5bGlzdEdyb3VwRnJvbVNvdW5kKHNvdW5kKTtcbn0pO1xuXG5Ib29rcy5vbihcbiAgJ3JlbmRlclBsYXlsaXN0RGlyZWN0b3J5JyxcbiAgYXN5bmMgKF86IFBsYXlsaXN0RGlyZWN0b3J5LCBodG1sOiBKUXVlcnkpID0+IHtcbiAgICBpZiAodXNlcigpLmNhbignQUNUT1JfQ1JFQVRFJykpIHtcbiAgICAgIGFkZFBsYXlsaXN0R3JvdXBBY3Rpb25CdXR0b24oXG4gICAgICAgIGh0bWwsXG4gICAgICAgICdQTEFZTElTVEdST1VQLmNvbW1vbi5hZGQuYnV0dG9uJyxcbiAgICAgICAgYXN5bmMgKF8pID0+IHtcbiAgICAgICAgICBhd2FpdCBQbGF5bGlzdEdyb3VwLmNyZWF0ZVBsYXlsaXN0R3JvdXAoKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBodG1sLmZpbmQoJy5wbGF5bGlzdC1oZWFkZXInKS5lYWNoKChfLCBlbG0pID0+IHtcbiAgICAgIGNvbnN0IGlkID0gZWxtLmRhdGFzZXQuZG9jdW1lbnRJZDtcbiAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gcGxheWxpc3RzKCkuY29udGVudHMuZmluZCgocGwpID0+IHBsLl9pZCA9PT0gaWQpO1xuICAgICAgICBpZiAocGxheWxpc3Q/LmZsYWdzPy5wbGF5bGlzdEdyb3VwKSB7XG4gICAgICAgICAgaHRtbFxuICAgICAgICAgICAgLmZpbmQoZWxtKVxuICAgICAgICAgICAgLmNoaWxkcmVuKClcbiAgICAgICAgICAgIC5maXJzdCgpXG4gICAgICAgICAgICAuYmVmb3JlKCc8aSBjbGFzcz1cImZhcyBmYS1maWxlLWF1ZGlvIHBsYXlsaXN0LWdyb3VwLWljb25cIj48L2k+Jyk7XG4gICAgICAgICAgZWxtPy5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3Q/LmFkZCgncGxheWxpc3QtZ3JvdXAnKTtcbiAgICAgICAgICBodG1sLmZpbmQoZWxtKS5maW5kKCdhW2RhdGEtYWN0aW9uPVwic291bmQtY3JlYXRlXCJdJykucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxtLmNsYXNzTGlzdC5hZGQoJ3BsYXlsaXN0LWxlZ2FjeScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbik7XG5cbmZ1bmN0aW9uIGFkZFBsYXlsaXN0R3JvdXBBY3Rpb25CdXR0b24oXG4gIGh0bWw6IEpRdWVyeSxcbiAgbGFiZWw6IHN0cmluZyxcbiAgb25DbGljazogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkXG4pIHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGJ1dHRvbi5zdHlsZS53aWR0aCA9ICc5NSUnO1xuICBidXR0b24uaW5uZXJIVE1MID0gaTE4bkxvY2FsaXplKGxhYmVsKTtcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgb25DbGljayhldmVudCk7XG4gIH0pO1xuICBodG1sLmZpbmQoJy5oZWFkZXItYWN0aW9ucycpLmFmdGVyKGJ1dHRvbik7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///555\n")}},__webpack_exports__={};__webpack_modules__[555]()})();