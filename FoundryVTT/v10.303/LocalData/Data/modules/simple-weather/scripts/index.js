const te="simple-weather",ae="Simple Weather",ie="Add dynamic weather to your FoundryVTT world.  Note: not affiliated with creators of Simple Calendar.",se={minimum:"10",verified:"12.320"},ne=["scripts/index.js"],re=["styles/simple-weather.css"],le=[],oe=[{lang:"en",name:"English",path:"lang/en.json"},{lang:"de",name:"Deutsch",path:"lang/de.json"},{lang:"sv",name:"Svenska",path:"lang/sv.json"},{lang:"fr",name:"Fran\xE7ais",path:"lang/fr.json"},{lang:"hi",name:"Hindi",path:"lang/hi.json"}],de=[{name:"Dov Rosenberg","#discord":"","#email":"","#url":""}],fe="https://github.com/dovrosenberg/foundry-simple-weather",ce="https://github.com/dovrosenberg/foundry-simple-weather/releases/latest/download/module.json",ue="https://github.com/dovrosenberg/foundry-simple-weather/releases/download/v1.13.0/module.zip",he="https://github.com/dovrosenberg/foundry-simple-weather/blob/master/LICENSE.md",pe="https://github.com/dovrosenberg/foundry-simple-weather/blob/master/README.md",me="https://github.com/dovrosenberg/foundry-simple-weather/issues",ge="https://github.com/dovrosenberg/foundry-simple-weather/blob/master/CHANGELOG.md";var v={id:te,title:ae,description:ie,compatibility:se,esmodules:ne,styles:re,packs:le,languages:oe,authors:de,url:fe,manifest:ce,download:ue,"## version":"will be added when we build",license:he,readme:pe,bugs:me,changelog:ge};const M=function(){if(!(game instanceof Game))throw new Error("Game is not initialized yet!");return game},_=()=>{var r,i;return((i=(r=M())==null?void 0:r.user)==null?void 0:i.isGM)||!1},g=r=>M().i18n.localize(r),ye="simple-weather | ";function x(r,...i){var l,o;try{const d=((o=(l=M().modules.get("_dev-mode"))==null?void 0:l.api)==null?void 0:o.getPackageDebugValue("simple-weather"))||!1;(r||d)&&console.log(ye,...i)}catch(d){console.log("ERROR IN LOG FUNCTION:"+d)}}var w=(r=>(r[r.Spring=0]="Spring",r[r.Summer=1]="Summer",r[r.Fall=2]="Fall",r[r.Winter=3]="Winter",r))(w||{}),t=(r=>(r[r.Barren=0]="Barren",r[r.Modest=1]="Modest",r[r.Verdant=2]="Verdant",r))(t||{}),a=(r=>(r[r.Cold=0]="Cold",r[r.Temperate=1]="Temperate",r[r.Hot=2]="Hot",r))(a||{});let Q,J,Y,N;function we(){x(!1,"Loading localized climate text"),Q=[{value:"",text:g("sweath.options.biome.useClimateHumidity")},{value:"tundra",text:g("sweath.options.biome.tundra")},{value:"alpine",text:g("sweath.options.biome.alpine")},{value:"taiga",text:g("sweath.options.biome.taiga")},{value:"chapparel",text:g("sweath.options.biome.chapparel")},{value:"grassland",text:g("sweath.options.biome.grassland")},{value:"forest",text:g("sweath.options.biome.forest")},{value:"desert",text:g("sweath.options.biome.desert")},{value:"savannah",text:g("sweath.options.biome.savannah")},{value:"rainforest",text:g("sweath.options.biome.rainforest")}],J=[{value:String(0),text:g("sweath.options.climate.cold")},{value:String(1),text:g("sweath.options.climate.temperate")},{value:String(2),text:g("sweath.options.climate.hot")}],Y=[{value:String(0),text:g("sweath.options.humidity.barren")},{value:String(1),text:g("sweath.options.humidity.modest")},{value:String(2),text:g("sweath.options.humidity.verdant")}],N=[{value:String(0),text:g("sweath.options.season.spring")},{value:String(1),text:g("sweath.options.season.summer")},{value:String(2),text:g("sweath.options.season.fall")},{value:String(3),text:g("sweath.options.season.winter")}]}const xe=function(){N.splice(0,0,{value:"sync",text:g("sweath.options.season.sync")})},_e={tundra:{climate:0,humidity:0},alpine:{climate:0,humidity:1},taiga:{climate:0,humidity:2},chapparel:{climate:1,humidity:0},grassland:{climate:1,humidity:1},forest:{climate:1,humidity:2},desert:{climate:2,humidity:0},savannah:{climate:2,humidity:1},rainforest:{climate:2,humidity:2}};var A=(r=>(r[r.Filter=0]="Filter",r[r.Particle=1]="Particle",r))(A||{});const e={LightClouds:{core:null,fxMaster:[{style:1,type:"clouds",options:{scale:1,direction:{start:-30,end:30},speed:.4,lifetime:2,density:.03,alpha:.7,tint:{value:"#000000",apply:!1}}}]},ModerateClouds:{core:null,fxMaster:[{style:1,type:"clouds",options:{scale:1,direction:{start:-30,end:30},speed:.2,lifetime:2.6,density:.1,alpha:.7,tint:{value:"#ffffff",apply:!0}}}]},HeavyClouds:{core:null,fxMaster:[{style:1,type:"clouds",options:{scale:1,direction:{start:-30,end:30},speed:.1,lifetime:2.6,density:.3,alpha:.5,tint:{value:"#ffffff",apply:!0}}}]},StormClouds:{core:null,fxMaster:[{style:1,type:"clouds",options:{scale:1,direction:{start:-30,end:30},speed:.1,lifetime:2.6,density:.6,alpha:1,tint:{value:"#776e6e",apply:!0}}}]},Overcast:{core:null,fxMaster:[{style:1,type:"fog",options:{scale:1,speed:.3,lifetime:1,density:.08,alpha:1,tint:{value:"#c2bdbd",apply:!0}}}]},BlusterWind:{core:null,fxMaster:[{style:1,type:"leaves",options:{scale:.7,speed:2.8,lifetime:1,density:.1,alpha:.8,tint:{value:"#4F4040",apply:!0}}}]},BlusterSnow:{core:{effect:"snow"},fxMaster:[{style:1,type:"snow",options:{scale:1,direction:{start:-30,end:30},speed:2.8,lifetime:1,density:.1,alpha:1,tint:{value:"#ffffff",apply:!1}}},{style:1,type:"snow",options:{scale:1,direction:{start:60,end:120},speed:2.8,lifetime:1,density:.1,alpha:1,tint:{value:"#ffffff",apply:!1}}},{style:1,type:"snow",options:{scale:1,direction:{start:150,end:210},speed:2.8,lifetime:1,density:.1,alpha:1,tint:{value:"#ffffff",apply:!1}}},{style:1,type:"snow",options:{scale:1,direction:{start:240,end:300},speed:2.8,lifetime:1,density:.1,alpha:1,tint:{value:"#ffffff",apply:!1}}}]},LightWind:{core:null,fxMaster:[{style:1,type:"snow",options:{scale:.6,direction:{start:-15,end:15},speed:1,lifetime:1,density:.1,alpha:1,tint:{value:"#1d1d1b",apply:!0}}}]},ModerateWind:{core:null,fxMaster:[{style:1,type:"snow",options:{scale:.6,direction:{start:-15,end:15},speed:2,lifetime:1,density:.1,alpha:1,tint:{value:"#1d1d1b",apply:!0}}}]},HeavyWind:{core:null,fxMaster:[{style:1,type:"snow",options:{scale:.6,direction:{start:-15,end:15},speed:3,lifetime:1,density:.2,alpha:1,tint:{value:"#1d1d1b",apply:!0}}}]},BlusterRain:{core:{effect:"rain"},fxMaster:[{style:1,type:"rain",options:{scale:.4,direction:{start:-30,end:30},speed:.1,lifetime:.8,density:.1,alpha:.7,tint:{value:"#000000",apply:!1}}},{style:1,type:"rain",options:{scale:.4,direction:{start:60,end:120},speed:.1,lifetime:.8,density:.1,alpha:.7,tint:{value:"#000000",apply:!1}}},{style:1,type:"rain",options:{scale:.4,direction:{start:150,end:210},speed:.1,lifetime:.8,density:.1,alpha:.7,tint:{value:"#000000",apply:!1}}},{style:1,type:"rain",options:{scale:.4,direction:{start:240,end:300},speed:.1,lifetime:.8,density:.1,alpha:.7,tint:{value:"#000000",apply:!1}}}]},LightRain:{core:{effect:"rain"},fxMaster:[{style:1,type:"rain",options:{scale:1,direction:{start:60,end:120},speed:.1,lifetime:.8,density:.1,alpha:.7,tint:{value:"#ffffff",apply:!1}}}]},ModerateRain:{core:{effect:"rainStorm"},fxMaster:[{style:1,type:"rain",options:{scale:1,direction:{start:60,end:120},speed:.5,lifetime:.8,density:1,alpha:.7,tint:{value:"#ffffff",apply:!1}}}]},HeavyRain:{core:{effect:"rainStorm"},fxMaster:[{style:1,type:"rain",options:{scale:1.3,direction:{start:60,end:120},speed:.5,lifetime:.8,density:1.7,alpha:.7,tint:{value:"#ffffff",apply:!1}}}]},LightFog:{core:{effect:"fog"},fxMaster:[{style:1,type:"fog",options:{scale:1,speed:.5,lifetime:1,density:.05,alpha:.4,tint:{value:"#ffffff",apply:!1}}}]},ModerateFog:{core:{effect:"fog"},fxMaster:[{style:1,type:"fog",options:{scale:1,speed:.5,lifetime:1,density:.08,alpha:.4,tint:{value:"#ffffff",apply:!1}}}]},HeavyFog:{core:{effect:"fog"},fxMaster:[{style:1,type:"fog",options:{scale:1,speed:.5,lifetime:1,density:.12,alpha:.4,tint:{value:"#ffffff",apply:!1}}}]},RollingFog:{core:{effect:"fog"},fxMaster:[{style:1,type:"fog",options:{scale:1,speed:3.5,lifetime:1,density:.08,alpha:.4,tint:{value:"#ffffff",apply:!1}}}]},Lightning:{core:null,fxMaster:[{style:0,type:"lightning",options:{frequency:500,spark_duration:300,brightness:1.3}}]},Wildfire:{core:null,fxMaster:[{style:0,type:"lightning",options:{frequency:100,spark_duration:2e3,brightness:1.1}},{style:1,type:"embers",options:{scale:1.3,speed:1,lifetime:1,density:.9,alpha:1,tint:{value:"#ffffff",apply:!1}}}]},LightSnow:{core:{effect:"snow"},fxMaster:[{style:1,type:"snow",options:{scale:1,direction:{start:60,end:120},speed:1,lifetime:1,density:.1,alpha:1,tint:{value:"#ffffff",apply:!1}}}]},ModerateSnow:{core:{effect:"snow"},fxMaster:[{style:1,type:"snowstorm",options:{scale:1,direction:{start:60,end:120},speed:1,lifetime:1,density:.9,alpha:1,tint:{value:"#ffffff",apply:!1}}}]},HeavySnow:{core:{effect:"blizzard"},fxMaster:[{style:1,type:"snowstorm",options:{scale:1,direction:{start:60,end:90},speed:1.9,lifetime:1,density:.9,alpha:1,tint:{value:"#ffffff",apply:!1}}},{style:1,type:"snowstorm",options:{scale:1,direction:{start:90,end:120},speed:1.5,lifetime:1,density:.9,alpha:1,tint:{value:"#ffffff",apply:!1}}}]},WhiteoutSnow:{core:{effect:"blizzard"},fxMaster:[{style:1,type:"snowstorm",options:{scale:1,direction:{start:60,end:90},speed:1.9,lifetime:1,density:.9,alpha:1,tint:{value:"#ffffff",apply:!1}}},{style:1,type:"snowstorm",options:{scale:1,direction:{start:90,end:120},speed:1.5,lifetime:1,density:.9,alpha:1,tint:{value:"#ffffff",apply:!1}}},{style:1,type:"fog",options:{scale:1,speed:1,lifetime:1,density:.15,alpha:.9,tint:{value:"#ffffff",apply:!1}}}]},Hail:{core:{effect:"rainStorm"},fxMaster:[{style:1,type:"rainsimple",options:{scale:4,direction:{start:60,end:120},speed:.2,lifetime:.2,density:.05,alpha:1,tint:{value:"#ffffff",apply:!1}}}]},Sleet:{core:{effect:"rainStorm"},fxMaster:[{style:1,type:"rain",options:{scale:1,direction:{start:60,end:90},speed:.5,lifetime:.8,density:1,alpha:.7,tint:{value:"#ffffff",apply:!1}}},{style:1,type:"snowstorm",options:{scale:1,direction:{start:60,end:90},speed:1,lifetime:1,density:.9,alpha:1,tint:{value:"#ffffff",apply:!1}}}]},DustStorm:{core:{effect:""},fxMaster:[{style:1,type:"snowstorm",options:{scale:.5,direction:{start:-30,end:30},speed:1.9,lifetime:1,density:.9,alpha:1,tint:{value:"#8f8c61",apply:!0}}},{style:1,type:"snowstorm",options:{scale:.5,direction:{start:150,end:210},speed:1.5,lifetime:1,density:.9,alpha:1,tint:{value:"#8f8c61",apply:!0}}},{style:1,type:"fog",options:{scale:1,speed:1,lifetime:1,density:.15,alpha:.9,tint:{value:"#8f8c61",apply:!0}}}]}},c=function(r,i){var o,d;const l=foundry.utils.deepClone({...r});return l.core||(l.core={effect:""}),l.fxMaster||(l.fxMaster=[]),l.core.effect=((o=l.core)==null?void 0:o.effect)||((d=i.core)==null?void 0:d.effect)||"",l.fxMaster=l.fxMaster.concat(i.fxMaster||[]),l};let Z;function Ce(){x(!1,"Loading localized weather text");const r={[a.Cold]:"cold",[a.Temperate]:"temperate",[a.Hot]:"hot"},i={[t.Barren]:"barren",[t.Modest]:"modest",[t.Verdant]:"verdant"},l=Object.values(a),o=Object.values(t);for(let d=l.length/2;d<l.length;d++){const f=l[d];for(let u=o.length/2;u<o.length;u++){const m=o[u];for(let C=0;C<37;C++)W[f][m][C]=g(`sweath.description.${r[f]}.${i[m]}.${ve[C]}`)}}Z=K.map((d,f)=>({value:f.toString(),text:W[d==null?void 0:d.climate][d==null?void 0:d.humidity][d==null?void 0:d.hexCell]}))}var I=(r=>(r[r.stay=-1]="stay",r[r.N=0]="N",r[r.NE=1]="NE",r[r.SE=2]="SE",r[r.S=3]="S",r[r.SW=4]="SW",r[r.NW=5]="NW",r))(I||{});const T=[];T[w.Fall]={[-1]:.2,[0]:.066,[1]:.022,[2]:.111,[3]:.2,[4]:.246,[5]:.155};T[w.Winter]={[-1]:.2,[0]:.022,[1]:.066,[2]:.155,[3]:.246,[4]:.2,[5]:.111};T[w.Spring]={[-1]:.2,[0]:.2,[1]:.246,[2]:.155,[3]:.066,[4]:.022,[5]:.111};T[w.Summer]={[-1]:.2,[0]:.246,[1]:.2,[2]:.111,[3]:.022,[4]:.066,[5]:.155};const Me=r=>{const i=Math.random();for(let l=-1,o=0;l<=5;l++)if(o+=T[r][l],i<=o)return l;return T[r][5]},L=[[],[],[],[]];L[w.Summer]=[9,10,11,12,13,14];L[w.Fall]=[15,16,17,18,19,20,21];L[w.Winter]=[22,23,24,25,26,27];L[w.Spring]=[15,16,17,18,19,20,21];const O=[[],[],[],[]];O[w.Summer]=[[0,1,5,4,3,18],[1,2,6,5,0,1],[2,3,7,6,1,2],[3,0,3,7,2,3],[0,5,10,9,4,4],[1,6,11,10,4,0],[2,7,12,11,5,1],[3,7,13,7,6,2],[19,8,14,13,8,8],[4,10,10,9,14,9],[5,11,11,11,9,4],[6,12,12,11,10,5],[12,13,13,12,11,6],[8,14,14,8,12,7],[14,9,9,14,13,8],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1]];O[w.Fall]=[[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[9,10,16,15,14,9],[10,11,17,16,9,10],[11,12,18,17,10,11],[12,13,19,18,11,12],[13,14,20,19,12,13],[14,9,21,20,13,14],[9,16,22,15,21,15],[10,17,23,22,15,9],[11,18,24,23,16,10],[12,19,25,24,17,11],[13,20,26,25,18,12],[14,21,27,26,19,13],[21,15,21,27,20,14],[16,23,22,22,27,15],[17,24,23,23,22,16],[18,25,24,24,23,17],[19,26,25,25,24,18],[20,27,26,26,25,19],[21,22,27,27,26,20],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1]];O[w.Winter]=[[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[22,23,28,22,27,22],[28,24,29,28,22,23],[24,25,30,24,23,23],[30,26,31,30,24,36],[26,27,32,31,25,26],[27,22,27,27,26,27],[23,29,33,17,28,22],[29,30,34,33,28,23],[25,31,35,34,29,24],[26,32,36,35,30,25],[32,32,32,36,31,26],[29,34,33,33,36,28],[30,35,34,34,33,29],[31,32,36,35,35,30],[32,33,18,36,35,31]];O[w.Spring]=O[w.Fall];const W=new Array(Object.keys(a).length/2).fill("").map(()=>new Array(Object.keys(t).length/2).fill("").map(()=>new Array(37).fill(""))),S=new Array(Object.keys(a).length/2).fill(0).map(()=>new Array(Object.keys(t).length/2).fill(0).map(()=>new Array(37).fill(0))),n=new Array(Object.keys(a).length/2).fill({}).map(()=>new Array(Object.keys(t).length/2).fill({}).map(()=>new Array(37).fill({}))),ve=["summer.1","summer.2","summer.3","summer.5","summer.4","summer.6","summer.7","summer.8","summer.9","springfall.warm.1","springfall.warm.2","springfall.warm.3","springfall.warm.4","springfall.warm.5","springfall.warm.6","springfall.1","springfall.2","springfall.3","springfall.4","springfall.5","springfall.6","springfall.7","springfall.cool.1","springfall.cool.2","springfall.cool.3","springfall.cool.4","springfall.cool.5","springfall.cool.6","winter.1","winter.2","winter.3","winter.4","winter.5","winter.6","winter.7","winter.8","winter.9"],s={summer1:0,summer2:1,summer3:2,summer4:3,summer5:4,summer6:5,summer7:6,summer8:7,summer9:8,springfall_warm1:9,springfall_warm2:10,springfall_warm3:11,springfall_warm4:12,springfall_warm5:13,springfall_warm6:14,springfall1:15,springfall2:16,springfall3:17,springfall4:18,springfall5:19,springfall6:20,springfall7:21,springfall_cool1:22,springfall_cool2:23,springfall_cool3:24,springfall_cool4:25,springfall_cool5:26,springfall_cool6:27,winter1:28,winter2:29,winter3:30,winter4:31,winter5:32,winter6:33,winter7:34,winter8:35,winter9:36},K=[{climate:a.Cold,humidity:t.Barren,hexCell:s.springfall_cool1},{climate:a.Cold,humidity:t.Modest,hexCell:s.summer4},{climate:a.Cold,humidity:t.Modest,hexCell:s.winter6},{climate:a.Cold,humidity:t.Modest,hexCell:s.springfall_warm5},,{climate:a.Cold,humidity:t.Barren,hexCell:s.summer7},{climate:a.Cold,humidity:t.Verdant,hexCell:s.summer6},{climate:a.Cold,humidity:t.Modest,hexCell:s.summer7},{climate:a.Temperate,humidity:t.Barren,hexCell:s.springfall_cool2},{climate:a.Cold,humidity:t.Modest,hexCell:s.springfall3},{climate:a.Cold,humidity:t.Modest,hexCell:s.springfall_cool2},{climate:a.Cold,humidity:t.Barren,hexCell:s.winter5},{climate:a.Temperate,humidity:t.Verdant,hexCell:s.winter9},{climate:a.Cold,humidity:t.Modest,hexCell:s.winter3},{climate:a.Cold,humidity:t.Modest,hexCell:s.springfall_warm6}];S[a.Cold][t.Barren]=[44,51,60,47,42,46,49,75,36,30,32,28,40,49,32,23,18,14,32,36,51,36,11,9,19,30,23,32,-3,-53,-15,18,-38,-24,-35,-9,4];S[a.Cold][t.Modest]=[44,51,60,47,42,46,49,80,36,30,32,28,40,49,32,23,18,14,32,36,51,36,11,9,19,30,23,32,-3,-53,-15,18,-38,-24,-35,-9,4];S[a.Cold][t.Verdant]=[44,51,60,47,42,46,49,75,36,30,32,28,40,49,32,23,18,14,32,36,51,36,11,9,19,30,23,32,-3,-53,-15,18,-38,-24,-35,-9,4];S[a.Temperate][t.Barren]=[79,83,87,73,78,90,81,100,75,72,73,71,77,81,73,68,66,64,73,75,83,75,63,61,66,72,68,73,55,30,49,66,38,44,39,52,59];S[a.Temperate][t.Modest]=[70,77,86,73,68,72,83,110,63,67,59,55,66,75,59,50,45,41,59,63,77,63,39,37,46,57,50,59,25,-23,14,45,-8,5,-6,19,32];S[a.Temperate][t.Verdant]=[70,77,86,73,68,72,83,110,63,67,59,55,66,75,59,36,32,38,59,63,77,63,28,26,46,52,50,59,16,-23,14,45,-10,0,-6,19,22];S[a.Hot][t.Barren]=[93,96,100,94,92,94,95,110,90,87,88,86,91,95,88,84,82,80,88,90,96,90,79,78,82,87,84,88,73,51,67,82,58,66,59,70,76];S[a.Hot][t.Modest]=[79,80,82,79,79,79,80,86,78,77,77,76,78,80,77,75,74,73,77,78,80,78,73,73,74,76,75,77,71,61,68,74,64,63,65,69,72];S[a.Hot][t.Verdant]=[85,86,87,85,84,85,85,91,84,83,83,82,84,85,83,82,81,80,83,84,86,83,80,80,81,83,82,83,78,70,76,81,73,75,73,77,79];n[a.Cold][t.Barren][s.summer1]={fx:e.LightWind};n[a.Cold][t.Barren][s.summer2]={fx:c(e.Overcast,e.BlusterWind)};n[a.Cold][t.Barren][s.summer4]={fx:e.LightClouds};n[a.Cold][t.Barren][s.summer5]={fx:c(e.LightClouds,e.LightWind)};n[a.Cold][t.Barren][s.summer6]={fx:e.ModerateClouds};n[a.Cold][t.Barren][s.summer7]={fx:e.LightRain};n[a.Cold][t.Barren][s.summer9]={fx:e.HeavySnow};n[a.Cold][t.Barren][s.springfall_warm1]={fx:e.LightWind};n[a.Cold][t.Barren][s.springfall_warm3]={fx:e.LightClouds};n[a.Cold][t.Barren][s.springfall_warm5]={fx:e.StormClouds};n[a.Cold][t.Barren][s.springfall_warm6]={fx:c(e.Hail,e.StormClouds)};n[a.Cold][t.Barren][s.springfall1]={fx:e.ModerateWind};n[a.Cold][t.Barren][s.springfall2]={fx:e.Overcast};n[a.Cold][t.Barren][s.springfall3]={fx:c(e.LightFog,e.BlusterRain)};n[a.Cold][t.Barren][s.springfall5]={fx:e.LightRain};n[a.Cold][t.Barren][s.springfall6]={fx:e.ModerateClouds};n[a.Cold][t.Barren][s.springfall7]={fx:c(e.StormClouds,e.Lightning)};n[a.Cold][t.Barren][s.springfall_cool2]={fx:e.LightFog};n[a.Cold][t.Barren][s.springfall_cool4]={fx:e.StormClouds};n[a.Cold][t.Barren][s.springfall_cool5]={fx:e.HeavyWind};n[a.Cold][t.Barren][s.springfall_cool6]={fx:e.HeavyWind};n[a.Cold][t.Barren][s.winter3]={fx:e.WhiteoutSnow};n[a.Cold][t.Barren][s.winter4]={fx:e.BlusterSnow};n[a.Cold][t.Barren][s.winter5]={fx:e.LightSnow};n[a.Cold][t.Barren][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Cold][t.Barren][s.winter7]={fx:e.ModerateClouds};n[a.Cold][t.Barren][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Cold][t.Barren][s.winter9]={fx:e.BlusterSnow};n[a.Cold][t.Modest][s.summer1]={fx:e.LightWind};n[a.Cold][t.Modest][s.summer2]={fx:c(e.Overcast,e.BlusterWind)};n[a.Cold][t.Modest][s.summer4]={fx:e.LightClouds};n[a.Cold][t.Modest][s.summer5]={fx:c(e.LightClouds,e.LightWind)};n[a.Cold][t.Modest][s.summer6]={fx:e.LightRain};n[a.Cold][t.Modest][s.summer7]={fx:e.HeavyRain};n[a.Cold][t.Modest][s.summer9]={fx:e.HeavySnow};n[a.Cold][t.Modest][s.springfall_warm1]={fx:e.LightWind};n[a.Cold][t.Modest][s.springfall_warm3]={fx:e.LightClouds};n[a.Cold][t.Modest][s.springfall_warm5]={fx:e.StormClouds};n[a.Cold][t.Modest][s.springfall_warm6]={fx:c(e.Hail,e.StormClouds)};n[a.Cold][t.Modest][s.springfall1]={fx:e.ModerateWind};n[a.Cold][t.Modest][s.springfall2]={fx:e.Overcast};n[a.Cold][t.Modest][s.springfall3]={fx:e.RollingFog};n[a.Cold][t.Modest][s.springfall5]={fx:e.LightRain};n[a.Cold][t.Modest][s.springfall6]={fx:e.ModerateClouds};n[a.Cold][t.Modest][s.springfall7]={fx:c(e.StormClouds,e.Lightning)};n[a.Cold][t.Modest][s.springfall_cool1]={fx:e.ModerateClouds};n[a.Cold][t.Modest][s.springfall_cool2]={fx:e.HeavyFog};n[a.Cold][t.Modest][s.springfall_cool4]={fx:e.StormClouds};n[a.Cold][t.Modest][s.springfall_cool5]={fx:e.HeavyWind};n[a.Cold][t.Modest][s.springfall_cool6]={fx:e.HeavyWind};n[a.Cold][t.Modest][s.winter3]={fx:e.HeavySnow};n[a.Cold][t.Modest][s.winter4]={fx:e.Sleet};n[a.Cold][t.Modest][s.winter5]={fx:e.HeavySnow};n[a.Cold][t.Modest][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Cold][t.Modest][s.winter7]={fx:e.HeavySnow};n[a.Cold][t.Modest][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Cold][t.Modest][s.winter9]={fx:e.BlusterSnow};n[a.Cold][t.Verdant][s.summer1]={fx:e.LightWind};n[a.Cold][t.Verdant][s.summer2]={fx:c(e.Overcast,e.BlusterWind)};n[a.Cold][t.Verdant][s.summer3]={fx:c(e.LightClouds,e.LightRain)};n[a.Cold][t.Verdant][s.summer4]={fx:e.LightClouds};n[a.Cold][t.Verdant][s.summer5]={fx:e.LightRain};n[a.Cold][t.Verdant][s.summer6]={fx:e.ModerateRain};n[a.Cold][t.Verdant][s.summer7]={fx:e.HeavyRain};n[a.Cold][t.Verdant][s.summer9]={fx:e.HeavySnow};n[a.Cold][t.Verdant][s.springfall_warm1]={fx:e.LightWind};n[a.Cold][t.Verdant][s.springfall_warm2]={fx:e.LightRain};n[a.Cold][t.Verdant][s.springfall_warm3]={fx:e.LightClouds};n[a.Cold][t.Verdant][s.springfall_warm5]={fx:e.ModerateRain};n[a.Cold][t.Verdant][s.springfall_warm6]={fx:c(e.Hail,e.StormClouds)};n[a.Cold][t.Verdant][s.springfall1]={fx:e.ModerateWind};n[a.Cold][t.Verdant][s.springfall2]={fx:e.Overcast};n[a.Cold][t.Verdant][s.springfall3]={fx:e.RollingFog};n[a.Cold][t.Verdant][s.springfall5]={fx:e.LightRain};n[a.Cold][t.Verdant][s.springfall6]={fx:e.ModerateRain};n[a.Cold][t.Verdant][s.springfall7]={fx:c(e.BlusterRain,c(e.StormClouds,e.Lightning))};n[a.Cold][t.Verdant][s.springfall_cool1]={fx:e.ModerateClouds};n[a.Cold][t.Verdant][s.springfall_cool2]={fx:e.HeavyFog};n[a.Cold][t.Verdant][s.springfall_cool4]={fx:e.StormClouds};n[a.Cold][t.Verdant][s.springfall_cool5]={fx:e.HeavyWind};n[a.Cold][t.Verdant][s.springfall_cool6]={fx:e.HeavyWind};n[a.Cold][t.Verdant][s.winter3]={fx:e.HeavySnow};n[a.Cold][t.Verdant][s.winter4]={fx:e.Sleet};n[a.Cold][t.Verdant][s.winter5]={fx:e.HeavySnow};n[a.Cold][t.Verdant][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Cold][t.Verdant][s.winter7]={fx:e.HeavySnow};n[a.Cold][t.Verdant][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Cold][t.Verdant][s.winter9]={fx:e.ModerateSnow};n[a.Temperate][t.Barren][s.summer1]={fx:e.LightWind};n[a.Temperate][t.Barren][s.summer2]={fx:c(e.Overcast,e.BlusterWind)};n[a.Temperate][t.Barren][s.summer4]={fx:e.LightClouds};n[a.Temperate][t.Barren][s.summer5]={fx:c(e.LightClouds,e.LightWind)};n[a.Temperate][t.Barren][s.summer6]={fx:e.ModerateClouds};n[a.Temperate][t.Barren][s.summer7]={fx:e.LightRain};n[a.Temperate][t.Barren][s.summer9]={fx:e.Wildfire};n[a.Temperate][t.Barren][s.springfall_warm1]={fx:e.LightWind};n[a.Temperate][t.Barren][s.springfall_warm3]={fx:e.LightClouds};n[a.Temperate][t.Barren][s.springfall_warm5]={fx:e.StormClouds};n[a.Temperate][t.Barren][s.springfall_warm6]={fx:c(e.HeavyRain,e.Overcast)};n[a.Temperate][t.Barren][s.springfall1]={fx:e.ModerateWind};n[a.Temperate][t.Barren][s.springfall2]={fx:e.Overcast};n[a.Temperate][t.Barren][s.springfall3]={fx:c(e.LightFog,e.BlusterRain)};n[a.Temperate][t.Barren][s.springfall5]={fx:e.LightRain};n[a.Temperate][t.Barren][s.springfall6]={fx:e.ModerateClouds};n[a.Temperate][t.Barren][s.springfall7]={fx:c(e.StormClouds,e.Lightning)};n[a.Temperate][t.Barren][s.springfall_cool2]={fx:e.LightFog};n[a.Temperate][t.Barren][s.springfall_cool4]={fx:e.StormClouds};n[a.Temperate][t.Barren][s.springfall_cool5]={fx:e.HeavyWind};n[a.Temperate][t.Barren][s.springfall_cool6]={fx:e.HeavyWind};n[a.Temperate][t.Barren][s.winter2]={fx:e.ModerateSnow};n[a.Temperate][t.Barren][s.winter4]={fx:c(e.LightRain,e.ModerateWind)};n[a.Temperate][t.Barren][s.winter5]={fx:e.LightSnow};n[a.Temperate][t.Barren][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Temperate][t.Barren][s.winter7]={fx:e.ModerateClouds};n[a.Temperate][t.Barren][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Temperate][t.Barren][s.winter9]={fx:e.BlusterSnow};n[a.Temperate][t.Modest][s.summer1]={fx:e.LightWind};n[a.Temperate][t.Modest][s.summer2]={fx:c(e.Overcast,e.BlusterWind)};n[a.Temperate][t.Modest][s.summer4]={fx:e.LightClouds};n[a.Temperate][t.Modest][s.summer5]={fx:c(e.LightClouds,e.LightWind)};n[a.Temperate][t.Modest][s.summer6]={fx:e.LightRain};n[a.Temperate][t.Modest][s.summer7]={fx:e.HeavyRain};n[a.Temperate][t.Modest][s.summer9]={fx:c(e.StormClouds,c(e.Hail,c(e.HeavyWind,e.Lightning)))};n[a.Temperate][t.Modest][s.springfall_warm1]={fx:e.LightWind};n[a.Temperate][t.Modest][s.springfall_warm3]={fx:e.LightClouds};n[a.Temperate][t.Modest][s.springfall_warm5]={fx:e.StormClouds};n[a.Temperate][t.Modest][s.springfall_warm6]={fx:c(e.Hail,e.StormClouds)};n[a.Temperate][t.Modest][s.springfall1]={fx:e.ModerateWind};n[a.Temperate][t.Modest][s.springfall2]={fx:e.Overcast};n[a.Temperate][t.Modest][s.springfall3]={fx:e.RollingFog};n[a.Temperate][t.Modest][s.springfall5]={fx:e.LightRain};n[a.Temperate][t.Modest][s.springfall6]={fx:e.ModerateClouds};n[a.Temperate][t.Modest][s.springfall7]={fx:c(e.StormClouds,e.Lightning)};n[a.Temperate][t.Modest][s.springfall_cool1]={fx:e.ModerateClouds};n[a.Temperate][t.Modest][s.springfall_cool2]={fx:e.HeavyFog};n[a.Temperate][t.Modest][s.springfall_cool4]={fx:e.StormClouds};n[a.Temperate][t.Modest][s.springfall_cool5]={fx:e.HeavyWind};n[a.Temperate][t.Modest][s.springfall_cool6]={fx:e.HeavyWind};n[a.Temperate][t.Modest][s.winter3]={fx:e.HeavySnow};n[a.Temperate][t.Modest][s.winter4]={fx:e.Sleet};n[a.Temperate][t.Modest][s.winter5]={fx:e.HeavySnow};n[a.Temperate][t.Modest][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Temperate][t.Modest][s.winter7]={fx:e.HeavySnow};n[a.Temperate][t.Modest][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Temperate][t.Modest][s.winter9]={fx:e.BlusterSnow};n[a.Temperate][t.Verdant][s.summer1]={fx:e.LightWind};n[a.Temperate][t.Verdant][s.summer2]={fx:c(e.Overcast,e.BlusterWind)};n[a.Temperate][t.Verdant][s.summer3]={fx:c(e.LightClouds,e.LightRain)};n[a.Temperate][t.Verdant][s.summer4]={fx:e.LightClouds};n[a.Temperate][t.Verdant][s.summer5]={fx:e.LightRain};n[a.Temperate][t.Verdant][s.summer6]={fx:e.ModerateRain};n[a.Temperate][t.Verdant][s.summer7]={fx:e.HeavyRain};n[a.Temperate][t.Verdant][s.summer9]={fx:e.HeavyWind};n[a.Temperate][t.Verdant][s.springfall_warm1]={fx:e.LightWind};n[a.Temperate][t.Verdant][s.springfall_warm2]={fx:e.LightRain};n[a.Temperate][t.Verdant][s.springfall_warm3]={fx:e.LightClouds};n[a.Temperate][t.Verdant][s.springfall_warm5]={fx:e.ModerateRain};n[a.Temperate][t.Verdant][s.springfall_warm6]={fx:c(e.Hail,e.StormClouds)};n[a.Temperate][t.Verdant][s.springfall1]={fx:e.ModerateWind};n[a.Temperate][t.Verdant][s.springfall2]={fx:e.Overcast};n[a.Temperate][t.Verdant][s.springfall3]={fx:e.RollingFog};n[a.Temperate][t.Verdant][s.springfall5]={fx:e.LightRain};n[a.Temperate][t.Verdant][s.springfall6]={fx:e.ModerateRain};n[a.Temperate][t.Verdant][s.springfall7]={fx:c(e.BlusterRain,c(e.StormClouds,e.Lightning))};n[a.Temperate][t.Verdant][s.springfall_cool1]={fx:e.ModerateClouds};n[a.Temperate][t.Verdant][s.springfall_cool2]={fx:e.HeavyFog};n[a.Temperate][t.Verdant][s.springfall_cool4]={fx:e.StormClouds};n[a.Temperate][t.Verdant][s.springfall_cool5]={fx:e.HeavyWind};n[a.Temperate][t.Verdant][s.springfall_cool6]={fx:e.HeavyWind};n[a.Temperate][t.Verdant][s.winter3]={fx:e.HeavySnow};n[a.Temperate][t.Verdant][s.winter4]={fx:e.Sleet};n[a.Temperate][t.Verdant][s.winter5]={fx:e.HeavySnow};n[a.Temperate][t.Verdant][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Temperate][t.Verdant][s.winter7]={fx:e.HeavySnow};n[a.Temperate][t.Verdant][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Temperate][t.Verdant][s.winter9]={fx:e.ModerateSnow};n[a.Hot][t.Barren][s.summer1]={fx:e.LightWind};n[a.Hot][t.Barren][s.summer2]={fx:e.DustStorm};n[a.Hot][t.Barren][s.summer4]={fx:e.LightClouds};n[a.Hot][t.Barren][s.summer5]={fx:c(e.LightClouds,e.LightWind)};n[a.Hot][t.Barren][s.summer6]={fx:e.ModerateClouds};n[a.Hot][t.Barren][s.summer7]={fx:e.LightRain};n[a.Hot][t.Barren][s.summer9]={fx:e.HeavyWind};n[a.Hot][t.Barren][s.springfall_warm1]={fx:e.LightWind};n[a.Hot][t.Barren][s.springfall_warm3]={fx:e.LightClouds};n[a.Hot][t.Barren][s.springfall_warm5]={fx:e.StormClouds};n[a.Hot][t.Barren][s.springfall_warm6]={fx:c(e.HeavyRain,e.Overcast)};n[a.Hot][t.Barren][s.springfall1]={fx:e.ModerateWind};n[a.Hot][t.Barren][s.springfall2]={fx:e.Overcast};n[a.Hot][t.Barren][s.springfall3]={fx:c(e.LightFog,e.BlusterRain)};n[a.Hot][t.Barren][s.springfall5]={fx:e.LightRain};n[a.Hot][t.Barren][s.springfall6]={fx:e.ModerateClouds};n[a.Hot][t.Barren][s.springfall7]={fx:c(e.StormClouds,e.Lightning)};n[a.Hot][t.Barren][s.springfall_cool2]={fx:e.LightFog};n[a.Hot][t.Barren][s.springfall_cool4]={fx:e.StormClouds};n[a.Hot][t.Barren][s.springfall_cool5]={fx:e.HeavyWind};n[a.Hot][t.Barren][s.springfall_cool6]={fx:e.HeavyWind};n[a.Hot][t.Barren][s.winter3]={fx:c(e.StormClouds,e.Lightning)};n[a.Hot][t.Barren][s.winter4]={fx:c(e.LightRain,e.ModerateWind)};n[a.Hot][t.Barren][s.winter5]={fx:e.BlusterRain};n[a.Hot][t.Barren][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Hot][t.Barren][s.winter7]={fx:e.ModerateClouds};n[a.Hot][t.Barren][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Hot][t.Barren][s.winter9]={fx:c(e.BlusterRain,e.ModerateWind)};n[a.Hot][t.Modest][s.summer1]={fx:e.LightWind};n[a.Hot][t.Modest][s.summer2]={fx:e.HeavyWind};n[a.Hot][t.Modest][s.summer4]={fx:e.LightClouds};n[a.Hot][t.Modest][s.summer5]={fx:c(e.LightClouds,e.LightWind)};n[a.Hot][t.Modest][s.summer6]={fx:e.LightRain};n[a.Hot][t.Modest][s.summer7]={fx:e.HeavyRain};n[a.Hot][t.Modest][s.summer9]={fx:e.Wildfire};n[a.Hot][t.Modest][s.springfall_warm1]={fx:e.LightWind};n[a.Hot][t.Modest][s.springfall_warm3]={fx:e.LightClouds};n[a.Hot][t.Modest][s.springfall_warm5]={fx:e.StormClouds};n[a.Hot][t.Modest][s.springfall_warm6]={fx:c(e.StormClouds,e.Lightning)};n[a.Hot][t.Modest][s.springfall1]={fx:e.ModerateWind};n[a.Hot][t.Modest][s.springfall2]={fx:e.Overcast};n[a.Hot][t.Modest][s.springfall3]={fx:e.RollingFog};n[a.Hot][t.Modest][s.springfall5]={fx:e.LightRain};n[a.Hot][t.Modest][s.springfall6]={fx:e.ModerateClouds};n[a.Hot][t.Modest][s.springfall7]={fx:c(e.StormClouds,e.Lightning)};n[a.Hot][t.Modest][s.springfall_cool1]={fx:e.ModerateClouds};n[a.Hot][t.Modest][s.springfall_cool2]={fx:e.HeavyFog};n[a.Hot][t.Modest][s.springfall_cool4]={fx:e.StormClouds};n[a.Hot][t.Modest][s.springfall_cool5]={fx:e.HeavyWind};n[a.Hot][t.Modest][s.springfall_cool6]={fx:e.HeavyWind};n[a.Hot][t.Modest][s.winter3]={fx:e.HeavyRain};n[a.Hot][t.Modest][s.winter4]={fx:e.ModerateRain};n[a.Hot][t.Modest][s.winter5]={fx:e.HeavyRain};n[a.Hot][t.Modest][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Hot][t.Modest][s.winter7]={fx:e.LightRain};n[a.Hot][t.Modest][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Hot][t.Modest][s.winter9]={fx:c(e.LightRain,e.ModerateWind)};n[a.Hot][t.Verdant][s.summer1]={fx:e.LightWind};n[a.Hot][t.Verdant][s.summer2]={fx:c(e.Overcast,e.BlusterWind)};n[a.Hot][t.Verdant][s.summer3]={fx:c(e.LightClouds,e.LightRain)};n[a.Hot][t.Verdant][s.summer4]={fx:e.LightClouds};n[a.Hot][t.Verdant][s.summer5]={fx:e.LightRain};n[a.Hot][t.Verdant][s.summer6]={fx:e.ModerateRain};n[a.Hot][t.Verdant][s.summer7]={fx:e.HeavyRain};n[a.Hot][t.Verdant][s.summer9]={fx:c(e.StormClouds,e.HeavyRain)};n[a.Hot][t.Verdant][s.springfall_warm1]={fx:e.LightWind};n[a.Hot][t.Verdant][s.springfall_warm2]={fx:e.LightRain};n[a.Hot][t.Verdant][s.springfall_warm3]={fx:e.LightClouds};n[a.Hot][t.Verdant][s.springfall_warm5]={fx:e.ModerateRain};n[a.Hot][t.Verdant][s.springfall_warm6]={fx:e.HeavyRain};n[a.Hot][t.Verdant][s.springfall1]={fx:e.ModerateWind};n[a.Hot][t.Verdant][s.springfall2]={fx:e.Overcast};n[a.Hot][t.Verdant][s.springfall3]={fx:e.RollingFog};n[a.Hot][t.Verdant][s.springfall5]={fx:e.LightRain};n[a.Hot][t.Verdant][s.springfall6]={fx:e.ModerateRain};n[a.Hot][t.Verdant][s.springfall7]={fx:c(e.BlusterRain,c(e.StormClouds,e.Lightning))};n[a.Hot][t.Verdant][s.springfall_cool1]={fx:e.ModerateClouds};n[a.Hot][t.Verdant][s.springfall_cool2]={fx:e.HeavyFog};n[a.Hot][t.Verdant][s.springfall_cool4]={fx:e.StormClouds};n[a.Hot][t.Verdant][s.springfall_cool5]={fx:e.HeavyWind};n[a.Hot][t.Verdant][s.springfall_cool6]={fx:e.HeavyWind};n[a.Hot][t.Verdant][s.winter3]={fx:e.HeavyRain};n[a.Hot][t.Verdant][s.winter4]={fx:c(e.ModerateRain,e.ModerateWind)};n[a.Hot][t.Verdant][s.winter5]={fx:e.HeavyRain};n[a.Hot][t.Verdant][s.winter6]={fx:c(e.Overcast,e.ModerateWind)};n[a.Hot][t.Verdant][s.winter7]={fx:e.HeavyRain};n[a.Hot][t.Verdant][s.winter8]={fx:c(e.Overcast,e.LightClouds)};n[a.Hot][t.Verdant][s.winter9]={fx:c(e.ModerateRain,e.ModerateWind)};var R=(r=>(r.None="none",r.Logo="logo",r.Clock="clock",r.Midday="midday",r.Midnight="midnight",r.Sunrise="sunrise",r.Sunset="sunset",r.NewMoon="new",r.WaxingCrescent="waxing-crescent",r.FirstQuarter="first-quarter",r.WaxingGibbous="waxing-gibbous",r.Full="full",r.WaningGibbous="waning-gibbous",r.LastQuarter="last-quarter",r.WaningCrescent="waning-crescent",r.Spring="spring",r.Summer="summer",r.Fall="fall",r.Winter="winter",r))(R||{});class P{constructor(i,l,o,d,f,u){this.getTemperature=m=>this.temperature===null?"":m?Math.floor((this.temperature-32)*5/9)+"\xB0C":this.temperature+"\xB0F",this.getDescription=()=>this.climate===null||this.humidity===null||this.hexFlowerCell===null||this.climate===void 0||this.humidity===void 0||this.hexFlowerCell===void 0?"":W[this.climate][this.humidity][this.hexFlowerCell],this.date=i,this.season=l,this.humidity=o,this.climate=d,this.hexFlowerCell=f,this.temperature=u,this.isManual=!1}get simpleCalendarSeason(){var o,d;const i=((d=(o=this.date)==null?void 0:o.currentSeason)==null?void 0:d.icon)||"",l={[R.Fall]:w.Fall,[R.Winter]:w.Winter,[R.Spring]:w.Spring,[R.Summer]:w.Summer};return l[i]!==void 0?l[i]:null}}class Se extends FormApplication{constructor(i,l){super(i,l),this._flattenedDescriptions=[];const o=Object.values(a).slice(0,Object.values(a).length/2),d=Object.values(t).slice(0,Object.values(t).length/2);for(let f=0;f<W.length;f++)for(let u=0;u<W[f].length;u++)for(let m=0;m<W[f][u].length;m++)this._flattenedDescriptions.push({climate:o[f],climateId:f,humidity:d[u],humidityId:u,description:W[f][u][m],descriptionId:m,currentText:""})}static get defaultOptions(){const i=super.defaultOptions;return i.template=`modules/${v.id}/templates/custom-chat-settings.hbs`,i}async getData(){const i=p.get(h.customChatMessages);for(let l=0;l<this._flattenedDescriptions.length;l++)this._flattenedDescriptions[l].currentText=i[this._flattenedDescriptions[l].climateId][this._flattenedDescriptions[l].humidityId][this._flattenedDescriptions[l].descriptionId];return{climates:Object.values(a).slice(0,Object.values(a).length/2),climateIndexes:[0,1,2],humidities:Object.values(t).slice(0,Object.values(t).length/2),humidityIndexes:[0,1,2],weatherDescriptions:this._flattenedDescriptions}}async _updateObject(i,l){const o=new Array(Object.keys(a).length/2).fill("").map(()=>new Array(Object.keys(t).length/2).fill("").map(()=>new Array(37).fill("")));for(let d=0;d<this._flattenedDescriptions.length;d++)o[this._flattenedDescriptions[d].climateId][this._flattenedDescriptions[d].humidityId][this._flattenedDescriptions[d].descriptionId]=l["v-"+d];await p.set(h.customChatMessages,o)}}var h=(r=>(r.dialogDisplay="dialogDisplay",r.outputWeatherToChat="outputWeatherChat",r.publicChat="publicChat",r.useCelsius="useCelsius",r.useFX="useFX",r.attachToCalendar="attachToCalendar",r.storeInSCNotes="storeInSCNotes",r.fxActive="fxActive",r.activeFXMParticleEffects="activeFXMParticleEffects",r.activeFXMFilterEffects="activeFXMFilterEffects",r.windowPosition="windowPosition",r.displayOptions="displayOptions",r.lastWeatherData="lastWeatherData",r.season="season",r.seasonSync="seasonSync",r.biome="biome",r.climate="climate",r.humidity="humidity",r.manualPause="manualPause",r.customChatMessages="customChatMessages",r))(h||{});let p;function We(r){p=r}class He{constructor(){this.menuParams=[{settingID:"mySettingsMenu",name:"Custom weather messages",label:"Manage custom weather messages",hint:"Set system-specific messages (useful for penalties associated with extreme weather)",icon:"fas fa-bars",type:Se}],this.localMenuParams=[],this.displayParams=[{settingID:"outputWeatherChat",name:"sweath.settings.outputweatherToChat",hint:"sweath.settings.outputweatherToChatHelp",default:!0,type:Boolean},{settingID:"publicChat",name:"sweath.settings.publicChat",hint:"sweath.settings.publicChatHelp",default:!0,type:Boolean},{settingID:"dialogDisplay",name:"sweath.settings.dialogDisplay",hint:"sweath.settings.dialogDisplayHelp",default:!0,type:Boolean},{settingID:"useFX",name:"sweath.settings.useFX",hint:"sweath.settings.useFXHelp",requiresReload:!0,type:String,choices:{off:"sweath.settings.options.useFX.choices.off",core:"sweath.settings.options.useFX.choices.core",fxmaster:"sweath.settings.options.useFX.choices.fxmaster"},default:"off"},{settingID:"attachToCalendar",name:"sweath.settings.attachToCalendar",hint:"sweath.settings.attachToCalendarHelp",default:!1,requiresReload:!0,type:Boolean},{settingID:"storeInSCNotes",name:"sweath.settings.storeInSCNotes",hint:"sweath.settings.storeInSCNotesHelp",default:!1,requiresReload:!1,type:Boolean}],this.localDisplayParams=[{settingID:"useCelsius",name:"sweath.settings.useCelsius",hint:"sweath.settings.useCelsiusHelp",default:!1,type:Boolean}],this.internalParams=[{settingID:"activeFXMParticleEffects",name:"Active FX particle effects",type:Array,default:[]},{settingID:"activeFXMFilterEffects",name:"Active FX filter effects",type:Array,default:[]},{settingID:"lastWeatherData",name:"Last weather data",type:Object,default:null},{settingID:"season",name:"Last season",type:Number,default:0},{settingID:"seasonSync",name:"Season sync",type:Boolean,default:!1},{settingID:"biome",name:"Last biome",type:String,default:""},{settingID:"climate",name:"Last climate",type:Number,default:0},{settingID:"humidity",name:"Last humidity",type:Number,default:0},{settingID:"manualPause",name:"Manual pause",type:Boolean,default:!1},{settingID:"customChatMessages",name:"Custom chat messages",type:Array,default:new Array(Object.keys(a).length/2).fill("").map(()=>new Array(Object.keys(t).length/2).fill("").map(()=>new Array(37).fill("")))}],this.localInternalParams=[{settingID:"fxActive",name:"FX Active",type:Object,default:!0},{settingID:"windowPosition",name:"Window Position",type:Object,default:null},{settingID:"displayOptions",name:"Display Options",type:Object,default:{dateBox:!0,weatherBox:!1,seasonBar:!1,biomeBar:!1}}],this.registerSettings()}isSettingValueEmpty(i){return Object.keys(i).length===0||i===null||i===void 0}get(i){if(i==="lastWeatherData"){const l=M().settings.get(v.id,i);return l?new P(l.date,l.season,l.humidity,l.climate,l.hexFlowerCell,l.temperature):null}else return M().settings.get(v.id,i)}async set(i,l){!_()&&(this.menuParams.find(({settingID:o})=>o===i)||this.displayParams.find(({settingID:o})=>o===i)||this.internalParams.find(({settingID:o})=>o===i))||await M().settings.set(v.id,i,l)}register(i,l){M().settings.register(v.id,i,l)}registerMenu(i,l){M().settings.registerMenu(v.id,i,l)}registerSettings(){for(let i=0;i<this.menuParams.length;i++){const{settingID:l,...o}=this.menuParams[i];this.registerMenu(l,{...o,name:o.name?g(o.name):"",hint:o.hint?g(o.hint):"",restricted:!1})}for(let i=0;i<this.localMenuParams.length;i++){const{settingID:l,...o}=this.localMenuParams[i];this.registerMenu(l,{...o,name:o.name?g(o.name):"",hint:o.hint?g(o.hint):"",restricted:!0})}for(let i=0;i<this.displayParams.length;i++){const{settingID:l,...o}=this.displayParams[i];this.register(l,{...o,name:o.name?g(o.name):"",hint:o.hint?g(o.hint):"",scope:"world",config:!0})}for(let i=0;i<this.localDisplayParams.length;i++){const{settingID:l,...o}=this.localDisplayParams[i];this.register(l,{...o,name:o.name?g(o.name):"",hint:o.hint?g(o.hint):"",scope:"client",config:!0})}for(let i=0;i<this.internalParams.length;i++){const{settingID:l,...o}=this.internalParams[i];this.register(l,{...o,scope:"world",config:!1})}for(let i=0;i<this.localInternalParams.length;i++){const{settingID:l,...o}=this.localInternalParams[i];this.register(l,{...o,scope:"client",config:!1})}}}class ee{static sortSemver(i){return i.sort(this.compareSemver)}static isMoreRecent(i,l){return this.sortSemver([i,l]).indexOf(i)===0}static compareSemver(i,l){let o,d;const f=/^[vV]|(\.0+)+$/,u=i.replace(f,"").split("."),m=l.replace(f,"").split("."),C=Math.min(u.length,m.length);for(o=0;o<C;o++)if(d=parseInt(m[o],10)-parseInt(u[o],10),d)return d;return m.length-u.length}}class be{constructor(){this.mouseMoveCallback=i=>{this.mouseMove(i)}}start(i,l){this._parent=i,document.addEventListener("mousemove",this.mouseMoveCallback),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",this.mouseMoveCallback);const o=this._parent.getBoundingClientRect();l({bottom:window.innerHeight-o.bottom,left:o.left})},{once:!0})}mouseMove(i){this._parent.style.top=this._parent.offsetTop+(i.movementY||0)+"px",this._parent.style.left=this._parent.offsetLeft+(i.movementX||0)+"px",this._parent.style.bottom="",this._parent.style.position="fixed",this._parent.style.zIndex="100"}}const Be=function(r,i,l,o,d){const f=new P(o,l,i,r,null,null);if(x(!1,"Generating weather"),x(!1,"Season: "+Object.values(w)[l]),x(!1,"Climate: "+Object.values(a)[r]),x(!1,"Humidity: "+Object.values(t)[i]),!d||d.season!==l||!d.hexFlowerCell||d.isManual)f.hexFlowerCell=G(l);else{x(!1,"Current cell: "+d.hexFlowerCell+" ("+W[r][i][d.hexFlowerCell]+")");const m=Me(l);x(!1,"Direction: "+I[m]),m===I.stay?f.hexFlowerCell=d.hexFlowerCell:(f.hexFlowerCell=O[l][d.hexFlowerCell][m],f.hexFlowerCell===-1&&(f.hexFlowerCell=f.hexFlowerCell=G(l))),x(!1,"New cell: "+f.hexFlowerCell+" ("+W[r][i][f.hexFlowerCell]+")")}f.temperature=S[r][i][f.hexFlowerCell];const u=Math.max(2,Math.ceil(.04*f.temperature));return f.temperature+=Math.floor(Math.random()*(2*u+1)-u),f},Fe=function(r,i,l){const o=K[l];if(!o)return null;const d=Math.max(2,Math.ceil(.04*i)),f=i+Math.floor(Math.random()*(2*d+1)-d),u=new P(r,null,o.humidity,o.climate,o.hexCell,f);return u.isManual=!0,u},Te=function(r,i,l,o){let d=S[i][l][o];const f=Math.max(2,Math.ceil(.04*d));d+=Math.floor(Math.random()*(2*f+1)-f);const u=new P(r,null,l,i,o,d);return u.isManual=!0,u},j=function(r){var l,o;let i;if(p.get(h.publicChat)?i=((l=M().users)==null?void 0:l.map(d=>d.id))||[]:i=((o=ChatMessage.getWhisperRecipients("GM"))==null?void 0:o.map(d=>d.id))||[],i){let d="<b>"+r.getTemperature(p.get(h.useCelsius))+"</b> - "+r.getDescription();if(r.climate!==null&&r.humidity!==null&&r.hexFlowerCell!==null){const f=p.get(h.customChatMessages)[r.climate][r.humidity][r.hexFlowerCell];f&&(d=d+"<br>"+f)}ChatMessage.create({speaker:{alias:g("sweath.chat.header")},whisper:i,content:d})}},G=function(r){const i=Math.floor(Math.random()*L[r].length);return L[r][i]};let H;function Le(r){H=r}class Oe{constructor(){var i,l,o,d;if(this._fxActive=!0,this._activeFXMParticleEffects=[],this._activeFXMFilterEffects=[],this._fxActive=p.get(h.fxActive),this._useFX=p.get(h.useFX),this._useFX==="fxmaster"){const f=(i=M().modules.get("fxmaster"))==null?void 0:i.version;!f||!((l=M().modules.get("fxmaster"))!=null&&l.active)?(this._useFX="off",x(!1,"Disabling FXMaster because module not present")):f!=="3.0.0"&&!ee.isMoreRecent(f,"3.0.0")&&((o=ui.notifications)==null||o.error("FX Master found, but version prior to v3.0.0. Make sure the latest version of FX Master is installed to use for weather effects."),(d=ui.notifications)==null||d.error("Version found: "+f))}this._activeFXMParticleEffects=p.get(h.activeFXMParticleEffects),this._sceneReady=!1}get useFX(){return this._useFX!=="off"}ready(i){this._sceneReady=!0,this.deactivateFX(),i?this.activateFX(i):this._lastWeatherData&&this.activateFX(this._lastWeatherData)}set fxActive(i){this._fxActive=i,i?this.activateFX(this._lastWeatherData):this.deactivateFX()}get fxActive(){return this._fxActive}async activateFX(i){var o,d,f,u;if(this._lastWeatherData=i,!this._sceneReady||!i||i.climate===null||i.humidity===null||i.hexFlowerCell===null)return;const l=n[i.climate][i.humidity][i.hexFlowerCell].fx;if(_()){if(await this.deactivateFX(),!l)return;switch(this._useFX){case"core":(o=l.core)!=null&&o.effect&&await((u=(d=M().scenes)==null?void 0:d.active)==null?void 0:u.update({weather:(f=l.core)==null?void 0:f.effect}));break;case"fxmaster":if(l.fxMaster){const m=l.fxMaster;for(let C=0;C<m.length;C++){const b=`swr-${m[C].type}-${foundry.utils.randomID()}`;if(m[C].style===A.Particle){const B=structuredClone(m[C].options);B.direction&&(B.direction=Math.floor(Math.random()*(B.direction.end-B.direction.start))+B.direction.start),x(!1,"Adding fxmaster: "+b),Hooks.call("fxmaster.switchParticleEffect",{name:b,type:m[C].type,options:B}),this.addFXMParticleEffect(b)}else m[C].style===A.Filter&&(x(!1,"Adding fxmaster: "+b),await FXMASTER.filters.addFilter(b,m[C].type,m[C].options),await this.addFXMFilterEffect(b))}}break}}}async deactivateFX(){var i,l,o,d;if(_())switch(this._useFX){case"core":_()&&await((l=(i=M().scenes)==null?void 0:i.active)==null?void 0:l.update({weather:""}));break;case"fxmaster":for(let f=0;f<this._activeFXMParticleEffects.length;f++)this._activeFXMParticleEffects[f]in(((d=(o=M().scenes)==null?void 0:o.active)==null?void 0:d.getFlag("fxmaster","effects"))||[])&&Hooks.call("fxmaster.switchParticleEffect",{name:this._activeFXMParticleEffects[f]});await this.clearFXMParticleEffects();for(let f=0;f<this._activeFXMFilterEffects.length;f++){const u=this._activeFXMFilterEffects[f];await FXMASTER.filters.removeFilter(u)}await this.clearFXMFilterEffects();break}}async addFXMParticleEffect(i){this._activeFXMParticleEffects.push(i),await p.set(h.activeFXMParticleEffects,this._activeFXMParticleEffects)}async addFXMFilterEffect(i){this._activeFXMFilterEffects.push(i),await p.set(h.activeFXMFilterEffects,this._activeFXMFilterEffects)}async clearFXMParticleEffects(){this._activeFXMParticleEffects=[],await p.set(h.activeFXMParticleEffects,this._activeFXMParticleEffects)}async clearFXMFilterEffects(){this._activeFXMFilterEffects=[],await p.set(h.activeFXMFilterEffects,this._activeFXMFilterEffects)}}let y;function Ve(r){y=r}const D="fsc-c",z="fsc-d",V="fsc-of",E="fsc-if",k="dailyWeather";class Re extends Application{constructor(){super(),this._calendarPresent=!1,this._manualPause=!1,this._attachedMode=!1,this._attachmodeHidden=!0,this._compactMode=!1,this._simpleCalendarInstalled=!1,this._windowID="swr-container",this._windowDragHandler=new be,this._currentlyHidden=!1,this.onWeatherToggleClick=i=>{i.preventDefault(),this.updateDisplayOptions({weatherBox:!this._displayOptions.weatherBox})},this.onDateToggleClick=i=>{var l;if(i.preventDefault(),this._displayOptions.dateBox)this._windowPosition.left+=((l=document.getElementById("swr-calendar-box"))==null?void 0:l.offsetWidth)||0;else{const o=document.getElementById("swr-calendar-box");if(o){o.style.visibility="hidden",o.style.display="block";const d=o.offsetWidth;this._windowPosition.left-=d||0}}this.updateDisplayOptions({dateBox:!this._displayOptions.dateBox})},this.onCloseClick=i=>{i.preventDefault(),this.toggleWindow()},this.onMoveHandleMouseDown=i=>{if(i.button!==0)return;const l=document.getElementById(this._windowID);l&&this._windowDragHandler.start(l,o=>{this.setWindowPosition(o)})},this.onWeatherRegenerateClick=i=>{i.preventDefault(),this.regenerateWeather()},this.onChatRepost=i=>{i.preventDefault(),_()&&j(this._currentWeather)},this.onSeasonSelectChange=i=>{var o;const l=(o=i.originalEvent)==null?void 0:o.target;l.value==="sync"?(this._currentSeasonSync=!0,this._currentSeason=Number(this._currentWeather.simpleCalendarSeason)):(this._currentSeasonSync=!1,this._currentSeason=Number(l.value)),p.set(h.seasonSync,this._currentSeasonSync),p.set(h.season,this._currentSeason),this.render()},this.onClimateSelectChange=i=>{var o;const l=(o=i.originalEvent)==null?void 0:o.target;this._currentClimate=Number(l.value),p.set(h.climate,this._currentClimate),jQuery(document).find("#swr-biome-selection").val(""),this._currentBiome="",p.set(h.biome,"")},this.onHumiditySelectChange=i=>{var o;const l=(o=i.originalEvent)==null?void 0:o.target;this._currentHumidity=Number(l.value),p.set(h.humidity,this._currentHumidity),jQuery(document).find("#swr-biome-selection").val(""),this._currentBiome="",p.set(h.biome,"")},this.onBiomeSelectChange=i=>{var d;const l=(d=i.originalEvent)==null?void 0:d.target;if(!l.value)return;const o=_e[l.value];if(o){this._currentBiome=l.value,p.set(h.biome,this._currentBiome);const f=document.getElementById("swr-climate-selection");f&&(f.value=String(o.climate),this._currentClimate=o.climate,p.set(h.climate,o.climate));const u=document.getElementById("swr-humidity-selection");u&&(u.value=String(o.humidity),this._currentHumidity=o.humidity,p.set(h.humidity,o.humidity))}},this.onManualPauseChange=i=>{this.manualPauseToggle()},this.onToggleSeasonBar=()=>{this._displayOptions.seasonBar=!this._displayOptions.seasonBar,this.updateDisplayOptions(this._displayOptions)},this.onToggleBiomeBar=()=>{this._displayOptions.biomeBar=!this._displayOptions.biomeBar,this.updateDisplayOptions(this._displayOptions)},this.onToggleManualBar=()=>{this._displayOptions.manualBar=!this._displayOptions.manualBar,this.updateDisplayOptions(this._displayOptions)},this.onToggleFX=()=>{this.toggleFX()},this.onManualTempInput=i=>{const l=document.getElementById("swr-submit-weather");l.disabled=!this.isTempValid()},this.onSubmitWeatherClick=()=>{var d;const i=document.getElementById("swr-manual-temperature");let l=Number(i==null?void 0:i.value);const o=document.getElementById("swr-manual-weather-selection");if(isNaN(l)||!o.value){x(!1,"Attempt to submit invalid temperature or no selection");return}p.get(h.useCelsius)&&(l=Math.round(l*9/5+32)),this.setManualWeather(((d=this._currentWeather)==null?void 0:d.date)||null,l,Number(o.value))},this.currentSeasonClass=function(){switch(this.getSeason()){case w.Fall:return"fa-leaf fall";case w.Winter:return"fa-snowflake winter";case w.Spring:return"fa-seedling spring";case w.Summer:return"fa-sun summer"}return""},x(!1,"WeatherApplication construction"),this._displayOptions=p.get(h.displayOptions)||{dateBox:!1,weatherBox:!0,biomeBar:!0,seasonBar:!0},this._attachedMode=p.get(h.attachToCalendar)||!1,this._attachmodeHidden=!0,this._compactMode=!1,this._simpleCalendarInstalled=!1,this._manualPause=p.get(h.manualPause||!1),this._currentlyHidden=!0,this._windowPosition=p.get(h.windowPosition)||{left:100,bottom:300},this.setWeather()}render(i){this.checkSeasonSync(),super.render(i)}attachToCalendar(){this._attachedMode=!0}get attachedMode(){return this._attachedMode}simpleCalendarInstalled(){this._simpleCalendarInstalled=!0}static get defaultOptions(){const i=super.defaultOptions;return i.template=`modules/${v.id}/templates/weather-dialog.hbs`,i.popOut=!1,i.resizable=!1,i}async getData(){var l,o,d,f,u,m;return{...await super.getData(),isGM:_(),displayDate:(o=(l=this._currentWeather)==null?void 0:l.date)!=null&&o.display?this._currentWeather.date.display.date:"",formattedDate:(d=this._currentWeather)!=null&&d.date?this._currentWeather.date.day+"/"+this._currentWeather.date.month+"/"+this._currentWeather.date.year:"",formattedTime:(u=(f=this._currentWeather)==null?void 0:f.date)!=null&&u.display?this._currentWeather.date.display.time:"",weekday:(m=this._currentWeather)!=null&&m.date?this._currentWeather.date.weekdays[this._currentWeather.date.dayOfTheWeek]:"",currentTemperature:this._currentWeather?this._currentWeather.getTemperature(p.get(h.useCelsius)):"",currentDescription:this._currentWeather?this._currentWeather.getDescription():"",currentSeasonClass:this.currentSeasonClass(),biomeSelections:Q,seasonSelections:N,humiditySelections:Y,climateSelections:J,manualSelections:Z,displayOptions:this._displayOptions,hideCalendar:this._attachedMode||!this._calendarPresent||!this._displayOptions.dateBox,hideCalendarToggle:this._attachedMode||!this._calendarPresent,hideWeather:!this._attachedMode&&this._calendarPresent&&!this._displayOptions.weatherBox,hideFXToggle:!H.useFX,manualPause:this._manualPause,fxActive:H.fxActive,useCelsius:p.get(h.useCelsius),attachedMode:this._attachedMode,showAttached:this._attachedMode&&!this._attachmodeHidden,SCContainerClasses:this._attachedMode?`${V} sc-right ${D}`:"",windowPosition:this._attachedMode?{bottom:0,left:0}:this._windowPosition,containerPosition:this._attachedMode?"relative":"fixed",hideDialog:this._attachedMode&&this._attachmodeHidden||this._currentlyHidden||!(_()||p.get(h.dialogDisplay))}}updateWindowPosition(i){this._windowPosition=i,p.set(h.windowPosition,this._windowPosition),this.render()}toggleWindow(){this._currentlyHidden=!this._currentlyHidden,this.render()}toggleAttachModeHidden(){this._attachmodeHidden=!this._attachmodeHidden,this.render()}setCompactMode(i){this._compactMode=i,this.render()}showWindow(){this._currentlyHidden=!1,this.render(!0)}async activateListeners(i){if(_()&&(i.find("#swr-climate-selection").val(this._currentClimate),i.find("#swr-humidity-selection").val(this._currentHumidity),this._currentSeasonSync?i.find("#swr-season-selection").val("sync"):i.find("#swr-season-selection").val(this._currentSeason),i.find("#swr-biome-selection").val(this._currentBiome),i.find("#swr-weather-refresh").on("click",this.onWeatherRegenerateClick),i.find("#swr-chat-repost").on("click",this.onChatRepost),i.find("#swr-biome-selection").on("change",this.onBiomeSelectChange),i.find("#swr-climate-selection").on("change",this.onClimateSelectChange),i.find("#swr-humidity-selection").on("change",this.onHumiditySelectChange),i.find("#swr-season-selection").on("change",this.onSeasonSelectChange),i.find("#swr-manual-pause").on("change",this.onManualPauseChange),i.find("#swr-season-bar-toggle").on("mousedown",this.onToggleSeasonBar),i.find("#swr-biome-bar-toggle").on("mousedown",this.onToggleBiomeBar),i.find("#swr-manual-bar-toggle").on("mousedown",this.onToggleManualBar),i.find("#swr-fx-toggle").on("mousedown",this.onToggleFX),i.find("#swr-manual-temperature").on("input",this.onManualTempInput),i.find("#swr-submit-weather").on("click",this.onSubmitWeatherClick),this._attachedMode)){const l=new MutationObserver(d=>{d.forEach(f=>{f.attributeName==="class"&&$(f.target).hasClass(D)&&$(f.target).hasClass(V)&&f.target.id!="swr-fsc-container"&&(this._attachmodeHidden=!0,$("#swr-fsc-container").remove())})}),o=$(`#${E} .window-content`).find(`.${V}`).last().parent();if(o&&o.length>0){const d=o.get(0);l.observe(d,{attributes:!0,childList:!0,subtree:!0})}}i.find("#swr-calendar-move-handle").on("mousedown",this.onMoveHandleMouseDown),i.find("#swr-weather-move-handle").on("mousedown",this.onMoveHandleMouseDown),i.find("#swr-weather-box-toggle").on("click",this.onWeatherToggleClick),i.find("#swr-date-box-toggle").on("click",this.onDateToggleClick),i.find("#swr-close-button").on("click",this.onCloseClick),super.activateListeners(i)}setWindowPosition(i){this._windowPosition=i,p.set(h.windowPosition,i),this.render()}checkSeasonSync(i){!this._calendarPresent&&this._currentSeasonSync&&(this._currentSeasonSync=!1)}ready(){_()&&(this._currentClimate==null&&(this._currentClimate=p.get(h.climate)),this._currentHumidity==null&&(this._currentHumidity=p.get(h.humidity)),this._currentSeason==null&&(this._currentSeason=p.get(h.season)),this._currentSeasonSync==null&&(this._currentSeasonSync=p.get(h.seasonSync)),this._currentBiome==null&&(this._currentBiome=p.get(h.biome))),H.ready(this._currentWeather),this._currentlyHidden=!1,this.render(!0)}async debugOutput(){let i=`
simple-weather DEBUG OUTPUT
_______________________________________
isGM: ${_()}
displayOptions: ${JSON.stringify(this._displayOptions,null,2)}
dialogDisplay: ${p.get(h.dialogDisplay)}
calendarPresent: ${this._calendarPresent}
manualPause: ${this._manualPause}
currentClimate: ${this._currentClimate}
currentHumidity: ${this._currentHumidity}
currentBiome: ${this._currentBiome}
currentSeason: ${this._currentSeason}
currentSeasonSync: ${this._currentSeasonSync}
WeatherEffects.fxActive = ${p.get(h.fxActive)}
WeatherEffects.useFX = ${p.get(h.useFX)}
getData: ${JSON.stringify(await this.getData(),null,2)}
_______________________________________
    `;console.log(i)}updateDisplayOptions(i){this._displayOptions={...this._displayOptions,...i},p.set(h.displayOptions,this._displayOptions),this.render()}updateDateTime(i){if(!!i){if(this.hasDateChanged(i)){if(_())if(p.get(h.storeInSCNotes)){const l=SimpleCalendar.api.getNotesForDay(i.year,i.month,i.day);let o=!1;for(let d=0;d<l.length;d++)if(l[d]){const u=l[d].getFlag(v.id,k);if(u&&u.temperature!==void 0&&u.hexFlowerCell!==void 0){o=!0,this._currentWeather=new P(u.date,u.season,u.humidity,u.climate,u.hexFlowerCell,u.temperature),this.activateWeather(this._currentWeather);break}else if(u){x(!1,"Found a weather note for today, but it's corrupt:"),x(!1,u);return}}o||this.generateWeather(i)}else x(!1,"Generate new weather"),this.generateWeather(i)}else this._currentWeather.date=i;this.render()}}setWeather(){const i=p.get(h.lastWeatherData);i?(x(!1,"Using saved weather data"),this._currentWeather=i,H.activateFX(i)):_()&&(x(!1,"No saved weather data - Generating weather"),this.generateWeather(null)),this.render()}generateWeather(i){var l,o;if(this._manualPause)this._currentWeather.date=i;else{const d=this.getSeason();this._currentWeather=Be((l=this._currentClimate)!=null?l:a.Temperate,(o=this._currentHumidity)!=null?o:t.Modest,d!=null?d:w.Spring,i,this._currentWeather||null),this.activateWeather(this._currentWeather)}}setManualWeather(i,l,o){this.getSeason();const d=Fe(i,l,o);d&&(this._currentWeather=d,this.activateWeather(this._currentWeather),this.render())}setSpecificWeather(i,l,o){var f;this.getSeason(),x(!1,"Running weather for "+W[i][l][o]);const d=Te(((f=this._currentWeather)==null?void 0:f.date)||null,i,l,o);d&&(this._currentWeather=d,this.activateWeather(this._currentWeather),this.render())}activateCalendar(){this._calendarPresent=!0,this.render()}activateWeather(i){_()&&(p.get(h.outputWeatherToChat)&&j(i),H.activateFX(i),p.get(h.storeInSCNotes)&&this.saveWeatherToCalendarNote(i),p.set(h.lastWeatherData,this._currentWeather))}async saveWeatherToCalendarNote(i){const l="Simple Weather - Daily Weather";if(!this._simpleCalendarInstalled||!(i!=null&&i.date))return;const o=SimpleCalendar.api.getNotesForDay(i.date.year,i.date.month,i.date.day);for(let m=0;m<o.length;m++)o[m]&&o[m].getFlag(v.id,k)&&await SimpleCalendar.api.removeNote(o[m].id);const d=`Todays weather: ${i.getTemperature(p.get(h.useCelsius))} -  ${i.getDescription()}`,f={year:i.date.year,month:i.date.month,day:i.date.day},u=await SimpleCalendar.api.addNote(l,d,f,f,!0);await(u==null?void 0:u.setFlag(v.id,k,i))}hasDateChanged(i){var o;const l=(o=this._currentWeather)==null?void 0:o.date;return!l&&i||l&&!i?!0:!l&&!i?!1:!!(this.isDateTimeValid(i)&&(i.day!==l.day||i.month!==l.month||i.year!==l.year))}isDateTimeValid(i){return!!(this.isDefined(i.second)&&this.isDefined(i.minute)&&this.isDefined(i.day)&&this.isDefined(i.month)&&this.isDefined(i.year))}isDefined(i){return i!=null}getSeason(){return this._currentSeasonSync?this._currentWeather.simpleCalendarSeason:this._currentSeason}regenerateWeather(){var i;_()&&(this.generateWeather(((i=this._currentWeather)==null?void 0:i.date)||null),p.set(h.lastWeatherData,this._currentWeather),this.render())}manualPauseToggle(){_()&&(this._manualPause=!this._manualPause,p.set(h.manualPause,this._manualPause),this._manualPause&&this.updateDisplayOptions({...this._displayOptions,biomeBar:!1,seasonBar:!1}),this.render())}toggleFX(){_()&&(H.fxActive=!H.fxActive,this.render())}isTempValid(){const i=document.getElementById("swr-manual-temperature"),l=i==null?void 0:i.value;return/^-?[0-9]+$/.test(l)}_injectHTML(i){this._attachedMode?this._attachmodeHidden?$("#swr-fsc-container").remove():($(`#${E} .window-content`).find(`.${V}.${D}`).addClass(z).removeClass(D),$("#swr-fsc-container").length===0?$(`#${E} .window-content`).find(`.${V}.${z}`).last().parent().append(i):$("#swr-fsc-container").replaceWith(i)):super._injectHTML(i)}}class Pe{static register(){const i=[{bindingId:"toggleMainApp",name:"sweath.keybindings.toggle",hint:"sweath.keybindings.toggleHelp",onDown:y.toggleWindow.bind(y),editable:[]},{bindingId:"regenerate",name:"sweath.keybindings.regenerate",hint:"sweath.keybindings.regenerateHelp",onDown:y.regenerateWeather.bind(y),editable:[]},{bindingId:"manualPause",name:"sweath.keybindings.manualPause",hint:"sweath.keybindings.manualPauseHelp",onDown:y.manualPauseToggle.bind(y),editable:[]},{bindingId:"pauseFX",name:"sweath.keybindings.pauseFX",hint:"sweath.keybindings.pauseFXHelp",onDown:y.toggleFX.bind(y),editable:[]}];for(let l=0;l<i.length;l++){const o=i[l];M().keybindings.register(v.id,o.bindingId,{name:o.name,hint:o.hint,onDown:o.onDown,editable:o.editable,precedence:CONST.KEYBINDING_PRECEDENCE.NORMAL})}}}let F=!1;const U="fsc-pj",X="2.4.0",q="2.4.17";Hooks.once("devModeReady",async({registerPackageDebugFlag:r})=>{r("simple-weather","boolean")});Hooks.once("init",async()=>{We(new He),Le(new Oe),Ve(new Re),Pe.register();const r=M().modules.get(v.id);r&&(r.api={runWeather:function(i,l,o){y.setSpecificWeather(i,l,o)},debugOutput:function(){y.debugOutput()}})});Hooks.once("ready",async()=>{De(),F||y.ready()});Hooks.once("i18nInit",async()=>{we(),Ce(),y&&y.render()});Hooks.on("updateSetting",async r=>{!_()&&r.key==="simple-weather."+h.lastWeatherData&&y.setWeather()});Hooks.on("getSceneControlButtons",r=>{if(!y.attachedMode&&(_()||p.get(h.dialogDisplay))){const i=r.find(l=>l.name==="notes");i&&i.tools&&i.tools.push({name:"simple-weather",title:"sweath.labels.openButton",icon:"fas swr-icon",button:!0,onClick:()=>{y&&y.showWindow()}})}});function De(){var o,d,f,u,m;const r=M().modules.get("foundryvtt-simple-calendar"),i=r==null?void 0:r.version;if(!r||!(r!=null&&r.active)||!i){p.get(h.attachToCalendar)&&((o=ui.notifications)==null||o.warn(`Simple Weather is set to "Attached Mode" in settings but Simple Calendar is not installed.  This will keep it from displaying at all.  You should turn off that setting if this isn't intended.`)),F=!1;return}i===X||ee.isMoreRecent(i,X)?i&&i!==q?(F=!0,(u=ui.notifications)==null||u.error(`This version of Simple Weather only fully supports Simple Calendar v${q}. "Attached mode" is unlikely to work properly.`),(m=ui.notifications)==null||m.error("Version found: "+i)):F=!0:(F=!1,(d=ui.notifications)==null||d.error(`Simple Calendar found, but version prior to v${X}. Make sure the latest version of Simple Calendar is installed.`),(f=ui.notifications)==null||f.error("Version found: "+i))}Hooks.once(SimpleCalendar.Hooks.Init,async()=>{F?(y.simpleCalendarInstalled(),(p.get(h.dialogDisplay)||_())&&(y.activateCalendar(),y.updateDateTime(SimpleCalendar.api.timestampToDate(SimpleCalendar.api.timestamp()))),xe(),y.ready(),Hooks.on("updateWorldTime",r=>{y.updateDateTime(SimpleCalendar.api.timestampToDate(r))})):y.ready(),y.attachedMode&&(SimpleCalendar.api.addSidebarButton("Simple Weather","fa-cloud-sun","",!1,()=>y.toggleAttachModeHidden()),Hooks.on("renderMainApp",(r,i)=>{if(i.find(`.${U}`).length>0){if(y.setCompactMode(!0),i.find("#swr-fsc-compact-open").length===0){const o=`
          <div id="swr-fsc-compact-open" style="margin-left: 8px; cursor: pointer; ">
            <div data-tooltip="Simple Weather" style="color:var(--comapct-header-control-grey);">    
              <span class="fa-solid fa-cloud-sun"></span>
            </div>
          </div>
          `;i.find(`.${U}`).append(o),i.find("#swr-fsc-compact-open").on("click",()=>{y.toggleAttachModeHidden()})}}else y.setCompactMode(!1)}))});
//# sourceMappingURL=index.js.map
