{"name":"DualityRoll","type":"script","author":"DMHydSfF3dPDaKHV","img":"icons/svg/dice-target.svg","scope":"global","command":"let modifier = await new Promise((resolve) => {\n  new Dialog({\n    title: \"Roll Modifier\",\n    content: `\n      <form>\n        <div class=\"form-group\">\n          <label>Enter modifier (e.g. 1d6+4 or -2d6kh):</label>\n          <input type=\"text\" name=\"mod\" value=\"\"/>\n        </div>\n      </form>\n    `,\n    buttons: {\n      roll: {\n        label: \"Roll\",\n        callback: (html) => {\n          resolve(html.find('[name=\"mod\"]').val().trim());\n        }\n      }\n    },\n    default: \"roll\"\n  }).render(true);\n});\n\nlet formula = `1d12 + 1d12[necrotic] ${modifier? `+${modifier}` : ''}`;\n\nRoll.create(formula).roll({async: true}).then(roll => {\n  const terms = roll.terms;\n  const hopeRoll = terms[0].results[0].result;\n  const fearRoll = terms[2].results[0].result;\n\n  let outcome = \"\";\n  let outcomeColor = \"\";\n  if (hopeRoll > fearRoll) {\n    outcome = \"w/ Hope\";\n    outcomeColor = \"#4caf50\"; // green\n  } else if (fearRoll > hopeRoll) {\n    outcome = \"w/ Fear\";\n    outcomeColor = \"#f44336\"; // red\n  } else {\n    outcome = \"CRITICAL\";\n    outcomeColor = \"#ff9800\"; // orange\n  }\n\n  roll.toMessage({\n    flavor: `\n      <div>\n        <span>1d12</span> (Hope) + \n        <span>1d12</span> (Fear)  \n        ${modifier ? `+ <span>${modifier}</span> (Modifier)` : ''}\n        <br/>\n        <span style=\"font-weight: bold; color: ${outcomeColor}; font-size: 1.2em;\">${outcome}</span>\n      </div>\n    `\n  });\n});","folder":null,"sort":0,"ownership":{"default":2},"flags":{"combat-utility-belt":{"macroTrigger":""}},"_stats":{"systemId":"worldbuilding","systemVersion":"0.8.2","coreVersion":"10.303","createdTime":1750010521710,"modifiedTime":1750370538638,"lastModifiedBy":"DMHydSfF3dPDaKHV"},"_id":"eCZXNT3heFf39AA5"}
{"folder":"C9dI2TtiXtUdXJuA","name":"RollAgi","type":"script","author":"DMHydSfF3dPDaKHV","img":"icons/svg/dice-target.svg","scope":"global","command":"","sort":0,"ownership":{"default":0,"DMHydSfF3dPDaKHV":3},"flags":{},"_stats":{"systemId":"worldbuilding","systemVersion":"0.8.2","coreVersion":"10.303","createdTime":1750369484915,"modifiedTime":1750369484915,"lastModifiedBy":"DMHydSfF3dPDaKHV"},"_id":"mFYS5eoiJ0rpmDYm"}
