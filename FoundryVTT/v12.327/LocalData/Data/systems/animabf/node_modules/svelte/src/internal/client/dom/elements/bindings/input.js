import { render_effect } from "../../../reactivity/effects.js";
import { listen_to_event_and_reset_event } from "./shared.js";
import { is_runes } from "../../../runtime.js";
function bind_value(input, get, set = get) {
  var runes = is_runes();
  listen_to_event_and_reset_event(input, "input", () => {
    var value = is_numberlike_input(input) ? to_number(input.value) : input.value;
    set(value);
    if (runes && value !== (value = get())) {
      input.value = value ?? "";
    }
  });
  render_effect(() => {
    var value = get();
    if (is_numberlike_input(input) && value === to_number(input.value)) {
      return;
    }
    if (input.type === "date" && !value && !input.value) {
      return;
    }
    input.value = value ?? "";
  });
}
function bind_checked(input, get, set = get) {
  listen_to_event_and_reset_event(input, "change", () => {
    var value = input.checked;
    set(value);
  });
  if (get() == void 0) {
    set(false);
  }
  render_effect(() => {
    var value = get();
    input.checked = Boolean(value);
  });
}
function is_numberlike_input(input) {
  var type = input.type;
  return type === "number" || type === "range";
}
function to_number(value) {
  return value === "" ? null : +value;
}
export {
  bind_checked,
  bind_value
};
