(()=>{"use strict";var __webpack_modules__={555:()=>{eval("\n;// CONCATENATED MODULE: ./src/constant.ts\nconst user = () => game.user;\nconst i18n = () => game.i18n;\nconst i18nLocalize = (id) => i18n().localize(id);\nconst playlists = () => game.playlists;\nconst initTemplates = (paths) => loadTemplates(paths);\nconst isGM = () => { var _a, _b; return (_b = (_a = user()) === null || _a === void 0 ? void 0 : _a.isGM) !== null && _b !== void 0 ? _b : false; };\n\n;// CONCATENATED MODULE: ./src/abstract-chooser.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass AbstractChooser extends FormApplication {\n    constructor(object, options = {}) {\n        super(object, options);\n        this.model = this.getInitModel();\n        this.model.data = this.object;\n        this.model.id = new Date().getTime();\n        this.model.buttonsTemplate = () => `modules/playlist-group/templates/chooser-action.html`;\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            height: 'auto',\n            resizable: true,\n            closeOnSubmit: true,\n        });\n    }\n    close(options) {\n        const _super = Object.create(null, {\n            close: { get: () => super.close }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield _super.close.call(this, options !== null && options !== void 0 ? options : { submit: false, force: true });\n        });\n    }\n    _onSubmit(event, options) {\n        const _super = Object.create(null, {\n            _onSubmit: { get: () => super._onSubmit }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            event.preventDefault();\n            if (this.isValid(this.model.data)) {\n                yield _super._onSubmit.call(this, event, options);\n                this.yes(this.model.data);\n            }\n            return Promise.resolve({});\n        });\n    }\n    _getSubmitData(_updateData) {\n        return this.model.data;\n    }\n    getData() {\n        return this.model;\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n        this.handleClick(html, `#${this.model.id}-no`, (_event) => __awaiter(this, void 0, void 0, function* () {\n            yield this.close();\n            this.no();\n        }));\n    }\n    handleClick(html, selector, handler) {\n        html.find(selector).on('click', handler);\n    }\n    handleChange(html, selector, handler) {\n        html.find(selector).on('change', handler);\n    }\n    handleInput(html, selector, handler) {\n        html.find(selector).on('input', handler);\n    }\n    _updateObject(_event, _formData) {\n        return Promise.resolve();\n    }\n    no() { }\n    getInitModel() {\n        return {\n            data: {},\n            actions: [\n                {\n                    name: 'yes',\n                    label: 'PLAYLISTGROUP.common.button.OK',\n                    icon: 'fa-check',\n                    type: 'submit',\n                    callback: this.yes,\n                },\n                {\n                    name: 'no',\n                    label: 'PLAYLISTGROUP.common.button.Cancel',\n                    icon: 'fa-times',\n                    type: 'button',\n                    callback: this.no,\n                },\n            ],\n        };\n    }\n}\n\n;// CONCATENATED MODULE: ./src/select-model.ts\nclass SelectModel {\n    constructor(key, value, selected) {\n        this.key = key;\n        this.value = value;\n        this.selected = selected;\n    }\n}\n\n;// CONCATENATED MODULE: ./src/playlist-group-chooser.ts\nvar playlist_group_chooser_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\nclass Model {\n    constructor(name, playlistIds) {\n        this.name = name;\n        this.playlistIds = playlistIds;\n    }\n}\nclass PlaylistGroupChooser extends AbstractChooser {\n    constructor(object, callback, options) {\n        super(object, options);\n        const pls = playlists().contents.filter((pl) => { var _a; return !((_a = pl.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup); });\n        this.selectedPlaylist = pls.length > 0 ? pls[0]._id : '';\n        this.model.playlists = pls.map((pl) => new SelectModel(pl._id, pl.name, this.selectedPlaylist === pl._id));\n        this.updateSelectedPlaylists();\n        this.callback = callback;\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            id: 'playlist-group-chooser',\n            title: i18n().localize('PLAYLISTGROUP.playlists.group.edit'),\n            template: `modules/playlist-group/templates/playlist-group-chooser.html`,\n            width: 400,\n        });\n    }\n    static selectPlaylists(initName, initPlaylistIds, callback) {\n        return playlist_group_chooser_awaiter(this, void 0, void 0, function* () {\n            new PlaylistGroupChooser(new Model(initName, initPlaylistIds), callback).render(true);\n        });\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n        this.handleChange(html, '#nameInput', (event) => {\n            this.updateName(event.currentTarget.value);\n        });\n        this.handleChange(html, '#selectPlaylists', (event) => {\n            this.selectedPlaylist = event.currentTarget.value;\n            this.model.playlists.forEach((pl) => {\n                pl.selected = pl.key === this.selectedPlaylist;\n            });\n        });\n        this.handleClick(html, '#addPlaylistButton', () => {\n            if (!this.model.data.playlistIds.includes(this.selectedPlaylist)) {\n                this.model.data.playlistIds.push(this.selectedPlaylist);\n                this.updateSelectedPlaylists();\n                this.render();\n            }\n        });\n        this.handleClick(html, '.remove-playlist-button', (event) => {\n            const key = event.currentTarget.value;\n            if (this.model.data.playlistIds.includes(key)) {\n                this.model.data.playlistIds = this.model.data.playlistIds.filter((pli) => pli !== key);\n                this.updateSelectedPlaylists();\n                this.render();\n            }\n        });\n    }\n    isValid(data) {\n        var _a;\n        return ((_a = data === null || data === void 0 ? void 0 : data.name) === null || _a === void 0 ? void 0 : _a.length) > 0;\n    }\n    yes(data) {\n        this.callback(data === null || data === void 0 ? void 0 : data.name, data === null || data === void 0 ? void 0 : data.playlistIds);\n    }\n    updateName(name) {\n        this.model.data.name = name;\n    }\n    updateSelectedPlaylists() {\n        this.model.selectedPlaylists = this.model.playlists.filter((pl) => this.model.data.playlistIds.includes(pl.key));\n    }\n}\n\n;// CONCATENATED MODULE: ./src/random-util.ts\nclass RandomUtil {\n    static getRandomId() {\n        return randomID(16);\n    }\n}\n\n;// CONCATENATED MODULE: ./src/playlist-group.ts\nvar playlist_group_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\nclass PlaylistGroup {\n    static createPlaylistGroup() {\n        return playlist_group_awaiter(this, void 0, void 0, function* () {\n            yield PlaylistGroupChooser.selectPlaylists('', [], (name, ids) => playlist_group_awaiter(this, void 0, void 0, function* () {\n                var _a;\n                const playlistGroup = yield Playlist.create({\n                    name: name,\n                    flags: {\n                        playlistGroup: true,\n                        playlists: ids,\n                    },\n                });\n                yield this.updatePlaylistGroupSounds(playlistGroup !== null && playlistGroup !== void 0 ? playlistGroup : {});\n                (_a = playlistGroup === null || playlistGroup === void 0 ? void 0 : playlistGroup.sheet) === null || _a === void 0 ? void 0 : _a.render(true);\n            }));\n        });\n    }\n    static updatePlaylistGroupFromSound(sound) {\n        return playlist_group_awaiter(this, void 0, void 0, function* () {\n            const playlist = sound.parent;\n            if (playlist != null) {\n                const playlistGroups = playlists().contents.filter((pl) => {\n                    var _a, _b, _c;\n                    return ((_a = pl === null || pl === void 0 ? void 0 : pl.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) &&\n                        ((_c = (_b = pl === null || pl === void 0 ? void 0 : pl.flags) === null || _b === void 0 ? void 0 : _b.playlists) === null || _c === void 0 ? void 0 : _c.includes(playlist._id));\n                });\n                for (const plg of playlistGroups) {\n                    yield this.updatePlaylistGroupSounds(plg);\n                }\n            }\n        });\n    }\n    static updatePlaylistGroupSounds(playlistGroup) {\n        var _a, _b, _c, _d, _e;\n        return playlist_group_awaiter(this, void 0, void 0, function* () {\n            const playListIds = (_c = (_b = (_a = playlistGroup) === null || _a === void 0 ? void 0 : _a.flags) === null || _b === void 0 ? void 0 : _b.playlists) !== null && _c !== void 0 ? _c : [];\n            yield playlistGroup.deleteEmbeddedDocuments(PlaylistSound.documentName, (_e = (_d = playlistGroup === null || playlistGroup === void 0 ? void 0 : playlistGroup.sounds) === null || _d === void 0 ? void 0 : _d.contents) === null || _e === void 0 ? void 0 : _e.map((s) => { var _a, _b; return (_b = (_a = s) === null || _a === void 0 ? void 0 : _a._id) !== null && _b !== void 0 ? _b : ''; }));\n            const sounds = [];\n            for (const pli of playListIds) {\n                const playlist = playlists().contents.find((pl) => pl._id === pli);\n                if (playlist != null) {\n                    for (const sound of playlist.sounds.contents) {\n                        const clonedSoundData = duplicate(sound);\n                        clonedSoundData._id = RandomUtil.getRandomId();\n                        sounds.push(clonedSoundData);\n                    }\n                }\n            }\n            if (sounds.length > 0) {\n                yield playlistGroup.createEmbeddedDocuments(PlaylistSound.metadata.name, this.toRecords(sounds));\n            }\n        });\n    }\n    static toRecords(arrays) {\n        return arrays.map((d) => (d.toObject != null ? d.toObject() : d));\n    }\n}\n\n;// CONCATENATED MODULE: ./src/main.ts\nvar main_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\nHooks.once('init', () => {\n    initTemplates([\n        'modules/playlist-group/templates/playlist-group-chooser.html',\n        'modules/playlist-group/templates/chooser-action.html',\n    ]);\n});\nHooks.once('ready', () => main_awaiter(void 0, void 0, void 0, function* () {\n    var _a;\n    for (const playlist of playlists().contents) {\n        if ((_a = playlist === null || playlist === void 0 ? void 0 : playlist.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) {\n            yield PlaylistGroup.updatePlaylistGroupSounds(playlist);\n        }\n    }\n}));\nHooks.on('getPlaylistDirectoryEntryContext', (_, options) => {\n    options.push({\n        name: i18nLocalize('PLAYLISTGROUP.playlists.group.edit'),\n        condition: isGM(),\n        icon: '<i class=\"fas fa-edit fa-fw\"></i>',\n        callback: (target) => main_awaiter(void 0, void 0, void 0, function* () {\n            var _a, _b, _c, _d, _e, _f, _g;\n            const id = (_a = target.attr('data-document-id')) !== null && _a !== void 0 ? _a : target.parent().attr('data-document-id');\n            if (id != null) {\n                const playlist = playlists().contents.find((pl) => pl._id === id);\n                if ((_c = (_b = playlist) === null || _b === void 0 ? void 0 : _b.flags) === null || _c === void 0 ? void 0 : _c.playlistGroup) {\n                    yield PlaylistGroupChooser.selectPlaylists((_d = playlist.name) !== null && _d !== void 0 ? _d : '', (_g = (_f = (_e = playlist) === null || _e === void 0 ? void 0 : _e.flags) === null || _f === void 0 ? void 0 : _f.playlists) !== null && _g !== void 0 ? _g : [], (name, ids) => main_awaiter(void 0, void 0, void 0, function* () {\n                        yield playlist.update({\n                            name: name,\n                            flags: {\n                                playlists: ids,\n                            },\n                        });\n                        yield PlaylistGroup.updatePlaylistGroupSounds(playlist);\n                    }));\n                }\n            }\n        }),\n    });\n});\nHooks.on('renderPlaylistConfig', (_, html) => {\n    var _a;\n    const id = html[0].id.replace('playlist-config-', '');\n    if (id != null) {\n        const playlist = playlists().contents.find((pl) => pl._id === id);\n        if ((_a = playlist === null || playlist === void 0 ? void 0 : playlist.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) {\n            html[0].classList.add('playlist-group-config');\n            html.find('.form-group').last().addClass('playlist-group-hide');\n        }\n    }\n});\nHooks.on('createPlaylistSound', (sound) => main_awaiter(void 0, void 0, void 0, function* () {\n    yield PlaylistGroup.updatePlaylistGroupFromSound(sound);\n}));\nHooks.on('deletePlaylistSound', (sound) => main_awaiter(void 0, void 0, void 0, function* () {\n    yield PlaylistGroup.updatePlaylistGroupFromSound(sound);\n}));\nHooks.on('renderPlaylistDirectory', (_, html) => main_awaiter(void 0, void 0, void 0, function* () {\n    if (user().can('ACTOR_CREATE')) {\n        addPlaylistGroupActionButton(html, 'PLAYLISTGROUP.common.add.button', (_) => main_awaiter(void 0, void 0, void 0, function* () {\n            yield PlaylistGroup.createPlaylistGroup();\n        }));\n    }\n    html.find('.playlist-header').each((_, elm) => {\n        var _a, _b, _c;\n        const id = elm.dataset.documentId;\n        if (id != null) {\n            const playlist = playlists().contents.find((pl) => pl._id === id);\n            if ((_a = playlist === null || playlist === void 0 ? void 0 : playlist.flags) === null || _a === void 0 ? void 0 : _a.playlistGroup) {\n                html\n                    .find(elm)\n                    .children()\n                    .first()\n                    .before('<i class=\"fas fa-file-audio playlist-group-icon\"></i>');\n                (_c = (_b = elm === null || elm === void 0 ? void 0 : elm.parentElement) === null || _b === void 0 ? void 0 : _b.classList) === null || _c === void 0 ? void 0 : _c.add('playlist-group');\n                html.find(elm).find('a[data-action=\"sound-create\"]').remove();\n            }\n            else {\n                elm.classList.add('playlist-legacy');\n            }\n        }\n    });\n}));\n// const nativeCollapse = PlaylistDirectory['prototype']['_collapse'];\n//\n// PlaylistDirectory['prototype']['_collapse'] = (el, collapse, speed = 250) => {\n//   console.log(`collapse : ${collapse}`)\n//   nativeCollapse(el, collapse, speed)\n// }\nfunction addPlaylistGroupActionButton(html, label, onClick) {\n    const button = document.createElement('button');\n    button.style.width = '95%';\n    button.innerHTML = i18nLocalize(label);\n    button.addEventListener('click', (event) => {\n        onClick(event);\n    });\n    html.find('.header-actions').after(button);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTU1LmpzIiwibWFwcGluZ3MiOiI7O0FBQU8sTUFBTSxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQU8sSUFBSyxDQUFDLElBQUksQ0FBQztBQUNwQyxNQUFNLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBTyxJQUFLLENBQUMsSUFBSSxDQUFDO0FBQ3BDLE1BQU0sWUFBWSxHQUFHLENBQUMsRUFBVSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDekQsTUFBTSxTQUFTLEdBQUcsR0FBRyxFQUFFLENBQU8sSUFBSyxDQUFDLFNBQVMsQ0FBQztBQUM5QyxNQUFNLGFBQWEsR0FBRyxDQUFDLEtBQWUsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hFLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRSxlQUFDLHVCQUFJLEVBQUUsMENBQUUsSUFBSSxtQ0FBSSxLQUFLLElBQUM7Ozs7Ozs7Ozs7OztBQ1l6QyxNQUFlLGVBQWtDLFNBQVEsZUFHL0Q7SUFHQyxZQUNFLE1BQVksRUFDWixVQUEyQyxFQUFFO1FBRTdDLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFOZixVQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBT3BDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxHQUFHLEVBQUUsQ0FDaEMsc0RBQXNELENBQUM7SUFDM0QsQ0FBQztJQUVNLE1BQU0sS0FBSyxjQUFjO1FBQzlCLE9BQU8sV0FBVyxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQTBCO1lBQy9ELE1BQU0sRUFBRSxNQUFNO1lBQ2QsU0FBUyxFQUFFLElBQUk7WUFDZixhQUFhLEVBQUUsSUFBSTtTQUNwQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRVksS0FBSyxDQUFDLE9BQWdCOzs7OztZQUNqQyxPQUFPLE1BQU0sT0FBTSxLQUFLLFlBQUMsT0FBTyxhQUFQLE9BQU8sY0FBUCxPQUFPLEdBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLENBQUM7S0FBQTtJQUVlLFNBQVMsQ0FDdkIsS0FBWSxFQUNaLE9BQXlDOzs7OztZQUV6QyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDdkIsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ2pDLE1BQU0sT0FBTSxTQUFTLFlBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDM0I7WUFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDN0IsQ0FBQztLQUFBO0lBRVMsY0FBYyxDQUFDLFdBQW9CO1FBQzNDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDekIsQ0FBQztJQUVNLE9BQU87UUFDWixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVNLGlCQUFpQixDQUFDLElBQVk7UUFDbkMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFPLE1BQU0sRUFBRSxFQUFFO1lBQzlELE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ25CLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNaLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQztJQUVTLFdBQVcsQ0FDbkIsSUFBWSxFQUNaLFFBQWdCLEVBQ2hCLE9BQTJDO1FBRTNDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRVMsWUFBWSxDQUNwQixJQUFZLEVBQ1osUUFBZ0IsRUFDaEIsT0FBNEM7UUFFNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFUyxXQUFXLENBQ25CLElBQVksRUFDWixRQUFnQixFQUNoQixPQUEwQztRQUUxQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVTLGFBQWEsQ0FDckIsTUFBYSxFQUNiLFNBQTZCO1FBRTdCLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFUyxFQUFFLEtBQUksQ0FBQztJQU1ULFlBQVk7UUFDbEIsT0FBNEI7WUFDMUIsSUFBSSxFQUFRLEVBQUU7WUFDZCxPQUFPLEVBQUU7Z0JBQ1A7b0JBQ0UsSUFBSSxFQUFFLEtBQUs7b0JBQ1gsS0FBSyxFQUFFLGdDQUFnQztvQkFDdkMsSUFBSSxFQUFFLFVBQVU7b0JBQ2hCLElBQUksRUFBRSxRQUFRO29CQUNkLFFBQVEsRUFBRSxJQUFJLENBQUMsR0FBRztpQkFDbkI7Z0JBQ0Q7b0JBQ0UsSUFBSSxFQUFFLElBQUk7b0JBQ1YsS0FBSyxFQUFFLG9DQUFvQztvQkFDM0MsSUFBSSxFQUFFLFVBQVU7b0JBQ2hCLElBQUksRUFBRSxRQUFRO29CQUNkLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRTtpQkFDbEI7YUFDRjtTQUNGLENBQUM7SUFDSixDQUFDO0NBQ0Y7OztBQ3BJTSxNQUFNLFdBQVc7SUFLdEIsWUFBWSxHQUFXLEVBQUUsS0FBYSxFQUFFLFFBQWlCO1FBQ3ZELElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztDQUNGOzs7Ozs7Ozs7Ozs7QUNWb0Q7QUFDUjtBQUNBO0FBRTdDLE1BQU0sS0FBSztJQUlULFlBQVksSUFBWSxFQUFFLFdBQXFCO1FBQzdDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0lBQ2pDLENBQUM7Q0FDRjtBQUVNLE1BQU0sb0JBQXFCLFNBQVEsZUFNekM7SUFJQyxZQUNFLE1BQWEsRUFDYixRQUEyRCxFQUMzRCxPQUF5QztRQUV6QyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZCLE1BQU0sR0FBRyxHQUFHLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxXQUFDLFFBQUMsU0FBRSxDQUFDLEtBQUssMENBQUUsYUFBYSxLQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDekQsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FDNUIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksV0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUMzRSxDQUFDO1FBQ0YsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUVNLE1BQU0sS0FBSyxjQUFjO1FBQzlCLE9BQU8sV0FBVyxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUU7WUFDdkMsRUFBRSxFQUFFLHdCQUF3QjtZQUM1QixLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLG9DQUFvQyxDQUFDO1lBQzVELFFBQVEsRUFBRSw4REFBOEQ7WUFDeEUsS0FBSyxFQUFFLEdBQUc7U0FDWCxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU0sTUFBTSxDQUFPLGVBQWUsQ0FDakMsUUFBZ0IsRUFDaEIsZUFBeUIsRUFDekIsUUFBMkQ7O1lBRTNELElBQUksb0JBQW9CLENBQ3RCLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUMsRUFDcEMsUUFBUSxDQUNULENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pCLENBQUM7S0FBQTtJQUVNLGlCQUFpQixDQUFDLElBQVk7UUFDbkMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQzlDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLGtCQUFrQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDcEQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO1lBQ2xELElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFO2dCQUNsQyxFQUFFLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLGdCQUFnQixDQUFDO1lBQ2pELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7WUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7Z0JBQ2hFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7Z0JBQ3hELElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO2dCQUMvQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDZjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUMxRCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQztZQUN0QyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzdDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUM5RCxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FDckIsQ0FBQztnQkFDRixJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztnQkFDL0IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ2Y7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFUyxPQUFPLENBQUMsSUFBVzs7UUFDM0IsT0FBTyxXQUFJLGFBQUosSUFBSSx1QkFBSixJQUFJLENBQUUsSUFBSSwwQ0FBRSxNQUFNLElBQUcsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFUyxHQUFHLENBQUMsSUFBVztRQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksYUFBSixJQUFJLHVCQUFKLElBQUksQ0FBRSxJQUFJLEVBQUUsSUFBSSxhQUFKLElBQUksdUJBQUosSUFBSSxDQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFTyxVQUFVLENBQUMsSUFBWTtRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQzlCLENBQUM7SUFFTyx1QkFBdUI7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUNoRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FDN0MsQ0FBQztJQUNKLENBQUM7Q0FDRjs7O0FDN0dNLE1BQU0sVUFBVTtJQUNkLE1BQU0sQ0FBQyxXQUFXO1FBQ3ZCLE9BQU8sUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7Q0FDRjs7Ozs7Ozs7Ozs7O0FDSitEO0FBQ3pCO0FBRUk7QUFHcEMsTUFBTSxhQUFhO0lBQ2pCLE1BQU0sQ0FBTyxtQkFBbUI7O1lBQ3JDLE1BQU0sb0NBQW9DLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFPLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDOztnQkFDdEUsTUFBTSxhQUFhLEdBRUgsTUFBTSxRQUFRLENBQUMsTUFBTSxDQUFDO29CQUNwQyxJQUFJLEVBQUUsSUFBSTtvQkFDVixLQUFLLEVBQUU7d0JBQ0wsYUFBYSxFQUFFLElBQUk7d0JBQ25CLFNBQVMsRUFBRSxHQUFHO3FCQUNmO2lCQUNGLENBQUMsQ0FBQztnQkFDSCxNQUFNLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxhQUFhLGFBQWIsYUFBYSxjQUFiLGFBQWEsR0FBYyxFQUFFLENBQUMsQ0FBQztnQkFFcEUsbUJBQWEsYUFBYixhQUFhLHVCQUFiLGFBQWEsQ0FBRSxLQUFLLDBDQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNyQyxDQUFDLEVBQUMsQ0FBQztRQUNMLENBQUM7S0FBQTtJQUVNLE1BQU0sQ0FBTyw0QkFBNEIsQ0FBQyxLQUFvQjs7WUFDbkUsTUFBTSxRQUFRLEdBQW9CLEtBQUssQ0FBQyxNQUFNLENBQUM7WUFDL0MsSUFBSSxRQUFRLElBQUksSUFBSSxFQUFFO2dCQUNwQixNQUFNLGNBQWMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUNoRCxDQUFDLEVBQUUsRUFBRSxFQUFFOztvQkFDTCxnQkFBRSxhQUFGLEVBQUUsdUJBQUYsRUFBRSxDQUFFLEtBQUssMENBQUUsYUFBYTt5QkFDeEIsY0FBRSxhQUFGLEVBQUUsdUJBQUYsRUFBRSxDQUFFLEtBQUssMENBQUUsU0FBUywwQ0FBRSxRQUFRLENBQU8sUUFBUyxDQUFDLEdBQUcsQ0FBQztpQkFBQSxDQUN0RCxDQUFDO2dCQUNGLEtBQUssTUFBTSxHQUFHLElBQUksY0FBYyxFQUFFO29CQUNoQyxNQUFNLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztpQkFDM0M7YUFDRjtRQUNILENBQUM7S0FBQTtJQUVNLE1BQU0sQ0FBTyx5QkFBeUIsQ0FDM0MsYUFBa0Q7OztZQUVsRCxNQUFNLFdBQVcsR0FBYSxrQkFBTSxhQUFjLDBDQUFFLEtBQUssMENBQUUsU0FBUyxtQ0FBSSxFQUFFLENBQUM7WUFDM0UsTUFBTSxhQUFhLENBQUMsdUJBQXVCLENBQ3pDLGFBQWEsQ0FBQyxZQUFZLEVBQzFCLHlCQUFhLGFBQWIsYUFBYSx1QkFBYixhQUFhLENBQUUsTUFBTSwwQ0FBRSxRQUFRLDBDQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLGVBQUMsbUJBQU0sQ0FBRSwwQ0FBRSxHQUFHLG1DQUFJLEVBQUUsSUFBQyxDQUNqRSxDQUFDO1lBQ0YsTUFBTSxNQUFNLEdBQW9CLEVBQUUsQ0FBQztZQUNuQyxLQUFLLE1BQU0sR0FBRyxJQUFJLFdBQVcsRUFBRTtnQkFDN0IsTUFBTSxRQUFRLEdBQWEsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDbEQsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUN2QixDQUFDO2dCQUNGLElBQUksUUFBUSxJQUFJLElBQUksRUFBRTtvQkFDcEIsS0FBSyxNQUFNLEtBQUssSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTt3QkFDNUMsTUFBTSxlQUFlLEdBQTRCLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDbEUsZUFBZSxDQUFDLEdBQUcsR0FBRyxzQkFBc0IsRUFBRSxDQUFDO3dCQUMvQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO3FCQUM5QjtpQkFDRjthQUNGO1lBQ0QsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDckIsTUFBTSxhQUFhLENBQUMsdUJBQXVCLENBQ3pDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUMzQixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUN2QixDQUFDO2FBQ0g7O0tBQ0Y7SUFFTSxNQUFNLENBQUMsU0FBUyxDQUNyQixNQUFvQztRQUVwQyxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwRSxDQUFDO0NBQ0Y7Ozs7Ozs7Ozs7OztBQ3hFK0U7QUFDL0I7QUFDZTtBQUVoRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7SUFDdEIsYUFBYSxDQUFDO1FBQ1osOERBQThEO1FBQzlELHNEQUFzRDtLQUN2RCxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQVMsRUFBRSxDQUFDOztJQUM5QixLQUFLLE1BQU0sUUFBUSxJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsRUFBRTtRQUMzQyxJQUFJLGNBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxLQUFLLDBDQUFFLGFBQWEsRUFBRTtZQUNsQyxNQUFNLHVDQUF1QyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3pEO0tBQ0Y7QUFDSCxDQUFDLEVBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxFQUFFLENBQUMsa0NBQWtDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLEVBQUU7SUFDMUQsT0FBTyxDQUFDLElBQUksQ0FBQztRQUNYLElBQUksRUFBRSxZQUFZLENBQUMsb0NBQW9DLENBQUM7UUFDeEQsU0FBUyxFQUFFLElBQUksRUFBRTtRQUNqQixJQUFJLEVBQUUsbUNBQW1DO1FBQ3pDLFFBQVEsRUFBRSxDQUFPLE1BQU0sRUFBRSxFQUFFLENBQUM7O1lBQzFCLE1BQU0sRUFBRSxHQUFXLFlBQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsbUNBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQy9GLElBQUksRUFBRSxJQUFJLElBQUksRUFBRTtnQkFDZCxNQUFNLFFBQVEsR0FBYSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUNsRCxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQ3RCLENBQUM7Z0JBQ0YsSUFBSSxZQUFNLFFBQVMsMENBQUUsS0FBSywwQ0FBRSxhQUFhLEVBQUU7b0JBQ3pDLE1BQU0sb0NBQW9DLENBQ3hDLGNBQVEsQ0FBQyxJQUFJLG1DQUFJLEVBQUUsRUFDbkIsa0JBQU0sUUFBUywwQ0FBRSxLQUFLLDBDQUFFLFNBQVMsbUNBQUksRUFBRSxFQUN2QyxDQUFPLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO3dCQUNuQixNQUFNLFFBQVEsQ0FBQyxNQUFNLENBQUM7NEJBQ3BCLElBQUksRUFBRSxJQUFJOzRCQUNWLEtBQUssRUFBRTtnQ0FDTCxTQUFTLEVBQUUsR0FBRzs2QkFDZjt5QkFDRixDQUFDLENBQUM7d0JBQ0gsTUFBTSx1Q0FBdUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDMUQsQ0FBQyxFQUNGLENBQUM7aUJBQ0g7YUFDRjtRQUNILENBQUM7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxFQUFFLENBQUMsc0JBQXNCLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBWSxFQUFFLEVBQUU7O0lBQ25ELE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELElBQUksRUFBRSxJQUFJLElBQUksRUFBRTtRQUNkLE1BQU0sUUFBUSxHQUFHLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDbEUsSUFBSSxjQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsS0FBSywwQ0FBRSxhQUFhLEVBQUU7WUFDbEMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUMvQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1NBQ2pFO0tBQ0Y7QUFDSCxDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssQ0FBQyxFQUFFLENBQUMscUJBQXFCLEVBQUUsQ0FBTyxLQUFvQixFQUFFLEVBQUUsQ0FBQztJQUM5RCxNQUFNLDBDQUEwQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzFELENBQUMsRUFBQyxDQUFDO0FBRUgsS0FBSyxDQUFDLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxDQUFPLEtBQW9CLEVBQUUsRUFBRSxDQUFDO0lBQzlELE1BQU0sMENBQTBDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDMUQsQ0FBQyxFQUFDLENBQUM7QUFFSCxLQUFLLENBQUMsRUFBRSxDQUNOLHlCQUF5QixFQUN6QixDQUFPLENBQW9CLEVBQUUsSUFBWSxFQUFFLEVBQUUsQ0FBQztJQUM1QyxJQUFJLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsRUFBRTtRQUM5Qiw0QkFBNEIsQ0FDMUIsSUFBSSxFQUNKLGlDQUFpQyxFQUNqQyxDQUFPLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDWCxNQUFNLGlDQUFpQyxFQUFFLENBQUM7UUFDNUMsQ0FBQyxFQUNGLENBQUM7S0FDSDtJQUVELElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUU7O1FBQzVDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ2xDLElBQUksRUFBRSxJQUFJLElBQUksRUFBRTtZQUNkLE1BQU0sUUFBUSxHQUFHLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDbEUsSUFBSSxjQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsS0FBSywwQ0FBRSxhQUFhLEVBQUU7Z0JBQ2xDLElBQUk7cUJBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQztxQkFDVCxRQUFRLEVBQUU7cUJBQ1YsS0FBSyxFQUFFO3FCQUNQLE1BQU0sQ0FBQyx1REFBdUQsQ0FBQyxDQUFDO2dCQUNuRSxlQUFHLGFBQUgsR0FBRyx1QkFBSCxHQUFHLENBQUUsYUFBYSwwQ0FBRSxTQUFTLDBDQUFFLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUNyRCxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQy9EO2lCQUFNO2dCQUNMLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7YUFDdEM7U0FDRjtJQUNILENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxFQUNGLENBQUM7QUFFRixzRUFBc0U7QUFDdEUsRUFBRTtBQUNGLGlGQUFpRjtBQUNqRiwwQ0FBMEM7QUFDMUMsd0NBQXdDO0FBQ3hDLElBQUk7QUFFSixTQUFTLDRCQUE0QixDQUNuQyxJQUFZLEVBQ1osS0FBYSxFQUNiLE9BQW9DO0lBRXBDLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQzNCLE1BQU0sQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUN6QyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUM7SUFDSCxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2NyL2J1aWxkcy9ncmVlbnNraW4tZm91bmRyeXZ0dC9wbGF5bGlzdC1ncm91cC9zcmMvY29uc3RhbnQudHM/Mzg5YyIsIndlYnBhY2s6Ly8vc2NyL2J1aWxkcy9ncmVlbnNraW4tZm91bmRyeXZ0dC9wbGF5bGlzdC1ncm91cC9zcmMvYWJzdHJhY3QtY2hvb3Nlci50cz8zMDgwIiwid2VicGFjazovLy9zY3IvYnVpbGRzL2dyZWVuc2tpbi1mb3VuZHJ5dnR0L3BsYXlsaXN0LWdyb3VwL3NyYy9zZWxlY3QtbW9kZWwudHM/NjBlNyIsIndlYnBhY2s6Ly8vc2NyL2J1aWxkcy9ncmVlbnNraW4tZm91bmRyeXZ0dC9wbGF5bGlzdC1ncm91cC9zcmMvcGxheWxpc3QtZ3JvdXAtY2hvb3Nlci50cz81MmUzIiwid2VicGFjazovLy9zY3IvYnVpbGRzL2dyZWVuc2tpbi1mb3VuZHJ5dnR0L3BsYXlsaXN0LWdyb3VwL3NyYy9yYW5kb20tdXRpbC50cz9iNmIwIiwid2VicGFjazovLy9zY3IvYnVpbGRzL2dyZWVuc2tpbi1mb3VuZHJ5dnR0L3BsYXlsaXN0LWdyb3VwL3NyYy9wbGF5bGlzdC1ncm91cC50cz84NDZlIiwid2VicGFjazovLy9zY3IvYnVpbGRzL2dyZWVuc2tpbi1mb3VuZHJ5dnR0L3BsYXlsaXN0LWdyb3VwL3NyYy9tYWluLnRzPzUyMGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHVzZXIgPSAoKSA9PiAoPGFueT5nYW1lKS51c2VyO1xuZXhwb3J0IGNvbnN0IGkxOG4gPSAoKSA9PiAoPGFueT5nYW1lKS5pMThuO1xuZXhwb3J0IGNvbnN0IGkxOG5Mb2NhbGl6ZSA9IChpZDogc3RyaW5nKSA9PiBpMThuKCkubG9jYWxpemUoaWQpO1xuZXhwb3J0IGNvbnN0IHBsYXlsaXN0cyA9ICgpID0+ICg8YW55PmdhbWUpLnBsYXlsaXN0cztcbmV4cG9ydCBjb25zdCBpbml0VGVtcGxhdGVzID0gKHBhdGhzOiBzdHJpbmdbXSkgPT4gbG9hZFRlbXBsYXRlcyhwYXRocyk7XG5leHBvcnQgY29uc3QgaXNHTSA9ICgpID0+IHVzZXIoKT8uaXNHTSA/PyBmYWxzZTtcbiIsImRlY2xhcmUgdHlwZSBNb2RlbDxEQVRBPiA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgYnV0dG9uc1RlbXBsYXRlOiAoKSA9PiBzdHJpbmc7XG4gIHdvcmxkSWNvblRlbXBsYXRlOiAoKSA9PiBzdHJpbmc7XG4gIHdvcmxkTGFiZWxUZW1wbGF0ZTogKCkgPT4gc3RyaW5nO1xuICBhY3Rpb25zOiBBY3Rpb25zPERBVEE+O1xuICBkYXRhOiBEQVRBO1xufTtcblxuZGVjbGFyZSB0eXBlIEFjdGlvbnM8REFUQT4gPSB7XG4gIG5hbWU6ICd5ZXMnIHwgJ25vJyB8ICdwcmV2aW91cyc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbiAgdHlwZTogJ3N1Ym1pdCcgfCAnYnV0dG9uJztcbiAgY2FsbGJhY2s6IChkYXRhPzogREFUQSkgPT4gdm9pZDtcbn1bXTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0Q2hvb3NlcjxEQVRBLCBNT0RFTCA9IHt9PiBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbjxcbiAgRm9ybUFwcGxpY2F0aW9uT3B0aW9ucyxcbiAgRm9ybUFwcGxpY2F0aW9uLkRhdGE8REFUQSwgRm9ybUFwcGxpY2F0aW9uT3B0aW9ucz5cbj4ge1xuICBwcm90ZWN0ZWQgbW9kZWwgPSB0aGlzLmdldEluaXRNb2RlbCgpO1xuXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihcbiAgICBvYmplY3Q6IERBVEEsXG4gICAgb3B0aW9uczogUGFydGlhbDxGb3JtQXBwbGljYXRpb25PcHRpb25zPiA9IHt9XG4gICkge1xuICAgIHN1cGVyKG9iamVjdCwgb3B0aW9ucyk7XG4gICAgdGhpcy5tb2RlbC5kYXRhID0gdGhpcy5vYmplY3Q7XG4gICAgdGhpcy5tb2RlbC5pZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRoaXMubW9kZWwuYnV0dG9uc1RlbXBsYXRlID0gKCkgPT5cbiAgICAgIGBtb2R1bGVzL3BsYXlsaXN0LWdyb3VwL3RlbXBsYXRlcy9jaG9vc2VyLWFjdGlvbi5odG1sYDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zKCk6IEZvcm1BcHBsaWNhdGlvbk9wdGlvbnMge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywgPEZvcm1BcHBsaWNhdGlvbk9wdGlvbnM+e1xuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICBjbG9zZU9uU3VibWl0OiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNsb3NlKG9wdGlvbnM/OiBvYmplY3QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gYXdhaXQgc3VwZXIuY2xvc2Uob3B0aW9ucyA/PyB7IHN1Ym1pdDogZmFsc2UsIGZvcmNlOiB0cnVlIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9vblN1Ym1pdChcbiAgICBldmVudDogRXZlbnQsXG4gICAgb3B0aW9ucz86IEZvcm1BcHBsaWNhdGlvbi5PblN1Ym1pdE9wdGlvbnNcbiAgKTogUHJvbWlzZTxQYXJ0aWFsPFJlY29yZDxzdHJpbmcsIHVua25vd24+Pj4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCh0aGlzLm1vZGVsLmRhdGEpKSB7XG4gICAgICBhd2FpdCBzdXBlci5fb25TdWJtaXQoZXZlbnQsIG9wdGlvbnMpO1xuICAgICAgdGhpcy55ZXModGhpcy5tb2RlbC5kYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2dldFN1Ym1pdERhdGEoX3VwZGF0ZURhdGE/OiBvYmplY3QpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsLmRhdGE7XG4gIH1cblxuICBwdWJsaWMgZ2V0RGF0YSgpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICB9XG5cbiAgcHVibGljIGFjdGl2YXRlTGlzdGVuZXJzKGh0bWw6IEpRdWVyeSkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpO1xuICAgIHRoaXMuaGFuZGxlQ2xpY2soaHRtbCwgYCMke3RoaXMubW9kZWwuaWR9LW5vYCwgYXN5bmMgKF9ldmVudCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5ubygpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGhhbmRsZUNsaWNrKFxuICAgIGh0bWw6IEpRdWVyeSxcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxuICAgIGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkNsaWNrRXZlbnQpID0+IHZvaWRcbiAgKSB7XG4gICAgaHRtbC5maW5kKHNlbGVjdG9yKS5vbignY2xpY2snLCBoYW5kbGVyKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYW5kbGVDaGFuZ2UoXG4gICAgaHRtbDogSlF1ZXJ5LFxuICAgIHNlbGVjdG9yOiBzdHJpbmcsXG4gICAgaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuQ2hhbmdlRXZlbnQpID0+IHZvaWRcbiAgKSB7XG4gICAgaHRtbC5maW5kKHNlbGVjdG9yKS5vbignY2hhbmdlJywgaGFuZGxlcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgaGFuZGxlSW5wdXQoXG4gICAgaHRtbDogSlF1ZXJ5LFxuICAgIHNlbGVjdG9yOiBzdHJpbmcsXG4gICAgaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnRCYXNlKSA9PiB2b2lkXG4gICkge1xuICAgIGh0bWwuZmluZChzZWxlY3Rvcikub24oJ2lucHV0JywgaGFuZGxlcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3VwZGF0ZU9iamVjdChcbiAgICBfZXZlbnQ6IEV2ZW50LFxuICAgIF9mb3JtRGF0YTogb2JqZWN0IHwgdW5kZWZpbmVkXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBubygpIHt9XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGlzVmFsaWQoZGF0YTogREFUQSk6IGJvb2xlYW47XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHllcyhkYXRhOiBEQVRBKTtcblxuICBwcml2YXRlIGdldEluaXRNb2RlbCgpOiBNb2RlbDxEQVRBPiAmIE1PREVMIHtcbiAgICByZXR1cm4gPE1vZGVsPERBVEE+ICYgTU9ERUw+e1xuICAgICAgZGF0YTogPERBVEE+e30sXG4gICAgICBhY3Rpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAneWVzJyxcbiAgICAgICAgICBsYWJlbDogJ1BMQVlMSVNUR1JPVVAuY29tbW9uLmJ1dHRvbi5PSycsXG4gICAgICAgICAgaWNvbjogJ2ZhLWNoZWNrJyxcbiAgICAgICAgICB0eXBlOiAnc3VibWl0JyxcbiAgICAgICAgICBjYWxsYmFjazogdGhpcy55ZXMsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnbm8nLFxuICAgICAgICAgIGxhYmVsOiAnUExBWUxJU1RHUk9VUC5jb21tb24uYnV0dG9uLkNhbmNlbCcsXG4gICAgICAgICAgaWNvbjogJ2ZhLXRpbWVzJyxcbiAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICBjYWxsYmFjazogdGhpcy5ubyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNlbGVjdE1vZGVsIHtcbiAgcHVibGljIGtleTogc3RyaW5nO1xuICBwdWJsaWMgdmFsdWU6IHN0cmluZztcbiAgcHVibGljIHNlbGVjdGVkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikge1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFic3RyYWN0Q2hvb3NlciB9IGZyb20gJy4vYWJzdHJhY3QtY2hvb3Nlcic7XG5pbXBvcnQgeyBpMThuLCBwbGF5bGlzdHMgfSBmcm9tICcuL2NvbnN0YW50JztcbmltcG9ydCB7IFNlbGVjdE1vZGVsIH0gZnJvbSAnLi9zZWxlY3QtbW9kZWwnO1xuXG5jbGFzcyBNb2RlbCB7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBwbGF5bGlzdElkczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBwbGF5bGlzdElkczogc3RyaW5nW10pIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMucGxheWxpc3RJZHMgPSBwbGF5bGlzdElkcztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGxheWxpc3RHcm91cENob29zZXIgZXh0ZW5kcyBBYnN0cmFjdENob29zZXI8XG4gIE1vZGVsLFxuICB7XG4gICAgcGxheWxpc3RzOiBTZWxlY3RNb2RlbFtdO1xuICAgIHNlbGVjdGVkUGxheWxpc3RzOiBTZWxlY3RNb2RlbFtdO1xuICB9XG4+IHtcbiAgcHJpdmF0ZSBjYWxsYmFjazogKG5hbWU6IHN0cmluZywgaW5pdFBsYXlsaXN0SWRzOiBzdHJpbmdbXSkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBzZWxlY3RlZFBsYXlsaXN0OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb2JqZWN0OiBNb2RlbCxcbiAgICBjYWxsYmFjazogKG5hbWU6IHN0cmluZywgaW5pdFBsYXlsaXN0SWRzOiBzdHJpbmdbXSkgPT4gdm9pZCxcbiAgICBvcHRpb25zPzogUGFydGlhbDxGb3JtQXBwbGljYXRpb25PcHRpb25zPlxuICApIHtcbiAgICBzdXBlcihvYmplY3QsIG9wdGlvbnMpO1xuICAgIGNvbnN0IHBscyA9IHBsYXlsaXN0cygpLmNvbnRlbnRzLmZpbHRlcigocGwpID0+ICFwbC5mbGFncz8ucGxheWxpc3RHcm91cCk7XG4gICAgdGhpcy5zZWxlY3RlZFBsYXlsaXN0ID0gcGxzLmxlbmd0aCA+IDAgPyBwbHNbMF0uX2lkIDogJyc7XG4gICAgdGhpcy5tb2RlbC5wbGF5bGlzdHMgPSBwbHMubWFwKFxuICAgICAgKHBsKSA9PiBuZXcgU2VsZWN0TW9kZWwocGwuX2lkLCBwbC5uYW1lLCB0aGlzLnNlbGVjdGVkUGxheWxpc3QgPT09IHBsLl9pZClcbiAgICApO1xuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRQbGF5bGlzdHMoKTtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpOiBGb3JtQXBwbGljYXRpb25PcHRpb25zIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAncGxheWxpc3QtZ3JvdXAtY2hvb3NlcicsXG4gICAgICB0aXRsZTogaTE4bigpLmxvY2FsaXplKCdQTEFZTElTVEdST1VQLnBsYXlsaXN0cy5ncm91cC5lZGl0JyksXG4gICAgICB0ZW1wbGF0ZTogYG1vZHVsZXMvcGxheWxpc3QtZ3JvdXAvdGVtcGxhdGVzL3BsYXlsaXN0LWdyb3VwLWNob29zZXIuaHRtbGAsXG4gICAgICB3aWR0aDogNDAwLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBzZWxlY3RQbGF5bGlzdHMoXG4gICAgaW5pdE5hbWU6IHN0cmluZyxcbiAgICBpbml0UGxheWxpc3RJZHM6IHN0cmluZ1tdLFxuICAgIGNhbGxiYWNrOiAobmFtZTogc3RyaW5nLCBpbml0UGxheWxpc3RJZHM6IHN0cmluZ1tdKSA9PiB2b2lkXG4gICkge1xuICAgIG5ldyBQbGF5bGlzdEdyb3VwQ2hvb3NlcihcbiAgICAgIG5ldyBNb2RlbChpbml0TmFtZSwgaW5pdFBsYXlsaXN0SWRzKSxcbiAgICAgIGNhbGxiYWNrXG4gICAgKS5yZW5kZXIodHJ1ZSk7XG4gIH1cblxuICBwdWJsaWMgYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbDogSlF1ZXJ5KSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbCk7XG4gICAgdGhpcy5oYW5kbGVDaGFuZ2UoaHRtbCwgJyNuYW1lSW5wdXQnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlTmFtZShldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaGFuZGxlQ2hhbmdlKGh0bWwsICcjc2VsZWN0UGxheWxpc3RzJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnNlbGVjdGVkUGxheWxpc3QgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlO1xuICAgICAgdGhpcy5tb2RlbC5wbGF5bGlzdHMuZm9yRWFjaCgocGwpID0+IHtcbiAgICAgICAgcGwuc2VsZWN0ZWQgPSBwbC5rZXkgPT09IHRoaXMuc2VsZWN0ZWRQbGF5bGlzdDtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5oYW5kbGVDbGljayhodG1sLCAnI2FkZFBsYXlsaXN0QnV0dG9uJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLm1vZGVsLmRhdGEucGxheWxpc3RJZHMuaW5jbHVkZXModGhpcy5zZWxlY3RlZFBsYXlsaXN0KSkge1xuICAgICAgICB0aGlzLm1vZGVsLmRhdGEucGxheWxpc3RJZHMucHVzaCh0aGlzLnNlbGVjdGVkUGxheWxpc3QpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkUGxheWxpc3RzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmhhbmRsZUNsaWNrKGh0bWwsICcucmVtb3ZlLXBsYXlsaXN0LWJ1dHRvbicsIChldmVudCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgIGlmICh0aGlzLm1vZGVsLmRhdGEucGxheWxpc3RJZHMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICB0aGlzLm1vZGVsLmRhdGEucGxheWxpc3RJZHMgPSB0aGlzLm1vZGVsLmRhdGEucGxheWxpc3RJZHMuZmlsdGVyKFxuICAgICAgICAgIChwbGkpID0+IHBsaSAhPT0ga2V5XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRQbGF5bGlzdHMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBpc1ZhbGlkKGRhdGE6IE1vZGVsKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGRhdGE/Lm5hbWU/Lmxlbmd0aCA+IDA7XG4gIH1cblxuICBwcm90ZWN0ZWQgeWVzKGRhdGE6IE1vZGVsKSB7XG4gICAgdGhpcy5jYWxsYmFjayhkYXRhPy5uYW1lLCBkYXRhPy5wbGF5bGlzdElkcyk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU5hbWUobmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5tb2RlbC5kYXRhLm5hbWUgPSBuYW1lO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTZWxlY3RlZFBsYXlsaXN0cygpIHtcbiAgICB0aGlzLm1vZGVsLnNlbGVjdGVkUGxheWxpc3RzID0gdGhpcy5tb2RlbC5wbGF5bGlzdHMuZmlsdGVyKChwbCkgPT5cbiAgICAgIHRoaXMubW9kZWwuZGF0YS5wbGF5bGlzdElkcy5pbmNsdWRlcyhwbC5rZXkpXG4gICAgKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFJhbmRvbVV0aWwge1xuICBwdWJsaWMgc3RhdGljIGdldFJhbmRvbUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHJhbmRvbUlEKDE2KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGxheWxpc3RHcm91cENob29zZXIgfSBmcm9tICcuL3BsYXlsaXN0LWdyb3VwLWNob29zZXInO1xuaW1wb3J0IHsgcGxheWxpc3RzIH0gZnJvbSAnLi9jb25zdGFudCc7XG5pbXBvcnQgeyBQbGF5bGlzdFNvdW5kRGF0YSB9IGZyb20gJ0BsZWFndWUtb2YtZm91bmRyeS1kZXZlbG9wZXJzL2ZvdW5kcnktdnR0LXR5cGVzL3NyYy9mb3VuZHJ5L2NvbW1vbi9kYXRhL2RhdGEubWpzJztcbmltcG9ydCB7IFJhbmRvbVV0aWwgfSBmcm9tICcuL3JhbmRvbS11dGlsJztcbmltcG9ydCB7IERvY3VtZW50RGF0YSB9IGZyb20gJ0BsZWFndWUtb2YtZm91bmRyeS1kZXZlbG9wZXJzL2ZvdW5kcnktdnR0LXR5cGVzL3NyYy9mb3VuZHJ5L2NvbW1vbi9hYnN0cmFjdC9tb2R1bGUubWpzJztcblxuZXhwb3J0IGNsYXNzIFBsYXlsaXN0R3JvdXAge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZVBsYXlsaXN0R3JvdXAoKSB7XG4gICAgYXdhaXQgUGxheWxpc3RHcm91cENob29zZXIuc2VsZWN0UGxheWxpc3RzKCcnLCBbXSwgYXN5bmMgKG5hbWUsIGlkcykgPT4ge1xuICAgICAgY29uc3QgcGxheWxpc3RHcm91cDpcbiAgICAgICAgfCBTdG9yZWREb2N1bWVudDxQbGF5bGlzdD5cbiAgICAgICAgfCB1bmRlZmluZWQgPSBhd2FpdCBQbGF5bGlzdC5jcmVhdGUoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBmbGFnczoge1xuICAgICAgICAgIHBsYXlsaXN0R3JvdXA6IHRydWUsXG4gICAgICAgICAgcGxheWxpc3RzOiBpZHMsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGxheWxpc3RHcm91cFNvdW5kcyhwbGF5bGlzdEdyb3VwID8/IDxQbGF5bGlzdD57fSk7XG5cbiAgICAgIHBsYXlsaXN0R3JvdXA/LnNoZWV0Py5yZW5kZXIodHJ1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHVwZGF0ZVBsYXlsaXN0R3JvdXBGcm9tU291bmQoc291bmQ6IFBsYXlsaXN0U291bmQpIHtcbiAgICBjb25zdCBwbGF5bGlzdDogUGxheWxpc3QgfCBudWxsID0gc291bmQucGFyZW50O1xuICAgIGlmIChwbGF5bGlzdCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBwbGF5bGlzdEdyb3VwcyA9IHBsYXlsaXN0cygpLmNvbnRlbnRzLmZpbHRlcihcbiAgICAgICAgKHBsKSA9PlxuICAgICAgICAgIHBsPy5mbGFncz8ucGxheWxpc3RHcm91cCAmJlxuICAgICAgICAgIHBsPy5mbGFncz8ucGxheWxpc3RzPy5pbmNsdWRlcygoPGFueT5wbGF5bGlzdCkuX2lkKVxuICAgICAgKTtcbiAgICAgIGZvciAoY29uc3QgcGxnIG9mIHBsYXlsaXN0R3JvdXBzKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGxheWxpc3RHcm91cFNvdW5kcyhwbGcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUGxheWxpc3RHcm91cFNvdW5kcyhcbiAgICBwbGF5bGlzdEdyb3VwOiBQbGF5bGlzdCB8IFN0b3JlZERvY3VtZW50PFBsYXlsaXN0PlxuICApIHtcbiAgICBjb25zdCBwbGF5TGlzdElkczogc3RyaW5nW10gPSAoPGFueT5wbGF5bGlzdEdyb3VwKT8uZmxhZ3M/LnBsYXlsaXN0cyA/PyBbXTtcbiAgICBhd2FpdCBwbGF5bGlzdEdyb3VwLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgUGxheWxpc3RTb3VuZC5kb2N1bWVudE5hbWUsXG4gICAgICBwbGF5bGlzdEdyb3VwPy5zb3VuZHM/LmNvbnRlbnRzPy5tYXAoKHMpID0+ICg8YW55PnMpPy5faWQgPz8gJycpXG4gICAgKTtcbiAgICBjb25zdCBzb3VuZHM6IFBsYXlsaXN0U291bmRbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgcGxpIG9mIHBsYXlMaXN0SWRzKSB7XG4gICAgICBjb25zdCBwbGF5bGlzdDogUGxheWxpc3QgPSBwbGF5bGlzdHMoKS5jb250ZW50cy5maW5kKFxuICAgICAgICAocGwpID0+IHBsLl9pZCA9PT0gcGxpXG4gICAgICApO1xuICAgICAgaWYgKHBsYXlsaXN0ICE9IG51bGwpIHtcbiAgICAgICAgZm9yIChjb25zdCBzb3VuZCBvZiBwbGF5bGlzdC5zb3VuZHMuY29udGVudHMpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWRTb3VuZERhdGE6IFBsYXlsaXN0U291bmREYXRhICYgYW55ID0gZHVwbGljYXRlKHNvdW5kKTtcbiAgICAgICAgICBjbG9uZWRTb3VuZERhdGEuX2lkID0gUmFuZG9tVXRpbC5nZXRSYW5kb21JZCgpO1xuICAgICAgICAgIHNvdW5kcy5wdXNoKGNsb25lZFNvdW5kRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNvdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCBwbGF5bGlzdEdyb3VwLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICBQbGF5bGlzdFNvdW5kLm1ldGFkYXRhLm5hbWUsXG4gICAgICAgIHRoaXMudG9SZWNvcmRzKHNvdW5kcylcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyB0b1JlY29yZHM8RSwgRiBleHRlbmRzIG9iamVjdD4oXG4gICAgYXJyYXlzOiAoRG9jdW1lbnREYXRhPEUsIEY+ICYgYW55KVtdXG4gICk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+W10ge1xuICAgIHJldHVybiBhcnJheXMubWFwKChkKSA9PiAoZC50b09iamVjdCAhPSBudWxsID8gZC50b09iamVjdCgpIDogZCkpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBpMThuTG9jYWxpemUsIGluaXRUZW1wbGF0ZXMsIGlzR00sIHBsYXlsaXN0cywgdXNlciB9IGZyb20gJy4vY29uc3RhbnQnO1xuaW1wb3J0IHsgUGxheWxpc3RHcm91cCB9IGZyb20gJy4vcGxheWxpc3QtZ3JvdXAnO1xuaW1wb3J0IHsgUGxheWxpc3RHcm91cENob29zZXIgfSBmcm9tICcuL3BsYXlsaXN0LWdyb3VwLWNob29zZXInO1xuXG5Ib29rcy5vbmNlKCdpbml0JywgKCkgPT4ge1xuICBpbml0VGVtcGxhdGVzKFtcbiAgICAnbW9kdWxlcy9wbGF5bGlzdC1ncm91cC90ZW1wbGF0ZXMvcGxheWxpc3QtZ3JvdXAtY2hvb3Nlci5odG1sJyxcbiAgICAnbW9kdWxlcy9wbGF5bGlzdC1ncm91cC90ZW1wbGF0ZXMvY2hvb3Nlci1hY3Rpb24uaHRtbCcsXG4gIF0pO1xufSk7XG5cbkhvb2tzLm9uY2UoJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICBmb3IgKGNvbnN0IHBsYXlsaXN0IG9mIHBsYXlsaXN0cygpLmNvbnRlbnRzKSB7XG4gICAgaWYgKHBsYXlsaXN0Py5mbGFncz8ucGxheWxpc3RHcm91cCkge1xuICAgICAgYXdhaXQgUGxheWxpc3RHcm91cC51cGRhdGVQbGF5bGlzdEdyb3VwU291bmRzKHBsYXlsaXN0KTtcbiAgICB9XG4gIH1cbn0pO1xuXG5Ib29rcy5vbignZ2V0UGxheWxpc3REaXJlY3RvcnlFbnRyeUNvbnRleHQnLCAoXywgb3B0aW9ucykgPT4ge1xuICBvcHRpb25zLnB1c2goe1xuICAgIG5hbWU6IGkxOG5Mb2NhbGl6ZSgnUExBWUxJU1RHUk9VUC5wbGF5bGlzdHMuZ3JvdXAuZWRpdCcpLFxuICAgIGNvbmRpdGlvbjogaXNHTSgpLFxuICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1lZGl0IGZhLWZ3XCI+PC9pPicsXG4gICAgY2FsbGJhY2s6IGFzeW5jICh0YXJnZXQpID0+IHtcbiAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSB0YXJnZXQuYXR0cignZGF0YS1kb2N1bWVudC1pZCcpID8/IHRhcmdldC5wYXJlbnQoKS5hdHRyKCdkYXRhLWRvY3VtZW50LWlkJyk7XG4gICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBwbGF5bGlzdDogUGxheWxpc3QgPSBwbGF5bGlzdHMoKS5jb250ZW50cy5maW5kKFxuICAgICAgICAgIChwbCkgPT4gcGwuX2lkID09PSBpZFxuICAgICAgICApO1xuICAgICAgICBpZiAoKDxhbnk+cGxheWxpc3QpPy5mbGFncz8ucGxheWxpc3RHcm91cCkge1xuICAgICAgICAgIGF3YWl0IFBsYXlsaXN0R3JvdXBDaG9vc2VyLnNlbGVjdFBsYXlsaXN0cyhcbiAgICAgICAgICAgIHBsYXlsaXN0Lm5hbWUgPz8gJycsXG4gICAgICAgICAgICAoPGFueT5wbGF5bGlzdCk/LmZsYWdzPy5wbGF5bGlzdHMgPz8gW10sXG4gICAgICAgICAgICBhc3luYyAobmFtZSwgaWRzKSA9PiB7XG4gICAgICAgICAgICAgIGF3YWl0IHBsYXlsaXN0LnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgcGxheWxpc3RzOiBpZHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGF3YWl0IFBsYXlsaXN0R3JvdXAudXBkYXRlUGxheWxpc3RHcm91cFNvdW5kcyhwbGF5bGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH0pO1xufSk7XG5cbkhvb2tzLm9uKCdyZW5kZXJQbGF5bGlzdENvbmZpZycsIChfLCBodG1sOiBKUXVlcnkpID0+IHtcbiAgY29uc3QgaWQgPSBodG1sWzBdLmlkLnJlcGxhY2UoJ3BsYXlsaXN0LWNvbmZpZy0nLCAnJyk7XG4gIGlmIChpZCAhPSBudWxsKSB7XG4gICAgY29uc3QgcGxheWxpc3QgPSBwbGF5bGlzdHMoKS5jb250ZW50cy5maW5kKChwbCkgPT4gcGwuX2lkID09PSBpZCk7XG4gICAgaWYgKHBsYXlsaXN0Py5mbGFncz8ucGxheWxpc3RHcm91cCkge1xuICAgICAgaHRtbFswXS5jbGFzc0xpc3QuYWRkKCdwbGF5bGlzdC1ncm91cC1jb25maWcnKTtcbiAgICAgIGh0bWwuZmluZCgnLmZvcm0tZ3JvdXAnKS5sYXN0KCkuYWRkQ2xhc3MoJ3BsYXlsaXN0LWdyb3VwLWhpZGUnKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5Ib29rcy5vbignY3JlYXRlUGxheWxpc3RTb3VuZCcsIGFzeW5jIChzb3VuZDogUGxheWxpc3RTb3VuZCkgPT4ge1xuICBhd2FpdCBQbGF5bGlzdEdyb3VwLnVwZGF0ZVBsYXlsaXN0R3JvdXBGcm9tU291bmQoc291bmQpO1xufSk7XG5cbkhvb2tzLm9uKCdkZWxldGVQbGF5bGlzdFNvdW5kJywgYXN5bmMgKHNvdW5kOiBQbGF5bGlzdFNvdW5kKSA9PiB7XG4gIGF3YWl0IFBsYXlsaXN0R3JvdXAudXBkYXRlUGxheWxpc3RHcm91cEZyb21Tb3VuZChzb3VuZCk7XG59KTtcblxuSG9va3Mub24oXG4gICdyZW5kZXJQbGF5bGlzdERpcmVjdG9yeScsXG4gIGFzeW5jIChfOiBQbGF5bGlzdERpcmVjdG9yeSwgaHRtbDogSlF1ZXJ5KSA9PiB7XG4gICAgaWYgKHVzZXIoKS5jYW4oJ0FDVE9SX0NSRUFURScpKSB7XG4gICAgICBhZGRQbGF5bGlzdEdyb3VwQWN0aW9uQnV0dG9uKFxuICAgICAgICBodG1sLFxuICAgICAgICAnUExBWUxJU1RHUk9VUC5jb21tb24uYWRkLmJ1dHRvbicsXG4gICAgICAgIGFzeW5jIChfKSA9PiB7XG4gICAgICAgICAgYXdhaXQgUGxheWxpc3RHcm91cC5jcmVhdGVQbGF5bGlzdEdyb3VwKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaHRtbC5maW5kKCcucGxheWxpc3QtaGVhZGVyJykuZWFjaCgoXywgZWxtKSA9PiB7XG4gICAgICBjb25zdCBpZCA9IGVsbS5kYXRhc2V0LmRvY3VtZW50SWQ7XG4gICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBwbGF5bGlzdCA9IHBsYXlsaXN0cygpLmNvbnRlbnRzLmZpbmQoKHBsKSA9PiBwbC5faWQgPT09IGlkKTtcbiAgICAgICAgaWYgKHBsYXlsaXN0Py5mbGFncz8ucGxheWxpc3RHcm91cCkge1xuICAgICAgICAgIGh0bWxcbiAgICAgICAgICAgIC5maW5kKGVsbSlcbiAgICAgICAgICAgIC5jaGlsZHJlbigpXG4gICAgICAgICAgICAuZmlyc3QoKVxuICAgICAgICAgICAgLmJlZm9yZSgnPGkgY2xhc3M9XCJmYXMgZmEtZmlsZS1hdWRpbyBwbGF5bGlzdC1ncm91cC1pY29uXCI+PC9pPicpO1xuICAgICAgICAgIGVsbT8ucGFyZW50RWxlbWVudD8uY2xhc3NMaXN0Py5hZGQoJ3BsYXlsaXN0LWdyb3VwJyk7XG4gICAgICAgICAgaHRtbC5maW5kKGVsbSkuZmluZCgnYVtkYXRhLWFjdGlvbj1cInNvdW5kLWNyZWF0ZVwiXScpLnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsbS5jbGFzc0xpc3QuYWRkKCdwbGF5bGlzdC1sZWdhY3knKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4pO1xuXG4vLyBjb25zdCBuYXRpdmVDb2xsYXBzZSA9IFBsYXlsaXN0RGlyZWN0b3J5Wydwcm90b3R5cGUnXVsnX2NvbGxhcHNlJ107XG4vL1xuLy8gUGxheWxpc3REaXJlY3RvcnlbJ3Byb3RvdHlwZSddWydfY29sbGFwc2UnXSA9IChlbCwgY29sbGFwc2UsIHNwZWVkID0gMjUwKSA9PiB7XG4vLyAgIGNvbnNvbGUubG9nKGBjb2xsYXBzZSA6ICR7Y29sbGFwc2V9YClcbi8vICAgbmF0aXZlQ29sbGFwc2UoZWwsIGNvbGxhcHNlLCBzcGVlZClcbi8vIH1cblxuZnVuY3Rpb24gYWRkUGxheWxpc3RHcm91cEFjdGlvbkJ1dHRvbihcbiAgaHRtbDogSlF1ZXJ5LFxuICBsYWJlbDogc3RyaW5nLFxuICBvbkNsaWNrOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWRcbikge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgYnV0dG9uLnN0eWxlLndpZHRoID0gJzk1JSc7XG4gIGJ1dHRvbi5pbm5lckhUTUwgPSBpMThuTG9jYWxpemUobGFiZWwpO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICBvbkNsaWNrKGV2ZW50KTtcbiAgfSk7XG4gIGh0bWwuZmluZCgnLmhlYWRlci1hY3Rpb25zJykuYWZ0ZXIoYnV0dG9uKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///555\n")}},__webpack_exports__={};__webpack_modules__[555]()})();