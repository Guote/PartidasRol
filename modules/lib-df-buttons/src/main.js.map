{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///../common/Settings.ts","webpack:///./src/ControlManager.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/lib-df-buttons.ts"],"sourcesContent":["\ndeclare global {\n\tinterface LenientGlobalVariableTypes {\n\t\tgame: never;\n\t\tcanvas: never;\n\t}\n\tinterface String {\n\t\t/** Localizes the string via the global `game.i18n.localize()` function. */\n\t\tlocalize(): string\n\t}\n\ttype AnyFunction = (...args: any) => any;\n}\n\nexport default class SETTINGS {\n\tstatic MOD_NAME: string;\n\tstatic init(moduleName: string) {\n\t\tthis.MOD_NAME = moduleName;\n\t\tif (!String.prototype.localize) {\n\t\t\tString.prototype.localize = function () {\n\t\t\t\treturn game.i18n.localize(this.valueOf());\n\t\t\t};\n\t\t}\n\t}\n\tstatic register<T>(key: string, config: ClientSettings.PartialSettingConfig<T>) { game.settings.register(SETTINGS.MOD_NAME, key, config); }\n\tstatic registerMenu(key: string, config: ClientSettings.PartialSettingSubmenuConfig) { game.settings.registerMenu(SETTINGS.MOD_NAME, key, config); }\n\tstatic get<T>(key: string): T { return <T>game.settings.get(SETTINGS.MOD_NAME, key); }\n\tstatic async set<T>(key: string, value: T): Promise<T> { return await game.settings.set(SETTINGS.MOD_NAME, key, value); }\n\tstatic default<T>(key: string): T { return <T>game.settings.settings.get(SETTINGS.MOD_NAME + '.' + key).default; }\n\t/** helper for referencing a Typed constructor for the `type` field of a setting { type: SETTINGS.typeOf<MyClass>() } */\n\tstatic typeOf<T>(): ConstructorOf<T> { return Object as any; }\n}\n","import SETTINGS from \"../../common/Settings\";\nimport { Tool, ToolGroup, ControlManager as IControlManager, Predicate, Handler } from \"./ToolType\";\n\ninterface ToolUI {\n\tname: string;\n\ttitle: string;\n\ticon: string;\n\tclass: string | false;\n\tactive: boolean;\n\tbutton: boolean;\n\ttoggle: boolean;\n}\n\ninterface ToolGroupUI extends ToolUI {\n\ttools: Partial<ToolUI>[];\n}\n\ntype CMData = {\n\tgroups: Partial<ToolGroupUI>[];\n\tsingleGroup: boolean;\n};\n\nexport default class ControlManager extends Application implements IControlManager {\n\tstatic async checkBoolean(field?: Predicate | boolean | null, invertFalsey = false): Promise<boolean> {\n\t\treturn field instanceof Function ? await field() :\n\t\t\t((invertFalsey && (field === null || field === undefined || field)) || (!invertFalsey && !!field));\n\t}\n\n\tprivate initializationIncomplete = false;\n\tprivate _groups: ToolGroup[];\n\tprivate magnetMenu: JQuery<HTMLElement> | null = null;\n\tprivate hooksRegister: Record<string, number> = {};\n\tget groups(): ToolGroup[] { return this._groups; }\n\tprivate _activeGroupName: string;\n\tget activeGroupName(): string { return this._activeGroupName; }\n\tset activeGroupName(value: string) { this._activeGroupName = value; }\n\n\tget activeToolName() {\n\t\tconst group = this.activeGroup;\n\t\treturn group ? group.activeTool : null;\n\t}\n\tget activeGroup() {\n\t\tif (!this.groups) return null;\n\t\treturn this.groups.find(c => c.name === this.activeGroupName) || null;\n\t}\n\tget activeTool() {\n\t\tconst group = this.activeGroup;\n\t\tif (!group) return null;\n\t\tconst tool = group.tools.find(t => t.name === group.activeTool);\n\t\treturn tool || null;\n\t}\n\tstatic get defaultOptions(): ApplicationOptions {\n\t\treturn mergeObject(super.defaultOptions, {\n\t\t\twidth: 100,\n\t\t\tid: \"moduleControls\",\n\t\t\ttemplate: `modules/lib-df-buttons/templates/controls.hbs`,\n\t\t\tpopOut: false,\n\t\t\tresizable: false,\n\n\t\t});\n\t}\n\n\tprivate static initializeFields(control: Tool) {\n\t\t// TODO: Remove this block in the future!\n\t\t//! Handle deprecated `active` field\n\t\tif ((<any>control).active !== undefined)\n\t\t\tcontrol.isActive = (<any>control).active;\n\t\t// TODO: END OF BLOCK\n\t\tcontrol.toggle = !!control.toggle;\n\t\tcontrol.button = !!control.button;\n\t\tcontrol.isActive = control.toggle ? (control.isActive ?? false) : false;\n\t\tcontrol.visible = control.visible ?? true;\n\t\tcontrol.onClick = control.onClick ?? null;\n\t}\n\n\tasync initialize() {\n\t\tthis._groups = <any>this._getModuleToolGroups();\n\t\tthis.activeGroupName = null;\n\t\t// Defer initialization completion to the first render call\n\t\tthis.initializationIncomplete = true;\n\t}\n\tprivate async completeInitialization() {\n\t\tthis.initializationIncomplete = false;\n\t\tfor (const group of this._groups) {\n\t\t\t// Initialize all unset fields to their defaults\n\t\t\tControlManager.initializeFields(group);\n\t\t\t// Detect if this group should be the default active group\n\t\t\tif (!this.activeGroupName && !group.toggle && !group.button && await ControlManager.checkBoolean(group.visible)) {\n\t\t\t\tthis.activeGroupName = group.name;\n\t\t\t\tgroup.isActive = true;\n\t\t\t\t// Notify the auto-selected group they are now selected\n\t\t\t\tconst currentGroup = this.activeGroup;\n\t\t\t\tthis._invokeHandler(currentGroup?.onClick, currentGroup, false);\n\t\t\t}\n\t\t\t// Initialize the tools for the group\n\t\t\tfor (const tool of (group.tools ?? [])) {\n\t\t\t\tControlManager.initializeFields(tool);\n\t\t\t\tif (!group.activeTool && !tool.toggle && !tool.button && await ControlManager.checkBoolean(tool.visible)) {\n\t\t\t\t\tgroup.activeTool = tool.name;\n\t\t\t\t\ttool.isActive = true;\n\t\t\t\t\t// Notify the auto-selected tool they are now selected\n\t\t\t\t\tconst currentTool = this.activeTool;\n\t\t\t\t\tthis._invokeHandler(currentTool?.onClick, currentTool, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trefresh(): void {\n\t\tthis.render();\n\t}\n\n\tprivate _getModuleToolGroups(): ToolGroup[] {\n\t\tconst groups: ToolGroup[] = [];\n\t\tHooks.callAll(`getModuleToolGroupsPre`, this, groups);\n\t\tHooks.callAll(`getModuleToolGroups`, this, groups);\n\t\tHooks.callAll(`getModuleToolGroupsPost`, this, groups);\n\t\treturn groups;\n\t}\n\n\tasync getData(_?: Application.RenderOptions): Promise<CMData> {\n\t\tif (this.groups.length == 0) return { groups: [], singleGroup: false };\n\t\tconst groups: ToolGroupUI[] = [];\n\t\tfor (const group of this._groups) {\n\t\t\tif (!await ControlManager.checkBoolean(group.visible, true)) continue;\n\t\t\tconst groupUI: ToolGroupUI = {\n\t\t\t\tname: group.name,\n\t\t\t\ticon: group.icon,\n\t\t\t\ttitle: group.title,\n\t\t\t\tbutton: group.button,\n\t\t\t\ttoggle: group.toggle,\n\t\t\t\tclass: group.class ?? false,\n\t\t\t\tactive: await ControlManager.checkBoolean(group.isActive),\n\t\t\t\ttools: []\n\t\t\t};\n\t\t\tfor (const tool of (group.tools ?? [])) {\n\t\t\t\tif (!await ControlManager.checkBoolean(tool.visible, true)) continue;\n\t\t\t\tgroupUI.tools.push({\n\t\t\t\t\tname: tool.name,\n\t\t\t\t\ticon: tool.icon,\n\t\t\t\t\ttitle: tool.title,\n\t\t\t\t\tbutton: tool.button,\n\t\t\t\t\ttoggle: tool.toggle,\n\t\t\t\t\tclass: tool.class ?? false,\n\t\t\t\t\tactive: await ControlManager.checkBoolean(tool.isActive)\n\t\t\t\t});\n\t\t\t}\n\t\t\tgroups.push(groupUI);\n\t\t}\n\t\treturn { groups, singleGroup: groups.length === 1 && !groups[0].button && !groups[0].toggle };\n\t}\n\n\t/** @inheritdoc */\n\tactivateListeners(html: JQuery<HTMLElement>) {\n\t\thtml.find('.control-tool[data-group]').on('click', this._onClickGroup.bind(this));\n\t\thtml.find('.control-tool[data-tool]').on('click', this._onClickTool.bind(this));\n\t\thtml.find('#magnet').on('click', async () => {\n\t\t\tif (this.magnetMenu) return;\n\t\t\tthis.magnetMenu = $(await renderTemplate(`/modules/${SETTINGS.MOD_NAME}/templates/magnet.hbs`, {}));\n\t\t\tthis.magnetMenu.find('button').on('click', async event => {\n\t\t\t\tthis.magnetMenu.remove();\n\t\t\t\tthis.magnetMenu = null;\n\t\t\t\tawait SETTINGS.set('position', event.currentTarget.classList[0]);\n\t\t\t});\n\t\t\tthis.magnetMenu.find('.close').on('click', () => {\n\t\t\t\tthis.magnetMenu.remove();\n\t\t\t\tthis.magnetMenu = null;\n\t\t\t});\n\t\t\t$('body').append(this.magnetMenu);\n\t\t});\n\t}\n\n\tprivate async _invokeHandler(handler: Handler<boolean> | null | undefined, owner: Tool, active?: boolean) {\n\t\tif (handler === null || handler === undefined) return;\n\t\tif (!handler.prototype) await handler(active);\n\t\telse await handler.bind(owner)(active);\n\t}\n\n\tprivate async _onClickGroup(event: JQuery.ClickEvent) {\n\t\tevent.preventDefault();\n\t\tif (!canvas.ready) return;\n\t\tconst li = event.currentTarget;\n\t\tconst groupName = li.dataset.group;\n\t\tconst group = this.groups.find(c => c.name === groupName);\n\t\t// Handle Toggles\n\t\tif (group.toggle) {\n\t\t\tconst newState = !await ControlManager.checkBoolean(group.isActive);\n\t\t\t// If the group's active state is not a function, use it to store state\n\t\t\tif (!(group.isActive instanceof Function))\n\t\t\t\tgroup.isActive = newState;\n\t\t\tthis._invokeHandler(group.onClick, group, newState);\n\t\t\t// Render the controls\n\t\t\tthis.refresh();\n\t\t}\n\t\t// Handle Buttons\n\t\telse if (group.button) {\n\t\t\tawait this._invokeHandler(group.onClick, group);\n\t\t}\n\t\t// Handle Groups\n\t\telse\n\t\t\tthis.activateGroupByName(groupName);\n\t}\n\tprivate async _onClickTool(event: JQuery.ClickEvent) {\n\t\tevent.preventDefault();\n\t\tif (!canvas.ready) return;\n\t\tconst li = event.currentTarget;\n\t\tconst group = this.activeGroup;\n\t\tconst toolName = li.dataset.tool;\n\t\tconst tool = group.tools.find(t => t.name === toolName);\n\t\t// Handle Toggles\n\t\tif (tool.toggle) {\n\t\t\tconst newState = !await ControlManager.checkBoolean(tool.isActive);\n\t\t\t// If the tool's active state is not a function, use it to store state\n\t\t\tif (!(tool.isActive instanceof Function))\n\t\t\t\ttool.isActive = newState;\n\t\t\tthis._invokeHandler(tool.onClick, tool, newState);\n\t\t\t// Render the controls\n\t\t\tthis.refresh();\n\t\t}\n\t\t// Handle Buttons\n\t\telse if (tool.button)\n\t\t\tthis._invokeHandler(tool.onClick, tool);\n\t\t// Handle Tools\n\t\telse\n\t\t\tthis.activateToolByName(this.activeGroupName, toolName, true);\n\t}\n\n\tprotected _injectHTML(html: JQuery<HTMLElement>): void {\n\t\t$('body').append(html);\n\t\tthis._element = html;\n\t}\n\n\tasync _render(force = false, options = {}): Promise<void> {\n\t\t// If initialization needs to be completed, invoke the completion\n\t\tif (this.initializationIncomplete) await this.completeInitialization();\n\t\tif (this._state !== Application.RENDER_STATES.RENDERED) {\n\t\t\tthis.hooksRegister['collapseSidebarPre'] = Hooks.on('collapseSidebarPre', this._handleSidebarCollapse.bind(this));\n\t\t\tthis.hooksRegister['activateGroupByName'] = Hooks.on('activateGroupByName', this.activateGroupByName);\n\t\t\tthis.hooksRegister['activateToolByName'] = Hooks.on('activateToolByName', this.activateToolByName);\n\t\t\tthis.hooksRegister['reloadModuleButtons'] = Hooks.on('reloadModuleButtons', this.reloadModuleButtons);\n\t\t\tthis.hooksRegister['renderSceneControls'] = Hooks.on('renderSceneControls', this._handleWindowResize);\n\t\t\tthis.hooksRegister['collapseSceneNavigation'] = Hooks.on('collapseSceneNavigation', this._handleWindowResize);\n\t\t\tthis.hooksRegister['renderPlayerList'] = Hooks.on('renderPlayerList', this._handleWindowResize);\n\t\t\twindow.addEventListener('resize', this._handleWindowResize);\n\t\t}\n\t\tawait super._render(force, options);\n\t\tif ((<any>ui.sidebar)._collapsed) {\n\t\t\tthis.element.css('right', '35px');\n\t\t}\n\n\t\tthis.element[0].removeAttribute('class');\n\t\tthis.element[0].classList.add('app');\n\t\tswitch (SETTINGS.get('position')) {\n\t\t\tcase 'top': this.element[0].classList.add('top'); break;\n\t\t\tcase 'left': this.element[0].classList.add('left'); break;\n\t\t\tcase 'bottom': this.element[0].classList.add('bottom'); break;\n\t\t\tcase 'right': default: break;\n\t\t}\n\n\t\tthis._handleSidebarCollapse(ui.sidebar, (<any>ui.sidebar)._collapsed);\n\t\tthis._handleWindowResize();\n\t}\n\tclose(options?: Application.CloseOptions): Promise<void> {\n\t\tHooks.off('collapseSidebarPre', this.hooksRegister['collapseSidebarPre']);\n\t\tHooks.off('activateGroupByName', this.hooksRegister['activateGroupByName']);\n\t\tHooks.off('activateToolByName', this.hooksRegister['activateToolByName']);\n\t\tHooks.off('reloadModuleButtons', this.hooksRegister['reloadModuleButtons']);\n\t\tHooks.off('renderSceneControls', this.hooksRegister['renderSceneControls']);\n\t\tHooks.off('collapseSceneNavigation', this.hooksRegister['collapseSceneNavigation']);\n\t\tHooks.off('renderPlayerList', this.hooksRegister['renderPlayerList']);\n\t\twindow.removeEventListener('resize', this._handleWindowResize);\n\t\treturn super.close(options);\n\t}\n\n\tprivate _handleSidebarCollapse(sideBar: Sidebar, collapsed: boolean) {\n\t\tconst collapsedSize = '40px';\n\t\tconst expandedSize = '310px';\n\t\tconst shouldAnimate = collapsed ? sideBar.element[0].offsetWidth !== 32 : sideBar.element[0].offsetWidth !== 300;\n\t\tif (SETTINGS.get('position') !== 'right') {\n\t\t\tthis.element.css('right', 'unset');\n\t\t\treturn;\n\t\t}\n\t\tif (shouldAnimate) {\n\t\t\tif (collapsed) this.element.delay(250).animate({ right: collapsedSize }, 150);\n\t\t\telse this.element.animate({ right: expandedSize }, 150);\n\t\t}\n\t\telse this.element[0].style.right = collapsed ? collapsedSize : expandedSize;\n\t}\n\n\tprivate static readonly CONTROL_WIDTH = 38 + 5;\n\tprivate static readonly CONTROL_HEIGHT = 48;\n\n\tprivate getLeftWidth(): number {\n\t\t//? This may need to be reintroduced for ardittristan's Button Overflow module\n\t\t// const sceneLayers = document.querySelector<HTMLElement>('#controls > ol.main-controls.app.control-tools.flexcol');\n\t\t// max = Math.floor(sceneLayers.offsetHeight / ControlManager.CONTROL_WIDTH);\n\t\t// cols = Math.ceil(sceneLayers.childElementCount / max);\n\t\tlet cols = 1;\n\t\tconst sceneTools = document.querySelector<HTMLElement>('#controls > ol.sub-controls.app.control-tools.flexcol.active');\n\t\tconst max = Math.floor(sceneTools.offsetHeight / ControlManager.CONTROL_HEIGHT);\n\t\tcols += Math.ceil(sceneTools.childElementCount / max);\n\t\treturn cols * ControlManager.CONTROL_WIDTH + 20;\n\t}\n\tprivate getTopHeight(magnetToSceneControls: boolean): number {\n\t\tconst uiTop = document.querySelector<HTMLElement>('#ui-middle #ui-top #navigation');\n\t\tlet top = uiTop.offsetHeight + uiTop.offsetTop;\n\t\tif (magnetToSceneControls) {\n\t\t\tconst layers = document.querySelector<HTMLElement>('#ui-left > #controls > ol.main-controls.app.control-tools.flexcol');\n\t\t\ttop = Math.max(top, layers.offsetTop);\n\t\t}\n\t\treturn top;\n\t}\n\tprivate _handleWindowResize() {\n\t\tconst self = <ControlManager>(<any>ui).moduleControls;\n\t\tif (self.element.length === 0) return;\n\t\tlet max: number;\n\t\tlet cols: number;\n\n\t\tconst position = SETTINGS.get<string>('position');\n\t\tself.element.addClass(position);\n\t\tswitch (position) {\n\t\t\tcase 'top': {\n\t\t\t\tself.element[0].style.marginTop = self.getTopHeight(false) + 'px';\n\t\t\t\tself.element[0].style.marginLeft = self.getLeftWidth() + 'px';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'left': {\n\t\t\t\tconst controls = document.querySelector<HTMLElement>('#ui-left > #controls');\n\t\t\t\tself.element[0].style.height = `${controls.offsetHeight}px`;\n\t\t\t\tmax = Math.floor(controls.offsetHeight / ControlManager.CONTROL_WIDTH);\n\t\t\t\tcols = Math.ceil(self.groups.length / max);\n\t\t\t\tself.element.find('.group-tools').css('margin-left', `${(cols - 1) * (ControlManager.CONTROL_WIDTH + 2)}px`);\n\t\t\t\tself.element[0].style.marginTop = self.getTopHeight(true) + 'px';\n\t\t\t\tself.element[0].style.marginLeft = self.getLeftWidth() + 'px';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'bottom': {\n\t\t\t\tself.element[0].style.left = document.getElementById(\"hotbar-directory-controls\").offsetLeft + 'px';\n\t\t\t\tself.element[0].style.bottom = (document.getElementById('hotbar').offsetHeight + 10) + 'px';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'right': default: {\n\t\t\t\tmax = Math.floor(self.element[0].offsetHeight / ControlManager.CONTROL_WIDTH);\n\t\t\t\tcols = Math.ceil(self.groups.length / max);\n\t\t\t\tself.element.find('.group-tools').css('margin-right', `${(cols - 1) * (ControlManager.CONTROL_WIDTH + 2)}px`);\n\t\t\t\tself.element[0].style.top = document.getElementById(\"sidebar-tabs\").offsetTop + 'px';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync activateGroupByName(groupName: string) {\n\t\tconst self = <ControlManager>(<any>ui).moduleControls;\n\t\tconst group = self.groups.find(x => x.name === groupName);\n\t\tif (!group) {\n\t\t\tconsole.warn(`ControlManager::activateGroupByName > Attempted to activate ToolGroup with non-existant name '${groupName}'`);\n\t\t\treturn;\n\t\t}\n\t\tif (group.button || group.toggle) {\n\t\t\tconsole.warn(`ControlManager::activateGroupByName > Attempted to activate ToolGroup that is either a button or toggle`);\n\t\t\treturn;\n\t\t}\n\t\tif (this.activeGroupName === groupName) {\n\t\t\tself.refresh();\n\t\t\treturn;\n\t\t}\n\t\tconst prevGroup = this.activeGroup;\n\t\tthis.activeGroupName = groupName;\n\t\t// Deactivate previous group\n\t\tif (prevGroup) {\n\t\t\tprevGroup.isActive = false;\n\t\t\tawait this._invokeHandler(prevGroup.onClick, prevGroup, false);\n\t\t}\n\t\t// Activate new group\n\t\tgroup.isActive = true;\n\t\tawait this._invokeHandler(group.onClick, group, true);\n\t\tself.refresh();\n\t\tHooks.callAll(\"toolGroupActivated\", this, group);\n\t}\n\tasync activateToolByName(groupName: string, toolName: string, activateGroup: boolean = true) {\n\t\tconst self = <ControlManager>(<any>ui).moduleControls;\n\t\tconst group = self.groups.find(x => x.name === groupName);\n\t\tif (!group) {\n\t\t\tconsole.warn(`ControlManager::activateToolByName > Attempted to activate ToolGroup with non-existant name '${groupName}'`);\n\t\t\treturn;\n\t\t}\n\t\tconst tool = group.tools.find(x => x.name === toolName);\n\t\tif (!tool) {\n\t\t\tconsole.warn(`ControlManager::activateToolByName > Attempted to activate Tool with non-existant name '${toolName}'`);\n\t\t\treturn;\n\t\t}\n\t\tif (tool.button || tool.toggle) {\n\t\t\tconsole.warn(`ControlManager::activateToolByName > Attempted to activate Tool that is either a button or toggle`);\n\t\t\treturn;\n\t\t}\n\t\tif (group.activeTool === toolName) {\n\t\t\tself.refresh();\n\t\t\treturn;\n\t\t}\n\t\tconst prevTool = group.tools.find(x => x.name === group.activeTool);\n\t\tgroup.activeTool = toolName;\n\t\t// Deactivate previous group\n\t\tif (prevTool) {\n\t\t\tprevTool.isActive = false;\n\t\t\tawait this._invokeHandler(prevTool.onClick, prevTool, false);\n\t\t}\n\t\t// Activate new group\n\t\ttool.isActive = true;\n\t\tawait this._invokeHandler(tool.onClick, tool, true);\n\t\tif (activateGroup && self.activeGroupName !== groupName) {\n\t\t\tthis.activateGroupByName(groupName);\n\t\t}\n\t\telse if (self.activeGroupName === groupName) {\n\t\t\tself.refresh();\n\t\t}\n\t\tHooks.callAll(\"toolActivated\", this, group, tool);\n\t}\n\treloadModuleButtons() {\n\t\tHooks.callAll(\"moduleButtonsReloading\", this);\n\t\t// Notify the current group that they are now disabled before we rebuild\n\t\tconst currentGroup = this.activeGroup;\n\t\tthis._invokeHandler(currentGroup?.onClick, currentGroup, false);\n\t\t// Notify all selected tools of being deactivated\n\t\tfor (const group of this._groups) {\n\t\t\tconst currentTool = group.activeTool && group.tools ? group.tools.find(x => x.name === group.activeTool) : undefined;\n\t\t\tthis._invokeHandler(currentTool?.onClick, currentTool, false);\n\t\t}\n\t\t(<ControlManager>(<any>ui).moduleControls).initialize();\n\t\t(<ControlManager>(<any>ui).moduleControls).render();\n\t}\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import SETTINGS from \"../../common/Settings\";\nimport ControlManagerImpl from \"./ControlManager\";\n\nSETTINGS.init('lib-df-buttons');\n\nHooks.once('init', () => {\n\t(<any>ui).moduleControls = new ControlManagerImpl();\n\n\tSETTINGS.register('position', {\n\t\tscope: 'client',\n\t\tchoices: {\n\t\t\tright: 'LIB_DF_BUTTONS.choices.right',\n\t\t\tleft: 'LIB_DF_BUTTONS.choices.left',\n\t\t\ttop: 'LIB_DF_BUTTONS.choices.top',\n\t\t\tbottom: 'LIB_DF_BUTTONS.choices.bottom'\n\t\t},\n\t\tname: 'LIB_DF_BUTTONS.name',\n\t\thint: 'LIB_DF_BUTTONS.hint',\n\t\tconfig: false,\n\t\tdefault: 'left',\n\t\tonChange: () => (<ControlManagerImpl>(<any>ui).moduleControls).render()\n\t});\n\n\t// Soft Dependency on `libwrapper`. Only use it if it already exists\n\tif (game.modules.get('libWrapper')?.active) {\n\t\tlibWrapper.register(SETTINGS.MOD_NAME, 'Sidebar.prototype.expand', function (this: Sidebar, wrapped: AnyFunction) {\n\t\t\tHooks.callAll('collapseSidebarPre', this, !this._collapsed);\n\t\t\twrapped();\n\t\t}, 'WRAPPER');\n\t\tlibWrapper.register(SETTINGS.MOD_NAME, 'Sidebar.prototype.collapse', function (this: Sidebar, wrapped: AnyFunction) {\n\t\t\tHooks.callAll('collapseSidebarPre', this, !this._collapsed);\n\t\t\twrapped();\n\t\t}, 'WRAPPER');\n\t}// Otherwise do the traditional style of monkey-patch wrapper\n\telse {\n\t\t(<any>Sidebar.prototype).expand_ORIG = Sidebar.prototype.expand;\n\t\tSidebar.prototype.expand = function (this: Sidebar) {\n\t\t\tHooks.callAll('collapseSidebarPre', this, !this._collapsed);\n\t\t\t(<any>Sidebar.prototype).expand_ORIG.bind(this)();\n\t\t};\n\t\t(<any>Sidebar.prototype).collapse_ORIG = Sidebar.prototype.collapse;\n\t\tSidebar.prototype.collapse = function (this: Sidebar) {\n\t\t\tHooks.callAll('collapseSidebarPre', this, !this._collapsed);\n\t\t\t(<any>Sidebar.prototype).collapse_ORIG.bind(this)();\n\t\t};\n\t}\n});\nHooks.once('setup', () => {\n\t(<ControlManagerImpl>(<any>ui).moduleControls).initialize();\n});\nHooks.once('ready', () => {\n\t(<ControlManagerImpl>(<any>ui).moduleControls).render(true);\n});\n/* Example code for appending ToolGroups and Tools */\n/**\n//import { Tool, ToolGroup } from \"./ToolType\";\nHooks.on('getModuleToolGroups', (app: ControlManager, groups: ToolGroup[]) => {\n\tconst handleClick = function (this: Tool, active?: boolean) {\n\t\tif (active !== undefined)\n\t\t\tconsole.log(`${this.name}: active=${active}`);\n\t\telse\n\t\t\tconsole.log(this.name);\n\t};\n\tgroups.push({\n\t\tname: 'radial1',\n\t\ticon: '<i class=\"fas fa-dice-one\"></i>',\n\t\ttitle: 'radial1',\n\t\tonClick: handleClick,\n\t\ttools: [\n\t\t\t{ name: 'tool1-1', title: 'tool1-1', onClick: handleClick, icon: '<i class=\"fas fa-dice-one\"></i>' },\n\t\t\t{ name: 'tool1-2', title: 'tool1-2', onClick: handleClick, icon: '<i class=\"fas fa-dice-one\"></i>' },\n\t\t\t{ name: 'tool1-3', title: 'tool1-3', onClick: handleClick, icon: '<i class=\"fas fa-dice-one\"></i>', button: true },\n\t\t\t{ name: 'tool1-4', title: 'tool1-4', onClick: handleClick, icon: '<i class=\"fas fa-dice-one\"></i>', toggle: true },\n\t\t]\n\t});\n\tgroups.push({\n\t\tname: 'radial2',\n\t\ticon: '<i class=\"fas fa-dice-two\"></i>',\n\t\ttitle: 'radial2',\n\t\tonClick: handleClick,\n\t\ttools: [\n\t\t\t{ name: 'tool2-1', title: 'tool2-1', onClick: handleClick, icon: '<i class=\"fas fa-dice-two\"></i>' },\n\t\t\t{ name: 'tool2-2', title: 'tool2-2', onClick: handleClick, icon: '<i class=\"fas fa-dice-two\"></i>' },\n\t\t\t{ name: 'tool2-3', title: 'tool2-3', onClick: handleClick, icon: '<i class=\"fas fa-dice-two\"></i>', button: true },\n\t\t\t{ name: 'tool2-4', title: 'tool2-4', onClick: handleClick, icon: '<i class=\"fas fa-dice-two\"></i>', toggle: true },\n\t\t]\n\t});\n\tgroups.push({\n\t\tname: 'radial3',\n\t\ticon: '<i class=\"fas fa-dice-three\"></i>',\n\t\ttitle: 'radial3',\n\t\tonClick: handleClick,\n\t\ttools: [\n\t\t\t{ name: 'tool3-1', title: 'tool3-1', onClick: handleClick, icon: '<i class=\"fas fa-dice-three\"></i>' },\n\t\t\t{ name: 'tool3-2', title: 'tool3-2', onClick: handleClick, icon: '<i class=\"fas fa-dice-three\"></i>' },\n\t\t\t{ name: 'tool3-3', title: 'tool3-3', onClick: handleClick, icon: '<i class=\"fas fa-dice-three\"></i>', button: true },\n\t\t\t{ name: 'tool3-4', title: 'tool3-4', onClick: handleClick, icon: '<i class=\"fas fa-dice-three\"></i>', toggle: true },\n\t\t]\n\t});\n\tgroups.push({\n\t\tname: 'button1',\n\t\ticon: '<i class=\"fas fa-dice-one\"></i>',\n\t\ttitle: 'button1',\n\t\tbutton: true,\n\t\tonClick: handleClick,\n\t});\n\tgroups.push({\n\t\tname: 'button2',\n\t\ticon: '<i class=\"fas fa-dice-two\"></i>',\n\t\ttitle: 'button2',\n\t\tbutton: true,\n\t\tonClick: handleClick,\n\t});\n\n\tgroups.push({\n\t\tname: 'toggle1',\n\t\ticon: '<i class=\"fas fa-dice-one\"></i>',\n\t\ttitle: 'toggle1',\n\t\ttoggle: true,\n\t\tonClick: handleClick,\n\t});\n\tgroups.push({\n\t\tname: 'toggle2',\n\t\ticon: '<i class=\"fas fa-dice-two\"></i>',\n\t\ttitle: 'toggle2',\n\t\ttoggle: true,\n\t\tisActive: true,\n\t\tonClick: handleClick,\n\t});\n});\n/**/"],"names":["SETTINGS","static","moduleName","this","MOD_NAME","String","prototype","localize","game","i18n","valueOf","key","config","settings","register","registerMenu","get","value","set","default","Object","ControlManager","Application","initializationIncomplete","magnetMenu","hooksRegister","field","invertFalsey","Function","groups","_groups","activeGroupName","_activeGroupName","activeToolName","group","activeGroup","activeTool","find","c","name","tools","t","defaultOptions","mergeObject","super","width","id","template","popOut","resizable","control","undefined","active","isActive","toggle","button","visible","onClick","async","_getModuleToolGroups","initializeFields","checkBoolean","currentGroup","_invokeHandler","tool","currentTool","refresh","render","Hooks","callAll","_","length","singleGroup","groupUI","icon","title","class","push","activateListeners","html","on","_onClickGroup","bind","_onClickTool","$","renderTemplate","event","remove","currentTarget","classList","append","handler","owner","preventDefault","canvas","ready","groupName","dataset","newState","activateGroupByName","li","toolName","activateToolByName","_injectHTML","_element","force","options","completeInitialization","_state","RENDER_STATES","RENDERED","_handleSidebarCollapse","reloadModuleButtons","_handleWindowResize","window","addEventListener","_render","ui","sidebar","_collapsed","element","css","removeAttribute","add","close","off","removeEventListener","sideBar","collapsed","collapsedSize","expandedSize","shouldAnimate","offsetWidth","delay","animate","right","style","getLeftWidth","cols","sceneTools","document","querySelector","max","Math","floor","offsetHeight","CONTROL_HEIGHT","ceil","childElementCount","CONTROL_WIDTH","getTopHeight","magnetToSceneControls","uiTop","top","offsetTop","layers","self","moduleControls","position","addClass","marginTop","marginLeft","controls","height","left","getElementById","offsetLeft","bottom","x","console","warn","prevGroup","activateGroup","prevTool","initialize","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","defineProperty","enumerable","obj","prop","hasOwnProperty","call","r","Symbol","toStringTag","once","scope","choices","hint","onChange","modules","libWrapper","wrapped","Sidebar","expand_ORIG","expand","collapse_ORIG","collapse"],"sourceRoot":""}