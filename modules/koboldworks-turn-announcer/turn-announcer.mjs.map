{
  "version": 3,
  "sources": ["../src/helpers/math.mjs", "../src/modules/quench.mjs", "../src/turn-announcer.mjs", "../src/helpers/compat.mjs"],
  "sourcesContent": ["/**\n * @param {Number} num\n * @param {Number} min\n * @param {Number} max\n * @returns {Number} Number wrapped within the provided range\n */\nexport function wrapNumber(num, min, max) {\n\tconst range = max - min + 1, value = num - min + 1; // normalize to 1 to range+1\n\tconst t = value % range - 1;\n\treturn (t < 0 ? range + t : t) + min;\n}\n", "import { wrapNumber } from '../helpers/math.mjs';\n/* global quench */\nquench.registerBatch(\n\t'koboldworks-turn-announcer.helpers',\n\tasync function testHelpers({ describe, it, expect, before, after } = {}) {\n\t\tdescribe('wrapNumber', function testWrapNumber() {\n\t\t\tit('wrap 5 [0 \u2013 4] = 0', function () {\n\t\t\t\texpect(wrapNumber(5, 0, 4)).to.equal(0);\n\t\t\t});\n\t\t\tit('wrap 6 [2 \u2013 4] = 3', function () {\n\t\t\t\texpect(wrapNumber(6, 2, 4)).to.equal(3);\n\t\t\t});\n\t\t\tit('wrap -1 [0 \u2013 4] = 4', function () {\n\t\t\t\texpect(wrapNumber(-1, 0, 4)).to.equal(4);\n\t\t\t});\n\t\t\tit('wrap -2 [0 \u2013 4] = 3', function () {\n\t\t\t\texpect(wrapNumber(-2, 0, 4)).to.equal(3);\n\t\t\t});\n\t\t\tit('wrap -2 [2 \u2013 4] = 4', function () {\n\t\t\t\texpect(wrapNumber(-2, 2, 4)).to.equal(4);\n\t\t\t});\n\t\t\tit('wrap -102 [0 \u2013 10] = 8', function () {\n\t\t\t\texpect(wrapNumber(-102, 0, 10)).to.equal(8);\n\t\t\t});\n\t\t\tit('wrap 103 [0 \u2013 10] = 4', function () {\n\t\t\t\texpect(wrapNumber(103, 0, 10)).to.equal(4);\n\t\t\t});\n\t\t});\n\t},\n\t{ displayName: game.i18n.localize('Koboldworks.TurnAnnouncer.Tests.Helpers') }\n)\n", "const CFG = {\n\tmodule: 'koboldworks-turn-announcer',\n\tSETTING: {\n\t\tmissedKey: 'missedTurn',\n\t\thidePortrait: 'hidePortrait',\n\t\tobfuscateNPCs: 'obfuscateNPCs',\n\t\troundCycling: 'roundCycling',\n\t\tcompact: 'compact',\n\t\tturnLabel: 'turnLabel',\n\t\troundLabel: 'roundLabel',\n\t},\n};\n\nimport { wrapNumber } from './helpers/math.mjs';\nimport { getDocData, getDefaultPermission, getProtoToken, getUsers, getPermissionLevels } from './helpers/compat.mjs';\n\nconst turn_template_file = `modules/${CFG.module}/template/turn-announcer.hbs`,\n\tround_template_file = `modules/${CFG.module}/template/round-cycling.hbs`;\n\nlet turnTemplate, roundTemplate;\nHooks.once('init', () => {\n\tgetTemplate(turn_template_file).then(t => turnTemplate = t);\n\tgetTemplate(round_template_file).then(t => roundTemplate = t);\n});\n\nconst lastCombatant = {\n\tcombatant: null,\n\tget tokenId() { return this.combatant?.token?.id; },\n\tspoke: false\n};\n\n/**\n * @param {Element} content\n */\nfunction hideContent(content) {\n\tif (content) {\n\t\tcontent.replaceChildren();\n\t\tcontent.style.display = 'none';\n\t}\n}\n\n/**\n * @param {ChatMessage} cm\n * @param {Element} html\n * @param {Element} main\n */\nfunction compressTurnAnnounceMessage(cm, html, main) {\n\tconst compact = game.settings.get(CFG.module, CFG.SETTING.compact);\n\tif (compact) main.classList.add('compact');\n}\n\n/**\n * @param {ChatMessage} cm\n * @param {Element} html\n * @param {Element} main\n */\nfunction compressRoundCyclingMessage(cm, html, main) {\n\tif (!main) return;\n\tmain.classList.add('koboldworks', 'round-cycling');\n\n\tconst header = html.querySelector('.message-header');\n\tif (!header) return;\n\t// Remove sender\n\theader.querySelector('.message-sender')?.remove();\n\n\tconst content = html.querySelector('.message-content');\n\tif (!content) return;\n\tconst msg = content.querySelector('.round-message');\n\n\theader.prepend(msg);\n\tconst icon = document.createElement('i');\n\ticon.classList.add('fas', 'fa-hourglass-start');\n\tmsg?.prepend(icon, ' ');\n\n\t// Migrate data attributes\n\tconst data = content.querySelector('.round-cycling');\n\tif (data?.dataset) {\n\t\tmain.dataset.combatId = data.dataset.combatId;\n\t\tmain.dataset.round = data.dataset.round;\n\t}\n\n\t// Remove old content\n\thideContent(content);\n}\n\n/**\n * @param {ChatMessage} cm\n * @param {Element} html\n * @param {Element} main\n */\nfunction compressMissedTurnMessage(cm, html, main) {\n\tmain.classList.add('koboldworks', 'missed-turn-announcer');\n\n\tconst content = html.querySelector('.message-content > .turn-announcer');\n\n\t// Remove things to enforce formatting\n\tconst header = main.querySelector('.message-header');\n\tif (!header) return;\n\theader.classList.remove('message-header');\n\tconst wh = header.querySelector('.whisper-to');\n\tif (wh) {\n\t\tmain.title = wh.textContent;\n\t\twh.remove();\n\t}\n\tconst timestamp = header.querySelectorAll('.message-sender,.message-timestamp');\n\ttimestamp?.forEach(el => el.style.display = 'none');\n\n\tconst msgb = document.createElement('div');\n\tmsgb.classList.add('missed-token');\n\tconst missedIcon = content.querySelector('.missed-turn-icon'),\n\t\tmissedText = content.querySelector('.missed-turn-text'),\n\t\tmissedCombatant = content.querySelector('.missed-combatant'),\n\t\tmissedName = document.createElement('span');\n\tmissedName.classList.add('missed-turn-name');\n\tmissedName.textContent = missedCombatant?.textContent?.trim() ?? '...';\n\tmsgb.append(missedIcon, ' ', missedName, ' ', missedText);\n\theader.prepend(msgb);\n\n\tif (content) hideContent(content);\n}\n\nfunction updateLastCombatantFromMsg(cm, flags) {\n\tlastCombatant.spoke = false;\n\tlastCombatant.combatant = game.combat?.getCombatantByToken(flags.token) ?? null;\n}\n\n/**\n * @param {ChatMessage} cm\n * @param {JQuery} html\n * @param {Object} _options\n */\nfunction chatMessageEvent(cm, [html], _options) {\n\tconst isGM = game.user.isGM;\n\tconst cmd = getDocData(cm);\n\tconst flags = cmd.flags?.[CFG.module];\n\n\tif (!flags) {\n\t\tif (isGM && cmd.speaker?.token === lastCombatant.tokenId)\n\t\t\tlastCombatant.spoke = true;\n\t\treturn;\n\t}\n\n\tconst main = html.closest('[data-message-id]');\n\thtml?.classList.add('turn-announcer', 'koboldworks');\n\n\tif (flags.missedTurn)\n\t\tcompressMissedTurnMessage(cm, html, main);\n\telse if (flags.turnAnnounce || flags.token) {\n\t\tupdateLastCombatantFromMsg(cm, flags);\n\t\tcompressTurnAnnounceMessage(cm, html, main);\n\t}\n\telse if (flags.roundCycling) {\n\t\tcompressRoundCyclingMessage(cm, html, main);\n\t}\n\n\tmain?.querySelector('.whisper-to')?.remove();\n\n\t// De-obfuscate name for GM\n\tif (isGM && cm.getFlag(CFG.module, 'obfuscated')) {\n\t\tconst combatId = cm.getFlag(CFG.module, 'combat'),\n\t\t\tcombatantId = cm.getFlag(CFG.module, 'combatant'),\n\t\t\tcombat = game.combats.get(combatId),\n\t\t\tcombatant = combat?.combatants.get(combatantId);\n\t\tif (combatant?.token) {\n\t\t\tconst name = html.querySelector('.actor .name-box .name');\n\t\t\tif (name) name.textContent = combatant.token.name;\n\t\t\thtml.classList.add('obfuscated');\n\t\t}\n\t}\n}\n\nlet lastReported = {};\n\nfunction missedTurn(data, context) {\n\tif (data.last?.spoke || data.last == null) return; // They spoke, nothing more to do.\n\n\tconst preUpdate = context._turnAnnouncer;\n\tif (preUpdate?.combat === game.combats.active.id) {\n\t\t// Rolling back\n\t\tif (preUpdate.roundShift < 0 || preUpdate.turnShift < 0 && preUpdate.roundShift <= 0)\n\t\t\treturn;\n\t}\n\n\tconst { last, combat, combatant } = data;\n\tif (lastReported.combat !== undefined && combat.id !== lastReported.combat) return;\n\tif (last.token?.id === combatant?.token?.id) return; // Same character's turn?\n\tif (lastReported.id === last.token?.id) return;\n\n\tlastReported = { id: last.token?.id, combat: combat.id };\n\n\tconst mt = game.i18n.localize('Koboldworks.TurnAnnouncer.MissedTurn');\n\n\tconst scene = combat.scene,\n\t\tactor = last.actor?.id,\n\t\ttoken = last.token?.id,\n\t\talias = last.name;\n\n\tif (actor === undefined || token === undefined) return;\n\n\tconst msgData = {\n\t\tcontent: `<div class=\"koboldworks turn-announcer\"><span class='missed-turn-icon'><i class=\"fas fa-exclamation-triangle\"></i></span><span class='missed-combatant'>${data.last.combatant.name}</span> <span class='missed-turn-text'>${mt}</span></div>`,\n\t\trollMode: 'selfroll',\n\t\twhisper: [...game.users.filter(u => u.isGM)],\n\t\tspeaker: { scene, actor, token, alias },\n\t\tflags: {\n\t\t\t[CFG.module]: { missedTurn: true, token, actor, combatant: last.combatant.id }\n\t\t},\n\t\tuser: game.user.id,\n\t\t// type: CONST.CHAT_MESSAGE_TYPES.OOC\n\t};\n\n\treturn msgData;\n}\n\nfunction generateCards(info, context) {\n\tconst msgs = [];\n\tif (game.settings.get(CFG.module, CFG.SETTING.missedKey)) {\n\t\tconst msg = missedTurn(info, context);\n\t\tif (msg) msgs.push(msg);\n\t}\n\n\tif (getDocData(info.combatant).defeated) return msgs; // undesired\n\tif (info.last?.combatant != null && info.last.combatant.id === info.combatant.id) return msgs; // don't report the same thing multiple times\n\n\tconst speaker = info.obfuscated ? { user: game.user.id } : ChatMessage.getSpeaker({ token: info.token?.document, actor: info.actor });\n\n\tconst minPerm = getPermissionLevels().OBSERVER;\n\tconst defaultVisible = info.hidden ? false : getDefaultPermission >= minPerm;\n\n\tconst cardData = {\n\t\tcontent: turnTemplate(info, { allowProtoMethodsByDefault: true, allowProtoPropertiesByDefault: true }),\n\t\tspeaker,\n\t\trollMode: defaultVisible ? 'publicroll' : 'gmroll',\n\t\twhisper: defaultVisible ? [] : getUsers(info.actor, minPerm),\n\t\tflags: {\n\t\t\t[CFG.module]: {\n\t\t\t\tturnAnnounce: true,\n\t\t\t\ttoken: info.token?.id,\n\t\t\t\tround: info.round,\n\t\t\t\tturn: info.turn,\n\t\t\t\tcombat: info.combat.id,\n\t\t\t\tcombatant: info.combatant.id,\n\t\t\t\tobfuscated: info.obfuscated\n\t\t\t}\n\t\t},\n\t};\n\n\tChatMessage.applyRollMode(cardData, !info.hidden ? 'publicroll' : 'gmroll')\n\n\tmsgs.push(cardData);\n\n\treturn msgs;\n}\n\nfunction generateRoundCyclingCard(combat) {\n\tconst speaker = ChatMessage.getSpeaker('GM');\n\tconst override = game.settings.get(CFG.module, CFG.SETTING.roundLabel);\n\tconst data = { combat };\n\tif (override) data.message = override.replace('{round}', combat.round);\n\telse data.message = game.i18n.format('Koboldworks.TurnAnnouncer.RoundCycling', { round: combat.round });\n\tconst msgData = {\n\t\tcontent: roundTemplate(data, { allowProtoMethodsByDefault: true, allowProtoPropertiesByDefault: true }),\n\t\tspeaker,\n\t\trollMode: 'publicroll',\n\t\tflags: {\n\t\t\t[CFG.module]: { roundCycling: true, round: combat.round, combat: combat.id }\n\t\t},\n\t};\n\n\treturn msgData;\n}\n\n/**\n * @param {Combat} combat\n */\nfunction announceRoundCycling(combat, context) {\n\t// Skip in case turns were rolled back.\n\tif (combat.__turnAnnouncerLastRoundCycle >= combat.round) return;\n\tif (context._turnAnnouncer.roundShift <= 0) return;\n\tcombat.__turnAnnouncerLastRoundCycle = combat.round;\n\treturn generateRoundCyclingCard(combat);\n}\n\n/**\n * @param {Combat} combat\n * @param {String} userId\n */\nfunction announceTurn(combat, context) {\n\t// Only continue with first GM in the list\n\t// if (!game.user.isGM || game.users.filter(o => o.isGM && o.active).sort((a, b) => b.role - a.role)[0].id !== game.user.id) return;\n\n\tconst cData = getDocData(combat.combatant);\n\tconst defeated = cData?.defeated ?? false;\n\tconst combatant = !defeated ? combat.combatant : null;\n\tconst tokenDoc = combatant?.token;\n\tif (!tokenDoc) return; // Combatant with no token, unusual, but possible\n\n\tconst previous = {\n\t\tcombatant: lastCombatant.combatant, // cache\n\t\tget defeated() { return getDocData(this.combatant)?.defeated; },\n\t\tget token() { return this.combatant?.token; },\n\t\tspoke: getDocData(lastCombatant.combatant)?.defeated ? false : lastCombatant.spoke, // dead don't speak\n\t};\n\n\t// Update for next cycle\n\tlastCombatant.combatant = combatant;\n\tlastCombatant.spoke = false;\n\n\tif (!combat.started) return;\n\n\tconst info = {\n\t\tactor: combatant.actor,\n\t\tcombatant: combatant,\n\t\tcombat,\n\t\tlast: previous,\n\t\t/** @type {Token|null} */\n\t\ttoken: tokenDoc.object,\n\t\ttokenDoc,\n\t\tget round() { return this.combat?.round; },\n\t\tget turn() { return this.combat?.turn; },\n\t\tuser: combatant.players[0] ?? game.user,\n\t\tget player() { return this.user?.name; },\n\t\tname: null,\n\t\tlabel: null,\n\t\tget hidden() { return this.combatant?.hidden ?? false; },\n\t\tget visible() { return this.combatant?.visible ?? false; },\n\t\tobfuscated: false,\n\t};\n\n\tinfo.name = info.token?.name ?? combatant.name;\n\tconst getTokenImage = (td) => game.release.generation >= 10 ? td.texture.src : td.img;\n\tinfo.portrait = getTokenImage(tokenDoc) ?? getTokenImage(getProtoToken(info.actor));\n\n\tconst obfuscateType = game.settings.get(CFG.module, CFG.SETTING.obfuscateNPCs);\n\tconst hasVisibleName = () => info.token ? [30, 50].includes(getDocData(tokenDoc).displayName) : true; // 30=hovered by anyone or 50=always for everyone\n\tconst obfuscate = {\n\t\tget all() { return false; },\n\t\tget owned() { return !info.actor.hasPlayerOwner; },\n\t\tget token() { return !hasVisibleName(); },\n\t\tget any() { return !(info.actor?.hasPlayerOwner || hasVisibleName()); }\n\t};\n\tinfo.obfuscated = obfuscate[obfuscateType] ?? false;\n\tif (info.obfuscated) info.name = game.i18n.localize('Koboldworks.TurnAnnouncer.UnidentifiedTurn');\n\n\tconst label = `<span class='name'>${info.name}</span>`;\n\tconst override = game.settings.get(CFG.module, CFG.SETTING.turnLabel);\n\tif (override) info.label = override.replace('{name}', label);\n\telse info.label = game.i18n.format('Koboldworks.TurnAnnouncer.Turn', { name: label });\n\n\tif (!info.portrait || game.settings.get(CFG.module, CFG.SETTING.hidePortrait))\n\t\tinfo.hidePortrait = true;\n\n\tconst msgs = generateCards(info, context);\n\n\treturn msgs;\n}\n\n/**\n * @param {Combat} combat\n * @param {String} userId\n */\nfunction processTurn(combat, _update, context, userId) {\n\tif (game.user.id !== userId) return; // Trust the one provoking combat update has sufficient permissions\n\n\tconst msgs = [];\n\n\t// Round cycling message\n\tif (game.settings.get(CFG.module, CFG.SETTING.roundCycling)) {\n\t\tconst roundMsg = announceRoundCycling(combat, context);\n\t\tif (roundMsg) msgs.push(roundMsg);\n\t}\n\n\t// Turn announcement\n\tconst turnMsgs = announceTurn(combat, context);\n\tif (turnMsgs?.length) msgs.push(...turnMsgs);\n\n\tif (msgs.length) ChatMessage.create(msgs);\n}\n\n/* REGISTER SETTINGS */\n\nHooks.once('init', () => {\n\tgame.settings.register(CFG.module, CFG.SETTING.turnLabel, {\n\t\tname: 'Koboldworks.TurnAnnouncer.TurnCardLabel',\n\t\thint: 'Koboldworks.TurnAnnouncer.TurnCardHint',\n\t\ttype: String,\n\t\tconfig: true,\n\t\tscope: 'world',\n\t\tdefault: '',\n\t});\n\n\tgame.settings.register(CFG.module, CFG.SETTING.roundLabel, {\n\t\tname: 'Koboldworks.TurnAnnouncer.RoundCardLabel',\n\t\thint: 'Koboldworks.TurnAnnouncer.RoundCardHint',\n\t\ttype: String,\n\t\tconfig: true,\n\t\tscope: 'world',\n\t\tdefault: '',\n\t});\n\n\tgame.settings.register(CFG.module, CFG.SETTING.obfuscateNPCs, {\n\t\tname: 'Koboldworks.TurnAnnouncer.ObfuscateNPCsLabel',\n\t\thint: 'Koboldworks.TurnAnnouncer.ObfuscateNPCsHint',\n\t\ttype: String,\n\t\tconfig: true,\n\t\tscope: 'world',\n\t\tchoices: {\n\t\t\tall: 'Koboldworks.TurnAnnouncer.ObfuscateNPCsVisibility.All',\n\t\t\towned: 'Koboldworks.TurnAnnouncer.ObfuscateNPCsVisibility.Owned',\n\t\t\ttoken: 'Koboldworks.TurnAnnouncer.ObfuscateNPCsVisibility.Token',\n\t\t\t// visible: 'Koboldworks.TurnAnnouncer.ObfuscateNPCsVisibility.Visible',\n\t\t\tany: 'Koboldworks.TurnAnnouncer.ObfuscateNPCsVisibility.Any',\n\t\t},\n\t\tdefault: 'all',\n\t});\n\n\tgame.settings.register(CFG.module, CFG.SETTING.roundCycling, {\n\t\tname: 'Koboldworks.TurnAnnouncer.RoundCyclingLabel',\n\t\thint: 'Koboldworks.TurnAnnouncer.RoundCyclingHint',\n\t\ttype: Boolean,\n\t\tconfig: true,\n\t\tscope: 'world',\n\t\tdefault: true,\n\t});\n\n\tgame.settings.register(CFG.module, CFG.SETTING.missedKey, {\n\t\tname: 'Koboldworks.TurnAnnouncer.MissedTurnLabel',\n\t\thint: 'Koboldworks.TurnAnnouncer.MissedTurnHint',\n\t\ttype: Boolean,\n\t\tconfig: true,\n\t\tscope: 'world',\n\t\tdefault: false,\n\t\tonChange: (value) => value ? Hooks.on('renderChatMessage', chatMessageEvent) : Hooks.off('renderChatMessage', chatMessageEvent)\n\t});\n\n\tgame.settings.register(CFG.module, CFG.SETTING.hidePortrait, {\n\t\tname: 'Koboldworks.TurnAnnouncer.HidePortraitLabel',\n\t\thint: 'Koboldworks.TurnAnnouncer.HidePortraitHint',\n\t\ttype: Boolean,\n\t\tconfig: true,\n\t\tscope: 'world',\n\t\tdefault: false,\n\t});\n\n\tgame.settings.register(CFG.module, CFG.SETTING.compact, {\n\t\tname: 'Koboldworks.TurnAnnouncer.CompactLabel',\n\t\thint: 'Koboldworks.TurnAnnouncer.CompactHint',\n\t\ttype: Boolean,\n\t\tconfig: true,\n\t\tscope: 'world',\n\t\tdefault: true,\n\t});\n});\n\n/* HOOKS */\n\n/**\n * Detect what was changed and how and pass it along to the real update.\n */\nHooks.on('preUpdateCombat', function preUpdateCombat(combat, updateData, context) {\n\tconst roundDelta = updateData.round !== undefined ? updateData.round - combat.round : 0,\n\t\tturnCount = combat.turns.length,\n\t\troundAdjust = roundDelta * turnCount,\n\t\tforward = roundDelta >= 0,\n\t\tturnDelta = updateData.turn !== undefined ? updateData.turn - combat.turn : 0,\n\t\t// Messy calculation for round changesk\n\t\tturnDeltaWrapped = roundDelta == 0 ? turnDelta : wrapNumber(roundAdjust + turnDelta, forward ? 0 : -(turnCount - 1), forward ? turnCount - 1 : 0);\n\n\t// TODO: This does not behave nicely if larger time changes happen\n\n\tcontext._turnAnnouncer = {\n\t\tturnShift: turnDeltaWrapped,\n\t\troundShift: roundDelta,\n\t\tcombat: combat.id,\n\t};\n});\n\n// Should the handling be wholly in preUpdate?\nHooks.on('updateCombat', processTurn);\nHooks.on('renderChatMessage', chatMessageEvent);\n\nHooks.once('ready', () => {\n\t// console.log(\"~~~ Last Combatant:\", lastCombatant.combatant?.name, { combatant: lastCombatant.combatant }, { spoke: lastCombatant.spoke });\n\tlastCombatant.combatant = game.combat?.combatant ?? null; // Ensure it matches current\n});\n\nHooks.once('init', () => {\n\tif (game.modules.get('quench')?.active)\n\t\tHooks.on('quenchReady', () => import('./modules/quench.mjs'));\n});\n", "export const getPermissionLevels = () => {\n\tswitch (game.release?.generation ?? 8) {\n\t\tdefault:\n\t\tcase 10:\n\t\t\treturn CONST.DOCUMENT_OWNERSHIP_LEVELS;\n\t\tcase 9:\n\t\t\treturn CONST.DOCUMENT_PERMISSION_LEVELS;\n\t\tcase 8:\n\t\t\treturn CONST.ENTITY_PERMISSIONS.OBSERVER;\n\t}\n};\n\nexport const getDocData = (doc) => doc ? (game.release?.generation >= 10 ? doc : doc.data) : undefined;\n\nexport const getProtoToken = (actor) => actor ? (game.release?.generation >= 10 ? actor.prototypeToken.img : actor.data.token.img) : undefined;\n\nexport const getDefaultPermission = (thing) => thing ? (game.release?.generation >= 10 ? (thing.ownership) : (thing.data.permission)).default : undefined;\n\nexport const getUsers = (thing, testPerm) => thing ? Object.entries(game.release?.generation >= 10 ? thing.ownership : thing.data.permission)\n\t.filter(([_, level]) => level >= testPerm).map(([uid, _]) => uid) : [];\n"],
  "mappings": "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",
  "names": []
}
